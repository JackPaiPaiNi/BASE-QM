/*
 Guriddo jqGrid JS - v5.1.1 - 2016-10-18
 Copyright(c) 2008, Tony Tomov, tony@trirand.com

 License: http://guriddo.net/?page_id=103334
*/
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function Ma(a,e){var b,f,g=[],d;if(!this||"function"!==typeof a||a instanceof RegExp)throw new TypeError;d=this.length;for(b=0;b<d;b++)if(this.hasOwnProperty(b)&&(f=this[b],a.call(e,f,b,this))){g.push(f);break}return g}a.jgrid=a.jgrid||{};a.jgrid.hasOwnProperty("defaults")||(a.jgrid.defaults={});a.extend(a.jgrid,{version:"5.1.1",htmlDecode:function(a){return a&&("&nbsp;"===a||"&#160;"===a||1===a.length&&
160===a.charCodeAt(0))?"":a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},template:function(b){var e=a.makeArray(arguments).slice(1),c,f=e.length;null==b&&(b="");return b.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(b,d){if(!isNaN(parseInt(d,10)))return e[parseInt(d,10)];for(c=0;c<f;c++)if(a.isArray(e[c])){b=
e[c];for(var h=b.length;h--;)if(d===b[h].nm)return b[h].v}})},msie:function(){return 0<a.jgrid.msiever()},msiever:function(){var a=0,e=window.navigator.userAgent,c=e.indexOf("MSIE");0<c?a=parseInt(e.substring(c+5,e.indexOf(".",c))):navigator.userAgent.match(/Trident\/7\./)&&(a=11);return a},getCellIndex:function(b){b=a(b);if(b.is("tr"))return-1;b=(b.is("td")||b.is("th")?b:b.closest("td,th"))[0];return a.jgrid.msie()?a.inArray(b,b.parentNode.cells):b.cellIndex},stripHtml:function(a){a=String(a);var b=
/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(b,""))&&"&nbsp;"!==a&&"&#160;"!==a?a.replace(/\"/g,"'"):"":a},stripPref:function(b,e){var c=a.type(b);if("string"===c||"number"===c)b=String(b),e=""!==b?String(e).replace(String(b),""):e;return e},useJSON:!0,parse:function(b){"while(1);"===b.substr(0,9)&&(b=b.substr(9));"/*"===b.substr(0,2)&&(b=b.substr(2,b.length-4));b||(b="{}");return!0===a.jgrid.useJSON&&"object"===typeof JSON&&"function"===typeof JSON.parse?JSON.parse(b):eval("("+b+")")},parseDate:function(b,
e,c,f){var g=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,d="string"===typeof e?e.match(g):null,g=function(a,d){a=String(a);for(d=parseInt(d,10)||2;a.length<d;)a="0"+a;return a},h={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},k=0,l,m,k=function(a,d){0===a?12===d&&(d=0):12!==d&&(d+=12);return d},q=0;void 0===f&&(f=a.jgrid.getRegional(this,"formatter.date"));void 0===f.parseRe&&(f.parseRe=/[#%\\\/:_;.,\t\s-]/);f.masks.hasOwnProperty(b)&&(b=f.masks[b]);if(e&&null!=e)if(isNaN(e-0)||"u"!==String(b).toLowerCase())if(e.constructor===
Date)k=e;else if(null!==d)k=new Date(parseInt(d[1],10)),d[3]&&(q=60*Number(d[5])+Number(d[6]),q*="-"===d[4]?1:-1,q-=k.getTimezoneOffset(),k.setTime(Number(Number(k)+6E4*q)));else{"ISO8601Long"===f.srcformat&&"Z"===e.charAt(e.length-1)&&(q-=(new Date).getTimezoneOffset());e=String(e).replace(/\T/g,"#").replace(/\t/,"%").split(f.parseRe);b=b.replace(/\T/g,"#").replace(/\t/,"%").split(f.parseRe);l=0;for(m=b.length;l<m;l++){switch(b[l]){case "M":d=a.inArray(e[l],f.monthNames);-1!==d&&12>d&&(e[l]=d+1,
h.m=e[l]);break;case "F":d=a.inArray(e[l],f.monthNames,12);-1!==d&&11<d&&(e[l]=d+1-12,h.m=e[l]);break;case "n":b[l]="m";break;case "j":b[l]="d";break;case "a":d=a.inArray(e[l],f.AmPm);-1!==d&&2>d&&e[l]===f.AmPm[d]&&(e[l]=d,h.h=k(e[l],h.h));break;case "A":d=a.inArray(e[l],f.AmPm);-1!==d&&1<d&&e[l]===f.AmPm[d]&&(e[l]=d-2,h.h=k(e[l],h.h));break;case "g":h.h=parseInt(e[l],10)}void 0!==e[l]&&(h[b[l].toLowerCase()]=parseInt(e[l],10))}h.f&&(h.m=h.f);if(0===h.m&&0===h.y&&0===h.d)return"&#160;";h.m=parseInt(h.m,
10)-1;k=h.y;70<=k&&99>=k?h.y=1900+h.y:0<=k&&69>=k&&(h.y=2E3+h.y);k=new Date(h.y,h.m,h.d,h.h,h.i,h.s,h.u);0<q&&k.setTime(Number(Number(k)+6E4*q))}else k=new Date(1E3*parseFloat(e));else k=new Date(h.y,h.m,h.d,h.h,h.i,h.s,h.u);f.userLocalTime&&0===q&&(q-=(new Date).getTimezoneOffset(),0<q&&k.setTime(Number(Number(k)+6E4*q)));if(void 0===c)return k;f.masks.hasOwnProperty(c)?c=f.masks[c]:c||(c="Y-m-d");b=k.getHours();e=k.getMinutes();h=k.getDate();q=k.getMonth()+1;d=k.getTimezoneOffset();l=k.getSeconds();
m=k.getMilliseconds();var t=k.getDay(),n=k.getFullYear(),u=(t+6)%7+1,x=(new Date(n,q-1,h)-new Date(n,0,1))/864E5,z={d:g(h),D:f.dayNames[t],j:h,l:f.dayNames[t+7],N:u,S:f.S(h),w:t,z:x,W:5>u?Math.floor((x+u-1)/7)+1:Math.floor((x+u-1)/7)||(4>((new Date(n-1,0,1)).getDay()+6)%7?53:52),F:f.monthNames[q-1+12],m:g(q),M:f.monthNames[q-1],n:q,t:"?",L:"?",o:"?",Y:n,y:String(n).substring(2),a:12>b?f.AmPm[0]:f.AmPm[1],A:12>b?f.AmPm[2]:f.AmPm[3],B:"?",g:b%12||12,G:b,h:g(b%12||12),H:g(b),i:g(e),s:g(l),u:m,e:"?",
I:"?",O:(0<d?"-":"+")+g(100*Math.floor(Math.abs(d)/60)+Math.abs(d)%60,4),P:"?",T:(String(k).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(k/1E3)};return c.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return z.hasOwnProperty(a)?z[a]:a.substring(1)})},jqID:function(a){return String(a).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,
"\\$&")},guid:1,uidPref:"jqg",randId:function(b){return(b||a.jgrid.uidPref)+a.jgrid.guid++},getAccessor:function(a,e){var b,f,g=[],d;if("function"===typeof e)return e(a);b=a[e];if(void 0===b)try{if("string"===typeof e&&(g=e.split(".")),d=g.length)for(b=a;b&&d--;)f=g.shift(),b=b[f]}catch(h){}return b},getXmlData:function(b,e,c){var f="string"===typeof e?e.match(/^(.*)\[(\w+)\]$/):null;if("function"===typeof e)return e(b);if(f&&f[2])return f[1]?a(f[1],b).attr(f[2]):a(b).attr(f[2]);b=a(e,b);return c?
b:0<b.length?a(b).text():void 0},cellWidth:function(){var b=a("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),e=b.appendTo("body").find("td").width();b.remove();return.1<Math.abs(e-5)},isLocalStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(b){return!1}},getRegional:function(b,e,c){var f;if(void 0!==c)return c;b.p&&
b.p.regional&&a.jgrid.regional&&(f=a.jgrid.getAccessor(a.jgrid.regional[b.p.regional]||{},e));void 0===f&&(f=a.jgrid.getAccessor(a.jgrid,e));return f},isMobile:function(){try{return/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)?!0:!1}catch(b){return!1}},cell_width:!0,ajaxOptions:{},from:function(b){var e=this;return new function(b,f){"string"===typeof b&&
(b=a.data(b));var c=this,d=b,h=!0,k=!1,l=f,m=/[\$,%]/g,q=null,t=null,n=0,u=!1,x="",z=[],p=!0;if("object"===typeof b&&b.push)0<b.length&&(p="object"!==typeof b[0]?!1:!0);else throw"data provides is not an array";this._hasData=function(){return null===d?!1:0===d.length?!1:!0};this._getStr=function(a){var d=[];k&&d.push("jQuery.trim(");d.push("String("+a+")");k&&d.push(")");h||d.push(".toLowerCase()");return d.join("")};this._strComp=function(a){return"string"===typeof a?".toString()":""};this._group=
function(a,d){return{field:a.toString(),unique:d,items:[]}};this._toStr=function(d){k&&(d=a.trim(d));d=d.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return h?d:d.toLowerCase()};this._funcLoop=function(c){var b=[];a.each(d,function(a,d){b.push(c(d))});return b};this._append=function(a){var d;l=null===l?"":l+(""===x?" && ":x);for(d=0;d<n;d++)l+="(";u&&(l+="!");l+="("+a+")";u=!1;x="";n=0};this._setCommand=function(a,d){q=a;t=d};this._resetNegate=function(){u=!1};this._repeatCommand=function(a,
d){return null===q?c:null!==a&&null!==d?q(a,d):null!==t&&p?q(t,a):q(a)};this._equals=function(a,d){return 0===c._compare(a,d,1)};this._compare=function(a,d,c){var b=Object.prototype.toString;void 0===c&&(c=1);void 0===a&&(a=null);void 0===d&&(d=null);if(null===a&&null===d)return 0;if(null===a&&null!==d)return 1;if(null!==a&&null===d)return-1;if("[object Date]"===b.call(a)&&"[object Date]"===b.call(d))return a<d?-c:a>d?c:0;h||"number"===typeof a||"number"===typeof d||(a=String(a),d=String(d));return a<
d?-c:a>d?c:0};this._performSort=function(){0!==z.length&&(d=c._doSort(d,0))};this._doSort=function(a,d){var b=z[d].by,e=z[d].dir,f=z[d].type,h=z[d].datefmt,g=z[d].sfunc;if(d===z.length-1)return c._getOrder(a,b,e,f,h,g);d++;a=c._getGroup(a,b,e,f,h);b=[];for(e=0;e<a.length;e++)for(h=c._doSort(a[e].items,d),f=0;f<h.length;f++)b.push(h[f]);return b};this._getOrder=function(d,b,f,g,k,l){var n=[],p=[],q="a"===f?1:-1,u,x;void 0===g&&(g="text");x="float"===g||"number"===g||"currency"===g||"numeric"===g?function(a){a=
parseFloat(String(a).replace(m,""));return isNaN(a)?Number.NEGATIVE_INFINITY:a}:"int"===g||"integer"===g?function(a){return a?parseFloat(String(a).replace(m,"")):Number.NEGATIVE_INFINITY}:"date"===g||"datetime"===g?function(d){return a.jgrid.parseDate.call(e,k,d).getTime()}:a.isFunction(g)?g:function(d){d=d?a.trim(String(d)):"";return h?d:d.toLowerCase()};a.each(d,function(d,c){u=""!==b?a.jgrid.getAccessor(c,b):c;void 0===u&&(u="");u=x(u,c);p.push({vSort:u,index:d})});a.isFunction(l)?p.sort(function(a,
d){return l.call(this,a.vSort,d.vSort,q,a,d)}):p.sort(function(a,d){return c._compare(a.vSort,d.vSort,q)});g=0;for(var t=d.length;g<t;)f=p[g].index,n.push(d[f]),g++;return n};this._getGroup=function(d,b,e,f,h){var g=[],k=null,l=null,n;a.each(c._getOrder(d,b,e,f,h),function(d,e){n=a.jgrid.getAccessor(e,b);null==n&&(n="");c._equals(l,n)||(l=n,null!==k&&g.push(k),k=c._group(b,n));k.items.push(e)});null!==k&&g.push(k);return g};this.ignoreCase=function(){h=!1;return c};this.useCase=function(){h=!0;return c};
this.trim=function(){k=!0;return c};this.noTrim=function(){k=!1;return c};this.execute=function(){var b=l,e=[];if(null===b)return c;a.each(d,function(){eval(b)&&e.push(this)});d=e;return c};this.data=function(){return d};this.select=function(b){c._performSort();if(!c._hasData())return[];c.execute();if(a.isFunction(b)){var e=[];a.each(d,function(a,d){e.push(b(d))});return e}return d};this.hasMatch=function(){if(!c._hasData())return!1;c.execute();return 0<d.length};this.andNot=function(a,d,b){u=!u;
return c.and(a,d,b)};this.orNot=function(a,d,b){u=!u;return c.or(a,d,b)};this.not=function(a,d,b){return c.andNot(a,d,b)};this.and=function(a,d,b){x=" && ";return void 0===a?c:c._repeatCommand(a,d,b)};this.or=function(a,d,b){x=" || ";return void 0===a?c:c._repeatCommand(a,d,b)};this.orBegin=function(){n++;return c};this.orEnd=function(){null!==l&&(l+=")");return c};this.isNot=function(a){u=!u;return c.is(a)};this.is=function(a){c._append("this."+a);c._resetNegate();return c};this._compareValues=function(d,
b,f,h,g){var k;k=p?"jQuery.jgrid.getAccessor(this,'"+b+"')":"this";void 0===f&&(f=null);var l=f,n=void 0===g.stype?"text":g.stype;if(null!==f)switch(n){case "int":case "integer":l=isNaN(Number(l))||""===l?"0":l;k="parseInt("+k+",10)";l="parseInt("+l+",10)";break;case "float":case "number":case "numeric":l=String(l).replace(m,"");l=isNaN(Number(l))||""===l?"0":l;k="parseFloat("+k+")";l="parseFloat("+l+")";break;case "date":case "datetime":l=String(a.jgrid.parseDate.call(e,g.srcfmt||"Y-m-d",l).getTime());
k='jQuery.jgrid.parseDate.call(jQuery("#'+a.jgrid.jqID(e.p.id)+'")[0],"'+g.srcfmt+'",'+k+").getTime()";break;default:k=c._getStr(k),l=c._getStr('"'+c._toStr(l)+'"')}c._append(k+" "+h+" "+l);c._setCommand(d,b);c._resetNegate();return c};this.equals=function(a,d,b){return c._compareValues(c.equals,a,d,"==",b)};this.notEquals=function(a,d,b){return c._compareValues(c.equals,a,d,"!==",b)};this.isNull=function(a,d,b){return c._compareValues(c.equals,a,null,"===",b)};this.greater=function(a,d,b){return c._compareValues(c.greater,
a,d,">",b)};this.less=function(a,d,b){return c._compareValues(c.less,a,d,"<",b)};this.greaterOrEquals=function(a,d,b){return c._compareValues(c.greaterOrEquals,a,d,">=",b)};this.lessOrEquals=function(a,d,b){return c._compareValues(c.lessOrEquals,a,d,"<=",b)};this.startsWith=function(d,b){var e=null==b?d:b,e=k?a.trim(e.toString()).length:e.toString().length;p?c._append(c._getStr("jQuery.jgrid.getAccessor(this,'"+d+"')")+".substr(0,"+e+") == "+c._getStr('"'+c._toStr(b)+'"')):(null!=b&&(e=k?a.trim(b.toString()).length:
b.toString().length),c._append(c._getStr("this")+".substr(0,"+e+") == "+c._getStr('"'+c._toStr(d)+'"')));c._setCommand(c.startsWith,d);c._resetNegate();return c};this.endsWith=function(d,b){var e=null==b?d:b,e=k?a.trim(e.toString()).length:e.toString().length;p?c._append(c._getStr("jQuery.jgrid.getAccessor(this,'"+d+"')")+".substr("+c._getStr("jQuery.jgrid.getAccessor(this,'"+d+"')")+".length-"+e+","+e+') == "'+c._toStr(b)+'"'):c._append(c._getStr("this")+".substr("+c._getStr("this")+'.length-"'+
c._toStr(d)+'".length,"'+c._toStr(d)+'".length) == "'+c._toStr(d)+'"');c._setCommand(c.endsWith,d);c._resetNegate();return c};this.contains=function(a,d){p?c._append(c._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+c._toStr(d)+'",0) > -1'):c._append(c._getStr("this")+'.indexOf("'+c._toStr(a)+'",0) > -1');c._setCommand(c.contains,a);c._resetNegate();return c};this.groupBy=function(a,b,e,f){return c._hasData()?c._getGroup(d,a,b,e,f):null};this.orderBy=function(d,b,e,f,h){b=null==b?"a":
a.trim(b.toString().toLowerCase());null==e&&(e="text");null==f&&(f="Y-m-d");null==h&&(h=!1);if("desc"===b||"descending"===b)b="d";if("asc"===b||"ascending"===b)b="a";z.push({by:d,dir:b,type:e,datefmt:f,sfunc:h});return c};return c}(b,null)},getMethod:function(b){return this.getAccessor(a.fn.jqGrid,b)},extend:function(b){a.extend(a.fn.jqGrid,b);this.no_legacy_api||a.fn.extend(b)},clearBeforeUnload:function(b){b=a("#"+a.jgrid.jqID(b))[0];var e;if(b.grid){e=b.grid;a.isFunction(e.emptyRows)&&e.emptyRows.call(b,
!0,!0);a(document).off("mouseup.jqGrid"+b.p.id);a(e.hDiv).off("mousemove");a(b).off();var c,f=e.headers.length,g="formatCol sortData updatepager refreshIndex setHeadCheckBox constructTr formatter addXmlData addJSONData grid p".split(" ");for(c=0;c<f;c++)e.headers[c].el=null;for(c in e)e.hasOwnProperty(c)&&(e[c]=null);for(c in b.p)b.p.hasOwnProperty(c)&&(b.p[c]=a.isArray(b.p[c])?[]:null);f=g.length;for(c=0;c<f;c++)b.hasOwnProperty(g[c])&&(b[g[c]]=null,delete b[g[c]])}},gridUnload:function(b){if(b){b=
a.trim(b);0===b.indexOf("#")&&(b=b.substring(1));var e=a("#"+a.jgrid.jqID(b))[0];if(e.grid){var c=a(e).attr("id"),f=a(e).attr("class");e.p.pager&&a(e.p.pager).off().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var g=document.createElement("table");g.className=f;f=a.jgrid.jqID(e.id);a(g).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+f);1===a(e.p.pager).parents("#gbox_"+f).length&&a(e.p.pager).insertBefore("#gbox_"+f);a.jgrid.clearBeforeUnload(b);
a("#gbox_"+f).remove();a(g).attr({id:c});a("#alertmod_"+a.jgrid.jqID(b)).remove()}}},gridDestroy:function(b){if(b){b=a.trim(b);0===b.indexOf("#")&&(b=b.substring(1));var e=a("#"+a.jgrid.jqID(b))[0];if(e.grid){e.p.pager&&a(e.p.pager).remove();try{a.jgrid.clearBeforeUnload(b),a("#gbox_"+a.jgrid.jqID(b)).remove()}catch(c){}}}},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",
hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",
loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",
icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all ui-dialog",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",
icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},
grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",
icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"},colmenu:{menu_widget:"ui-widget ui-widget-content ui-corner-all",input_checkbox:"ui-widget ui-widget-content",filter_select:"ui-widget-content ui-corner-all",filter_input:"ui-widget-content ui-corner-all",icon_menu:"ui-icon-comment",icon_sort_asc:"ui-icon-arrow-1-n",icon_sort_desc:"ui-icon-arrow-1-s",
icon_columns:"ui-icon-extlink",icon_filter:"ui-icon-calculator",icon_group:"ui-icon-grip-solid-horizontal",icon_freeze:"ui-icon-grip-solid-vertical",icon_move:"ui-icon-arrow-4"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",
headerBox:"",rowTable:"table table-bordered",rowBox:"",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control input-sm",pgSelectBox:"form-control input-sm",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",
icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control input-sm"},inlinedit:{inputClass:"form-control input-sm",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",
icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control input-sm",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},
grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},
fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"},colmenu:{menu_widget:"",input_checkbox:"",filter_select:"form-control input-sm",filter_input:"form-control input-sm",icon_menu:"glyphicon-menu-hamburger",icon_sort_asc:"glyphicon-sort-by-alphabet",icon_sort_desc:"glyphicon-sort-by-alphabet-alt",icon_columns:"glyphicon-list-alt",icon_filter:"glyphicon-filter",icon_group:"glyphicon-align-left",icon_freeze:"glyphicon-object-align-horizontal",
icon_move:"glyphicon-move"}}}});a.fn.jqGrid=function(b){if("string"===typeof b){var e=a.jgrid.getMethod(b);if(!e)throw"jqGrid - No such method: "+b;var c=a.makeArray(arguments).slice(1);return e.apply(this,c)}return this.each(function(){if(!this.grid){var c;null!=b&&void 0!==b.data&&(c=b.data,b.data=[]);var e=a.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",
altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,
search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sort",order:"order",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"total"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,
scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:30,gridview:!0,rownumWidth:35,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],
groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,scrollPopUp:!1,scrollTopOffset:0,scrollLeftOffset:"100%",storeNavOptions:!1,regional:"en",styleUI:"jQueryUI",responsive:!1,restoreCellonFail:!0,colFilters:{},colMenu:!1},a.jgrid.defaults,b);void 0!==c&&(e.data=c,b.data=c);var d=this,h={headers:[],cols:[],
footers:[],dragStart:function(c,b,f){var h=a(this.bDiv).offset().left;this.resizing={idx:c,startX:b.pageX,sOL:b.pageX-h};this.hDiv.style.cursor="col-resize";this.curGbox=a("#rs_m"+a.jgrid.jqID(e.id),"#gbox_"+a.jgrid.jqID(e.id));this.curGbox.css({display:"block",left:b.pageX-h,top:f[1],height:f[2]});a(d).triggerHandler("jqGridResizeStart",[b,c]);a.isFunction(e.resizeStart)&&e.resizeStart.call(d,b,c);document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var d=a.pageX-this.resizing.startX;
a=this.headers[this.resizing.idx];var c="ltr"===e.direction?a.width+d:a.width-d,b;33<c&&(this.curGbox.css({left:this.resizing.sOL+d}),!0===e.forceFit?(b=this.headers[this.resizing.idx+e.nv],d="ltr"===e.direction?b.width-d:b.width+d,d>e.minColWidth&&(a.newWidth=c,b.newWidth=d)):(this.newWidth="ltr"===e.direction?e.tblwidth+d:e.tblwidth-d,a.newWidth=c))}},dragEnd:function(c){this.hDiv.style.cursor="default";if(this.resizing){var b=this.resizing.idx,f=this.headers[b].newWidth||this.headers[b].width,
f=parseInt(f,10);this.resizing=!1;a("#rs_m"+a.jgrid.jqID(e.id)).css("display","none");e.colModel[b].width=f;this.headers[b].width=f;this.headers[b].el.style.width=f+"px";this.cols[b].style.width=f+"px";0<this.footers.length&&(this.footers[b].style.width=f+"px");!0===e.forceFit?(f=this.headers[b+e.nv].newWidth||this.headers[b+e.nv].width,this.headers[b+e.nv].width=f,this.headers[b+e.nv].el.style.width=f+"px",this.cols[b+e.nv].style.width=f+"px",0<this.footers.length&&(this.footers[b+e.nv].style.width=
f+"px"),e.colModel[b+e.nv].width=f):(e.tblwidth=this.newWidth||e.tblwidth,a("table:first",this.bDiv).css("width",e.tblwidth+"px"),a("table:first",this.hDiv).css("width",e.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,e.footerrow&&(a("table:first",this.sDiv).css("width",e.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));c&&(a(d).triggerHandler("jqGridResizeStop",[f,b]),a.isFunction(e.resizeStop)&&e.resizeStop.call(d,f,b))}this.curGbox=null;document.onselectstart=function(){return!0}},
populateVisible:function(){h.timer&&clearTimeout(h.timer);h.timer=null;var b=a(h.bDiv).height();if(b){var c=a("table:first",h.bDiv),f,g;if(c[0].rows.length)try{g=(f=c[0].rows[1])?a(f).outerHeight()||h.prevRowHeight:h.prevRowHeight}catch(Sa){g=h.prevRowHeight}if(g){h.prevRowHeight=g;var k=e.rowNum;f=h.scrollTop=h.bDiv.scrollTop;var l=Math.round(c.position().top)-f,n=l+c.height(),k=g*k,m,p,q;n<b&&0>=l&&(void 0===e.lastpage||(parseInt((n+f+k-1)/k,10)||0)<=e.lastpage)&&(p=parseInt((b-n+k-1)/k,10)||1,
0<=n||2>p||!0===e.scroll?(m=(Math.round((n+f)/k)||0)+1,l=-1):l=1);0<l&&(m=(parseInt(f/k,10)||0)+1,p=(parseInt((f+b)/k,10)||0)+2-m,q=!0);!p||e.lastpage&&(m>e.lastpage||1===e.lastpage||m===e.page&&m===e.lastpage)||(h.hDiv.loading?h.timer=setTimeout(h.populateVisible,e.scrollTimeout):(e.page=m,q&&(h.selectionPreserver(c[0]),h.emptyRows.call(c[0],!1,!1)),h.populate(p)),e.scrollPopUp&&null!=e.lastpage&&(a("#scroll_g"+e.id).show().html(a.jgrid.template(a.jgrid.getRegional(d,"defaults.pgtext",e.pgtext),
e.page,e.lastpage)).css({top:e.scrollTopOffset+f*((parseInt(e.height,10)-45)/(parseInt(g,10)*parseInt(e.records,10)))+"px",left:e.scrollLeftOffset}),a(this).mouseout(function(){a("#scroll_g"+e.id).hide()})))}}},scrollGrid:function(d){if(e.scroll){var b=h.bDiv.scrollTop;void 0===h.scrollTop&&(h.scrollTop=0);b!==h.scrollTop&&(h.scrollTop=b,h.timer&&clearTimeout(h.timer),h.timer=setTimeout(h.populateVisible,e.scrollTimeout))}h.hDiv.scrollLeft=h.bDiv.scrollLeft;e.footerrow&&(h.sDiv.scrollLeft=h.bDiv.scrollLeft);
e.frozenColumns&&a(h.fbDiv).scrollTop(h.bDiv.scrollTop);d&&d.stopPropagation()},selectionPreserver:function(d){var b=d.p,c=b.selrow,e=b.selarrrow?a.makeArray(b.selarrrow):null,f=d.grid.bDiv.scrollLeft,h=function(){var g;b.selrow=null;b.selarrrow=[];if(b.multiselect&&e&&0<e.length)for(g=0;g<e.length;g++)e[g]!==c&&a(d).jqGrid("setSelection",e[g],!1,null);c&&a(d).jqGrid("setSelection",c,!1,null);d.grid.bDiv.scrollLeft=f;a(d).off(".selectionPreserver",h)};a(d).on("jqGridGridComplete.selectionPreserver",
h)}};if("TABLE"!==this.tagName.toUpperCase()||null==this.id)alert("Element is not a table or has no id!");else if(void 0!==document.documentMode&&5>=document.documentMode)alert("Grid can not be used in this ('quirks') mode!");else{var k=0,l,m,q;for(m in a.jgrid.regional)a.jgrid.regional.hasOwnProperty(m)&&(0===k&&(l=m),k++);1===k&&l!==e.regional&&(e.regional=l);a(this).empty().attr("tabindex","0");this.p=e;this.p.useProp=!!a.fn.prop;if(0===this.p.colNames.length)for(k=0;k<this.p.colModel.length;k++)this.p.colNames[k]=
this.p.colModel[k].label||this.p.colModel[k].name;if(this.p.colNames.length!==this.p.colModel.length)alert(a.jgrid.getRegional(this,"errors.model"));else{var t=a.jgrid.getMethod("getStyleUI"),n=d.p.styleUI+".common",u=t(n,"disabled",!0),x=t(n,"highlight",!0),z=t(n,"hover",!0);m=t(n,"cornerall",!0);var p=t(n,"icon_base",!0),w=a.jgrid.styleUI[d.p.styleUI||"jQueryUI"].colmenu;c=a.jgrid.msie();var B,r=[],E=[],A=[],n=d.p.styleUI+".base";B=a("<div "+t(n,"viewBox",!1,"ui-jqgrid-view")+" role='grid'></div>");
d.p.direction=a.trim(d.p.direction.toLowerCase());d.p._ald=!1;-1===a.inArray(d.p.direction,["ltr","rtl"])&&(d.p.direction="ltr");q=d.p.direction;a(B).insertBefore(this);a(this).appendTo(B);var v=a("<div "+t(n,"entrieBox",!1,"ui-jqgrid")+"></div>");a(v).attr({id:"gbox_"+this.id,dir:q}).insertBefore(B);a(B).attr("id","gview_"+this.id).appendTo(v);a("<div "+t(d.p.styleUI+".common","overlay",!1,"jqgrid-overlay")+" id='lui_"+this.id+"'></div>").insertBefore(B);a("<div "+t(n,"loadingBox",!1,"loading")+
" id='load_"+this.id+"'>"+a.jgrid.getRegional(d,"defaults.loadtext",this.p.loadtext)+"</div>").insertBefore(B);a(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var F=function(a,d){a=parseInt(a,10);return isNaN(a)?d||0:a},H=function(b,c,e,f,g,k){var l=d.p.colModel[b],n=l.align,m='style="',p=l.classes,q=l.name,u=[];n&&(m+="text-align:"+n+";");!0===l.hidden&&(m+="display:none;");if(0===c)m+="width: "+h.headers[b].width+"px;";else if(a.isFunction(l.cellattr)||
"string"===typeof l.cellattr&&null!=a.jgrid.cellattr&&a.isFunction(a.jgrid.cellattr[l.cellattr]))if(b=a.isFunction(l.cellattr)?l.cellattr:a.jgrid.cellattr[l.cellattr],(f=b.call(d,g,e,f,l,k))&&"string"===typeof f)if(f=f.replace(/style/i,"style").replace(/title/i,"title"),-1<f.indexOf("title")&&(l.title=!1),-1<f.indexOf("class")&&(p=void 0),u=f.replace(/\-style/g,"-sti").split(/style/),2===u.length){u[1]=a.trim(u[1].replace(/\-sti/g,"-style").replace("=",""));if(0===u[1].indexOf("'")||0===u[1].indexOf('"'))u[1]=
u[1].substring(1);m+=u[1].replace(/'/gi,'"')}else m+='"';u.length||(u[0]="",m+='"');m+=(void 0!==p?' class="'+p+'"':"")+(l.title&&e?' title="'+a.jgrid.stripHtml(e)+'"':"");m+=' aria-describedby="'+d.p.id+"_"+q+'"';return m+u[0]},D=function(b){return null==b||""===b?"&#160;":d.p.autoencode?a.jgrid.htmlEncode(b):String(b)},y=function(b,c,e,f,h){var g=d.p.colModel[e];void 0!==g.formatter?(b=""!==String(d.p.idPrefix)?a.jgrid.stripPref(d.p.idPrefix,b):b,b={rowId:b,colModel:g,gid:d.p.id,pos:e,styleUI:d.p.styleUI},
c=a.isFunction(g.formatter)?g.formatter.call(d,c,b,f,h):a.fmatter?a.fn.fmatter.call(d,g.formatter,c,b,f,h):D(c)):c=D(c);return c},I=function(a,d,b,c,e,f){d=y(a,d,b,e,"add");return'<td role="gridcell" '+H(b,c,d,e,a,f)+">"+d+"</td>"},G=function(a,b,c,e,f){e='<input role="checkbox" type="checkbox" id="jqg_'+d.p.id+"_"+a+'" '+f+' name="jqg_'+d.p.id+"_"+a+'"'+(e?'checked="checked"':"")+"/>";return'<td role="gridcell" '+H(b,c,"",null,a,!0)+">"+e+"</td>"},J=function(a,d,b,c,e){b=(parseInt(b,10)-1)*parseInt(c,
10)+1+d;a=H(a,d,b,null,d,!0);return'<td role="gridcell" '+e+" "+a+">"+b+"</td>"},M=function(a){var b,c=[],e=0,f;for(f=0;f<d.p.colModel.length;f++)b=d.p.colModel[f],"cb"!==b.name&&"subgrid"!==b.name&&"rn"!==b.name&&(c[e]="local"===a?b.name:"xml"===a||"xmlstring"===a?b.xmlmap||b.name:b.jsonmap||b.name,!1!==d.p.keyName&&!0===b.key&&(d.p.keyName=c[e]),e++);return c},Q=function(b){var c=d.p.remapColumns;c&&c.length||(c=a.map(d.p.colModel,function(a,d){return d}));b&&(c=a.map(c,function(a){return a<b?null:
a-b}));return c},P=function(d,b){var c;this.p.deepempty?a(this.rows).slice(1).remove():(c=0<this.rows.length?this.rows[0]:null,a(this.firstChild).empty().append(c));d&&this.p.scroll&&(a(this.grid.bDiv.firstChild).css({height:"auto"}),a(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0));!0===b&&this.p.treeGrid&&!this.p.loadonce&&(this.p.data=[],this.p._index={})},O=function(){var b=d.p,c=b.data,e=c.length,f,h,g,k,l,n=
b.localReader,m=b.colModel,p=n.cell,q=(!0===b.multiselect?1:0)+(!0===b.subGrid?1:0)+(!0===b.rownumbers?1:0),u=b.scroll?a.jgrid.randId():1,x,t,z;if("local"===b.datatype&&!0===n.repeatitems)for(x=Q(q),t=M("local"),g=!1===b.keyIndex?a.isFunction(n.id)?n.id.call(d,c):n.id:b.keyIndex,b=0;b<e;b++){h=c[b];f=a.jgrid.getAccessor(h,g);void 0===f&&("number"===typeof g&&null!=m[g+q]&&(f=a.jgrid.getAccessor(h,m[g+q].name)),void 0===f&&(f=u+b,p&&(k=a.jgrid.getAccessor(h,p)||h,f=null!=k&&void 0!==k[g]?k[g]:f)));
k={};k[n.id]=f;p&&(h=a.jgrid.getAccessor(h,p)||h);z=a.isArray(h)?x:t;for(f=0;f<z.length;f++)l=a.jgrid.getAccessor(h,z[f]),k[m[f+q].name]=l;a.extend(!0,c[b],k)}},Y=function(){var b=d.p.data.length,c,e,f;c=!1===d.p.keyName||!0===d.p.loadonce?d.p.localReader.id:d.p.keyName;d.p._index=[];for(e=0;e<b;e++)f=a.jgrid.getAccessor(d.p.data[e],c),void 0===f&&(f=String(e+1)),d.p._index[f]=e},va=function(b,c,e,f,h){var g="-1",k="",l;c=c?"display:none;":"";var n=a(d).triggerHandler("jqGridRowAttr",[f,h,b]);"object"!==
typeof n&&(n=a.isFunction(d.p.rowattr)?d.p.rowattr.call(d,f,h,b):"string"===typeof d.p.rowattr&&null!=a.jgrid.rowattr&&a.isFunction(a.jgrid.rowattr[d.p.rowattr])?a.jgrid.rowattr[d.p.rowattr].call(d,f,h,b):{});if(!a.isEmptyObject(n)){n.hasOwnProperty("id")&&(b=n.id,delete n.id);n.hasOwnProperty("tabindex")&&(g=n.tabindex,delete n.tabindex);n.hasOwnProperty("style")&&(c+=n.style,delete n.style);n.hasOwnProperty("class")&&(e+=" "+n["class"],delete n["class"]);try{delete n.role}catch(Ua){}for(l in n)n.hasOwnProperty(l)&&
(k+=" "+l+"="+n[l])}return'<tr role="row" id="'+b+'" tabindex="'+g+'" class="'+e+'"'+(""===c?"":' style="'+c+'"')+k+">"},ba=function(b,c,e,f){var h=new Date,g="local"!==d.p.datatype&&d.p.loadonce||"xmlstring"===d.p.datatype,k=d.p.xmlReader,l="local"===d.p.datatype?"local":"xml";g&&(d.p.data=[],d.p._index={},d.p.localReader.id="_id_");d.p.reccount=0;if(a.isXMLDoc(b)){-1!==d.p.treeANode||d.p.scroll?c=1<c?c:1:(P.call(d,!1,!0),c=1);var m=a(d),p,q,u=0,x,z=!0===d.p.multiselect?1:0,w=0,A,r=!0===d.p.rownumbers?
1:0,B,X=[],E,v={},C,D,y=[],N=!0===d.p.altRows?d.p.altclass:"",W=t(n,"rowBox",!0,"jqgrow ui-row-"+d.p.direction),Ba;!0===d.p.subGrid&&(w=1,A=a.jgrid.getMethod("addSubGridCell"));k.repeatitems||(X=M(l));B=!1===d.p.keyName?a.isFunction(k.id)?k.id.call(d,b):k.id:d.p.keyName;l=-1===String(B).indexOf("[")?X.length?function(d,b){return a(B,d).text()||b}:function(d,b){return a(k.cell,d).eq(B).text()||b}:function(a,d){return a.getAttribute(B.replace(/[\[\]]/g,""))||d};d.p.userData={};d.p.page=F(a.jgrid.getXmlData(b,
k.page),d.p.page);d.p.lastpage=F(a.jgrid.getXmlData(b,k.total),1);d.p.records=F(a.jgrid.getXmlData(b,k.records));a.isFunction(k.userdata)?d.p.userData=k.userdata.call(d,b)||{}:a.jgrid.getXmlData(b,k.userdata,!0).each(function(){d.p.userData[this.getAttribute("name")]=a(this).text()});b=a.jgrid.getXmlData(b,k.root,!0);(b=a.jgrid.getXmlData(b,k.row,!0))||(b=[]);var K=b.length,aa=0,H=[],Z=parseInt(d.p.rowNum,10),Y=d.p.scroll?a.jgrid.randId():1,wa=a("#"+a.jgrid.jqID(d.p.id)+" tbody:first");0<K&&0>=d.p.page&&
(d.p.page=1);if(b&&K){f&&(Z*=f+1);f=a.isFunction(d.p.afterInsertRow);var sa=!1,R,ba=r?t(n,"rownumBox",!1,"jqgrid-rownum"):"",ma=z?t(n,"multiBox",!1,"cbox"):"";d.p.grouping&&(sa=!0===d.p.groupingView.groupCollapse,R=a.jgrid.getMethod("groupingPrepare"));for(;aa<K;){C=b[aa];D=l(C,Y+aa);D=d.p.idPrefix+D;p=0===c?0:c+1;Ba=W+(1===(p+aa)%2?" "+N:"");var qa=y.length;y.push("");r&&y.push(J(0,aa,d.p.page,d.p.rowNum,ba));z&&y.push(G(D,r,aa,!1,ma));w&&y.push(A.call(m,z+r,aa+c));if(k.repeatitems){E||(E=Q(z+w+
r));var O=a.jgrid.getXmlData(C,k.cell,!0);a.each(E,function(a){var b=O[this];if(!b)return!1;x=b.textContent||b.text;v[d.p.colModel[a+z+w+r].name]=x;y.push(I(D,x,a+z+w+r,aa+c,C,v))})}else for(p=0;p<X.length;p++)x=a.jgrid.getXmlData(C,X[p]),v[d.p.colModel[p+z+w+r].name]=x,y.push(I(D,x,p+z+w+r,aa+c,C,v));y[qa]=va(D,sa,Ba,v,C);y.push("</tr>");d.p.grouping&&(H.push(y),d.p.groupingView._locgr||R.call(m,v,aa),y=[]);if(g||!0===d.p.treeGrid&&!d.p._ald)v._id_=a.jgrid.stripPref(d.p.idPrefix,D),d.p.data.push(v),
d.p._index[v._id_]=d.p.data.length-1;!1===d.p.gridview&&(wa.append(y.join("")),m.triggerHandler("jqGridAfterInsertRow",[D,v,C]),f&&d.p.afterInsertRow.call(d,D,v,C),y=[]);v={};u++;aa++;if(u===Z)break}}!0===d.p.gridview&&(q=-1<d.p.treeANode?d.p.treeANode:0,d.p.grouping?g||(m.jqGrid("groupingRender",H,d.p.colModel.length,d.p.page,Z),H=null):!0===d.p.treeGrid&&0<q?a(d.rows[q]).after(y.join("")):(wa.append(y.join("")),d.grid.cols=d.rows[0].cells));d.p.totaltime=new Date-h;y=null;if(!0===d.p.subGrid)try{m.jqGrid("addSubGrid",
z+r)}catch(Na){}0<u&&0===d.p.records&&(d.p.records=K);if(!0===d.p.treeGrid)try{m.jqGrid("setTreeNode",q+1,u+q+1)}catch(Na){}d.p.reccount=u;d.p.treeANode=-1;d.p.userDataOnFooter&&m.jqGrid("footerData","set",d.p.userData,!0);g&&(d.p.records=K,d.p.lastpage=Math.ceil(K/Z));e||d.updatepager(!1,!0);if(g){for(;u<K;){C=b[u];D=l(C,u+Y);D=d.p.idPrefix+D;if(k.repeatitems){E||(E=Q(z+w+r));var fa=a.jgrid.getXmlData(C,k.cell,!0);a.each(E,function(a){var b=fa[this];if(!b)return!1;x=b.textContent||b.text;v[d.p.colModel[a+
z+w+r].name]=x})}else for(p=0;p<X.length;p++)x=a.jgrid.getXmlData(C,X[p]),v[d.p.colModel[p+z+w+r].name]=x;v._id_=a.jgrid.stripPref(d.p.idPrefix,D);d.p.grouping&&R.call(m,v,u);d.p.data.push(v);d.p._index[v._id_]=d.p.data.length-1;v={};u++}d.p.grouping&&(d.p.groupingView._locgr=!0,m.jqGrid("groupingRender",H,d.p.colModel.length,d.p.page,Z),H=null)}}},pa=function(b,c,e,f){var h=new Date;if(b){-1!==d.p.treeANode||d.p.scroll?c=1<c?c:1:(P.call(d,!1,!0),c=1);var g,k,l="local"!==d.p.datatype&&d.p.loadonce||
"jsonstring"===d.p.datatype;l&&(d.p.data=[],d.p._index={},d.p.localReader.id="_id_");d.p.reccount=0;"local"===d.p.datatype?(g=d.p.localReader,k="local"):(g=d.p.jsonReader,k="json");var m=a(d),p=0,q,u,z,w=[],r=d.p.multiselect?1:0,A=!0===d.p.subGrid?1:0,B,v=!0===d.p.rownumbers?1:0,E=Q(r+A+v);k=M(k);var X,C,D,y={},W,N,K=[],Ba=!0===d.p.altRows?d.p.altclass:"",H=t(n,"rowBox",!0,"jqgrow ui-row-"+d.p.direction),aa;d.p.page=F(a.jgrid.getAccessor(b,g.page),d.p.page);d.p.lastpage=F(a.jgrid.getAccessor(b,g.total),
1);d.p.records=F(a.jgrid.getAccessor(b,g.records));d.p.userData=a.jgrid.getAccessor(b,g.userdata)||{};A&&(B=a.jgrid.getMethod("addSubGridCell"));D=!1===d.p.keyName?a.isFunction(g.id)?g.id.call(d,b):g.id:d.p.keyName;C=a.jgrid.getAccessor(b,g.root);null==C&&a.isArray(b)&&(C=b);C||(C=[]);b=C.length;u=0;0<b&&0>=d.p.page&&(d.p.page=1);var Z=parseInt(d.p.rowNum,10),Y=d.p.scroll?a.jgrid.randId():1,wa=!1,sa;f&&(Z*=f+1);"local"!==d.p.datatype||d.p.deselectAfterSort||(wa=!0);var R=a.isFunction(d.p.afterInsertRow),
ba=[],ma=!1,qa,O=a("#"+a.jgrid.jqID(d.p.id)+" tbody:first"),fa=v?t(n,"rownumBox",!1,"jqgrid-rownum"):"",Ga=r?t(n,"multiBox",!1,"cbox"):"";d.p.grouping&&(ma=!0===d.p.groupingView.groupCollapse,qa=a.jgrid.getMethod("groupingPrepare"));for(;u<b;){f=C[u];N=a.jgrid.getAccessor(f,D);void 0===N&&("number"===typeof D&&null!=d.p.colModel[D+r+A+v]&&(N=a.jgrid.getAccessor(f,d.p.colModel[D+r+A+v].name)),void 0===N&&(N=Y+u,0===w.length&&g.cell&&(q=a.jgrid.getAccessor(f,g.cell)||f,N=null!=q&&void 0!==q[D]?q[D]:
N)));N=d.p.idPrefix+N;q=1===c?0:c;aa=H+(1===(q+u)%2?" "+Ba:"");wa&&(sa=d.p.multiselect?-1!==a.inArray(N,d.p.selarrrow):N===d.p.selrow);var L=K.length;K.push("");v&&K.push(J(0,u,d.p.page,d.p.rowNum,fa));r&&K.push(G(N,v,u,sa,Ga));A&&K.push(B.call(m,r+v,u+c));X=k;g.repeatitems&&(g.cell&&(f=a.jgrid.getAccessor(f,g.cell)||f),a.isArray(f)&&(X=E));for(z=0;z<X.length;z++)q=a.jgrid.getAccessor(f,X[z]),y[d.p.colModel[z+r+A+v].name]=q,K.push(I(N,q,z+r+A+v,u+c,f,y));aa+=sa?" "+x:"";K[L]=va(N,ma,aa,y,f);K.push("</tr>");
d.p.grouping&&(ba.push(K),d.p.groupingView._locgr||qa.call(m,y,u),K=[]);if(l||!0===d.p.treeGrid&&!d.p._ald)y._id_=a.jgrid.stripPref(d.p.idPrefix,N),d.p.data.push(y),d.p._index[y._id_]=d.p.data.length-1;!1===d.p.gridview&&(O.append(K.join("")),m.triggerHandler("jqGridAfterInsertRow",[N,y,f]),R&&d.p.afterInsertRow.call(d,N,y,f),K=[]);y={};p++;u++;if(p===Z)break}!0===d.p.gridview&&(W=-1<d.p.treeANode?d.p.treeANode:0,d.p.grouping?l||(m.jqGrid("groupingRender",ba,d.p.colModel.length,d.p.page,Z),ba=null):
!0===d.p.treeGrid&&0<W?a(d.rows[W]).after(K.join("")):(O.append(K.join("")),d.grid.cols=d.rows[0].cells));d.p.totaltime=new Date-h;if(!0===d.p.subGrid)try{m.jqGrid("addSubGrid",r+v)}catch(Oa){}0<p&&0===d.p.records&&(d.p.records=b);if(!0===d.p.treeGrid)try{m.jqGrid("setTreeNode",W+1,p+W+1)}catch(Oa){}d.p.reccount=p;d.p.treeANode=-1;d.p.userDataOnFooter&&m.jqGrid("footerData","set",d.p.userData,!0);l&&(d.p.records=b,d.p.lastpage=Math.ceil(b/Z));e||d.updatepager(!1,!0);if(l){for(;p<b&&C[p];){f=C[p];
N=a.jgrid.getAccessor(f,D);void 0===N&&("number"===typeof D&&null!=d.p.colModel[D+r+A+v]&&(N=a.jgrid.getAccessor(f,d.p.colModel[D+r+A+v].name)),void 0===N&&(N=Y+p,0===w.length&&g.cell&&(c=a.jgrid.getAccessor(f,g.cell)||f,N=null!=c&&void 0!==c[D]?c[D]:N)));if(f){N=d.p.idPrefix+N;X=k;g.repeatitems&&(g.cell&&(f=a.jgrid.getAccessor(f,g.cell)||f),a.isArray(f)&&(X=E));for(z=0;z<X.length;z++)y[d.p.colModel[z+r+A+v].name]=a.jgrid.getAccessor(f,X[z]);y._id_=a.jgrid.stripPref(d.p.idPrefix,N);d.p.grouping&&
qa.call(m,y,p);d.p.data.push(y);d.p._index[y._id_]=d.p.data.length-1;y={}}p++}d.p.grouping&&(d.p.groupingView._locgr=!0,m.jqGrid("groupingRender",ba,d.p.colModel.length,d.p.page,Z))}}},xa=function(){function b(c){var e=0,f,g,k,l,n,m;if(null!=c.groups){(g=c.groups.length&&"OR"===c.groupOp.toString().toUpperCase())&&w.orBegin();for(f=0;f<c.groups.length;f++){0<e&&g&&w.or();try{b(c.groups[f])}catch(Fa){alert(Fa)}e++}g&&w.orEnd()}if(null!=c.rules)try{(k=c.rules.length&&"OR"===c.groupOp.toString().toUpperCase())&&
w.orBegin();for(f=0;f<c.rules.length;f++)n=c.rules[f],l=c.groupOp.toString().toUpperCase(),z[n.op]&&n.field&&(0<e&&l&&"OR"===l&&(w=w.or()),m=h[n.field],"date"===m.stype&&m.srcfmt&&m.newfmt&&m.srcfmt!==m.newfmt&&(n.data=a.jgrid.parseDate.call(d,m.newfmt,n.data,m.srcfmt)),w=z[n.op](w,l)(n.field,n.data,h[n.field])),e++;k&&w.orEnd()}catch(Fa){alert(Fa)}}var c=d.p.multiSort?[]:"",e=[],f=!1,h={},g=[],k=[],l,n,m,p;if(a.isArray(d.p.data)){var q=d.p.grouping?d.p.groupingView:!1,u,x,t;a.each(d.p.colModel,function(){n=
this.sorttype||"text";t=this.index||this.name;"date"===n||"datetime"===n?(this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?(l=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:a.jgrid.getRegional(d,"formatter.date.srcformat"),m=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:a.jgrid.getRegional(d,"formatter.date.newformat")):l=m=this.datefmt||"Y-m-d",h[t]={stype:n,srcfmt:l,newfmt:m,sfunc:this.sortfunc||null}):h[t]=
{stype:n,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null};if(d.p.grouping)for(x=0,u=q.groupField.length;x<u;x++)this.name===q.groupField[x]&&(g[x]=h[t],k[x]=t);d.p.multiSort||f||t!==d.p.sortname||(c=t,f=!0)});d.p.multiSort&&(c=r,e=E);if(d.p.treeGrid&&d.p._sort)a(d).jqGrid("SortTree",c,d.p.sortorder,h[c].stype||"text",h[c].srcfmt||"");else{var z={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},
ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,d){return"OR"===d?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,d){return"OR"===d?a.orNot().startsWith:a.andNot().startsWith},en:function(a,d){return"OR"===d?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,d){return"OR"===d?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,
d){return"OR"===d?a.orNot().isNull:a.andNot().isNull}},w=a.jgrid.from.call(d,d.p.data);d.p.ignoreCase&&(w=w.ignoreCase());if(!0===d.p.search){var A=d.p.postData.filters;if(A)"string"===typeof A&&(A=a.jgrid.parse(A)),b(A);else try{p=h[d.p.postData.searchField],"date"===p.stype&&p.srcfmt&&p.newfmt&&p.srcfmt!==p.newfmt&&(d.p.postData.searchString=a.jgrid.parseDate.call(d,p.newfmt,d.p.postData.searchString,p.srcfmt)),w=z[d.p.postData.searchOper](w)(d.p.postData.searchField,d.p.postData.searchString,h[d.p.postData.searchField])}catch(Va){}}else d.p.treeGrid&&
"nested"===d.p.treeGridModel&&w.orderBy(d.p.treeReader.left_field,"asc","integer","",null);d.p.treeGrid&&"adjacency"===d.p.treeGridModel&&(u=0,c=null);if(d.p.grouping)for(x=0;x<u;x++)w.orderBy(k[x],q.groupOrder[x],g[x].stype,g[x].srcfmt);d.p.multiSort?a.each(c,function(a){w.orderBy(this,e[a],h[this].stype,h[this].srcfmt,h[this].sfunc)}):c&&d.p.sortorder&&f&&("DESC"===d.p.sortorder.toUpperCase()?w.orderBy(d.p.sortname,"d",h[c].stype,h[c].srcfmt,h[c].sfunc):w.orderBy(d.p.sortname,"a",h[c].stype,h[c].srcfmt,
h[c].sfunc));p=w.select();var A=parseInt(d.p.rowNum,10),v=p.length,B=parseInt(d.p.page,10),y=Math.ceil(v/A),C={};if((d.p.search||d.p.resetsearch)&&d.p.grouping&&d.p.groupingView._locgr){d.p.groupingView.groups=[];var D,F=a.jgrid.getMethod("groupingPrepare"),K,W;if(d.p.footerrow&&d.p.userDataOnFooter){for(K in d.p.userData)d.p.userData.hasOwnProperty(K)&&(d.p.userData[K]=0);W=!0}for(D=0;D<v;D++){if(W)for(K in d.p.userData)d.p.userData.hasOwnProperty(K)&&(d.p.userData[K]+=parseFloat(p[D][K]||0));F.call(a(d),
p[D],D,A)}}p=d.p.treeGrid&&d.p.search?a(d).jqGrid("searchTree",p):p.slice((B-1)*A,B*A);h=w=null;C[d.p.localReader.total]=y;C[d.p.localReader.page]=B;C[d.p.localReader.records]=v;C[d.p.localReader.root]=p;C[d.p.localReader.userdata]=d.p.userData;p=null;return C}}},fa=function(){d.grid.hDiv.loading=!0;d.p.hiddengrid||a(d).jqGrid("progressBar",{method:"show",loadtype:d.p.loadui,htmlcontent:a.jgrid.getRegional(d,"defaults.loadtext",d.p.loadtext)})},la=function(){d.grid.hDiv.loading=!1;a(d).jqGrid("progressBar",
{method:"hide",loadtype:d.p.loadui})},W=function(b){if(!d.grid.hDiv.loading){var c=d.p.scroll&&!1===b,e={},f,h=d.p.prmNames;0>=d.p.page&&(d.p.page=Math.min(1,d.p.lastpage));null!==h.search&&(e[h.search]=d.p.search);null!==h.nd&&(e[h.nd]=(new Date).getTime());null!==h.rows&&(e[h.rows]=d.p.rowNum);null!==h.page&&(e[h.page]=d.p.page);null!==h.sort&&(e[h.sort]=d.p.sortname);null!==h.order&&(e[h.order]=d.p.sortorder);null!==d.p.rowTotal&&null!==h.totalrows&&(e[h.totalrows]=d.p.rowTotal);var g=a.isFunction(d.p.loadComplete),
k=g?d.p.loadComplete:null,l=0;b=b||1;1<b?null!==h.npage?(e[h.npage]=b,l=b-1,b=1):k=function(a){d.p.page++;d.grid.hDiv.loading=!1;g&&d.p.loadComplete.call(d,a);W(b-1)}:null!==h.npage&&delete d.p.postData[h.npage];if(d.p.grouping){a(d).jqGrid("groupingSetup");var n=d.p.groupingView,m,p="";for(m=0;m<n.groupField.length;m++){var u=n.groupField[m];a.each(d.p.colModel,function(a,d){d.name===u&&d.index&&(u=d.index)});p+=u+" "+n.groupOrder[m]+", "}e[h.sort]=p+e[h.sort]}a.extend(d.p.postData,e);var q=d.p.scroll?
d.rows.length-1:1,e=a(d).triggerHandler("jqGridBeforeRequest");if(!1!==e&&"stop"!==e)if(a.isFunction(d.p.datatype))d.p.datatype.call(d,d.p.postData,"load_"+d.p.id,q,b,l);else{if(a.isFunction(d.p.beforeRequest)&&(e=d.p.beforeRequest.call(d),void 0===e&&(e=!0),!1===e))return;f=d.p.datatype.toLowerCase();switch(f){case "json":case "jsonp":case "xml":case "script":a.ajax(a.extend({url:d.p.url,type:d.p.mtype,dataType:f,data:a.isFunction(d.p.serializeGridData)?d.p.serializeGridData.call(d,d.p.postData):
d.p.postData,success:function(e,h,g){if(a.isFunction(d.p.beforeProcessing)&&!1===d.p.beforeProcessing.call(d,e,h,g))la();else{"xml"===f?ba(e,q,1<b,l):pa(e,q,1<b,l);a(d).triggerHandler("jqGridLoadComplete",[e]);k&&k.call(d,e);a(d).triggerHandler("jqGridAfterLoadComplete",[e]);c&&d.grid.populateVisible();if(d.p.loadonce||d.p.treeGrid)d.p.datatype="local";1===b&&la()}},error:function(c,e,f){a.isFunction(d.p.loadError)&&d.p.loadError.call(d,c,e,f);1===b&&la()},beforeSend:function(b,c){var e=!0;a.isFunction(d.p.loadBeforeSend)&&
(e=d.p.loadBeforeSend.call(d,b,c));void 0===e&&(e=!0);if(!1===e)return!1;fa()}},a.jgrid.ajaxOptions,d.p.ajaxGridOptions));break;case "xmlstring":fa();e="string"!==typeof d.p.datastr?d.p.datastr:a.parseXML(d.p.datastr);ba(e);a(d).triggerHandler("jqGridLoadComplete",[e]);g&&d.p.loadComplete.call(d,e);a(d).triggerHandler("jqGridAfterLoadComplete",[e]);d.p.datatype="local";d.p.datastr=null;la();break;case "jsonstring":fa();e="string"===typeof d.p.datastr?a.jgrid.parse(d.p.datastr):d.p.datastr;pa(e);a(d).triggerHandler("jqGridLoadComplete",
[e]);g&&d.p.loadComplete.call(d,e);a(d).triggerHandler("jqGridAfterLoadComplete",[e]);d.p.datatype="local";d.p.datastr=null;la();break;case "local":case "clientside":fa(),d.p.datatype="local",d.p._ald=!0,e=xa(),pa(e,q,1<b,l),a(d).triggerHandler("jqGridLoadComplete",[e]),k&&k.call(d,e),a(d).triggerHandler("jqGridAfterLoadComplete",[e]),c&&d.grid.populateVisible(),la(),d.p._ald=!1}d.p._sort=!1}}},K=function(b){a("#cb_"+a.jgrid.jqID(d.p.id),d.grid.hDiv)[d.p.useProp?"prop":"attr"]("checked",b);if(d.p.frozenColumns&&
d.p.id+"_frozen")a("#cb_"+a.jgrid.jqID(d.p.id),d.grid.fhDiv)[d.p.useProp?"prop":"attr"]("checked",b)};l=function(b,c){var e="<td class='ui-pg-button "+u+"'><span class='ui-separator'></span></td>",f="",h="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",g="",k,l,m,x,w=function(b,c){var e;a.isFunction(d.p.onPaging)&&(e=d.p.onPaging.call(d,b,c));if("stop"===e)return!1;d.p.selrow=null;d.p.multiselect&&(d.p.selarrrow=[],K(!1));d.p.savedRow=[];return!0};b=b.substr(1);c+="_"+b;k=
"pg_"+b;l=b+"_left";m=b+"_center";x=b+"_right";a("#"+a.jgrid.jqID(b)).append("<div id='"+k+"' class='ui-pager-control' role='group'><table "+t(n,"pagerTable",!1,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+l+"' align='left'></td><td id='"+m+"' align='center' style='white-space:pre;'></td><td id='"+x+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(0<d.p.rowList.length){g='<td dir="'+q+'">';g+="<select "+t(n,"pgSelectBox",!1,"ui-pg-selbox")+' role="listbox" title="'+
(a.jgrid.getRegional(d,"defaults.pgrecs",d.p.pgrecs)||"")+'">';for(l=0;l<d.p.rowList.length;l++)m=d.p.rowList[l].toString().split(":"),1===m.length&&(m[1]=m[0]),g+='<option role="option" value="'+m[0]+'"'+(F(d.p.rowNum,0)===F(m[0],0)?' selected="selected"':"")+">"+m[1]+"</option>";g+="</select></td>"}"rtl"===q&&(h+=g);!0===d.p.pginput&&(f="<td id='input"+c+"' dir='"+q+"'>"+a.jgrid.template(a.jgrid.getRegional(d,"defaults.pgtext",d.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>",
"<span id='sp_1_"+a.jgrid.jqID(b)+"'></span>")+"</td>");!0===d.p.pgbuttons?(l=["first"+c,"prev"+c,"next"+c,"last"+c],m=t(n,"pgButtonBox",!0,"ui-pg-button"),x=[a.jgrid.getRegional(d,"defaults.pgfirst",d.p.pgfirst)||"",a.jgrid.getRegional(d,"defaults.pgprev",d.p.pgprev)||"",a.jgrid.getRegional(d,"defaults.pgnext",d.p.pgnext)||"",a.jgrid.getRegional(d,"defaults.pglast",d.p.pglast)||""],"rtl"===q&&(l.reverse(),x.reverse()),h+="<td id='"+l[0]+"' class='"+m+"' title='"+x[0]+"'><span "+t(n,"icon_first",
!1,p)+"></span></td>",h+="<td id='"+l[1]+"' class='"+m+"'  title='"+x[1]+"'><span "+t(n,"icon_prev",!1,p)+"></span></td>",h=h+(""!==f?e+f+e:"")+("<td id='"+l[2]+"' class='"+m+"' title='"+x[2]+"'><span "+t(n,"icon_next",!1,p)+"></span></td>"),h+="<td id='"+l[3]+"' class='"+m+"' title='"+x[3]+"'><span "+t(n,"icon_end",!1,p)+"></span></td>"):""!==f&&(h+=f);"ltr"===q&&(h+=g);h+="</tr></tbody></table>";!0===d.p.viewrecords&&a("td#"+b+"_"+d.p.recordpos,"#"+k).append("<div dir='"+q+"' style='text-align:"+
d.p.recordpos+"' class='ui-paging-info'></div>");a("td#"+b+"_"+d.p.pagerpos,"#"+k).append(h);e=a("#gbox_"+a.jgrid.jqID(d.p.id)).css("font-size")||"11px";a("#gbox_"+a.jgrid.jqID(d.p.id)).append("<div id='testpg' "+t(n,"entrieBox",!1,"ui-jqgrid")+" style='font-size:"+e+";visibility:hidden;' ></div>");h=a(h).clone().appendTo("#testpg").width();a("#testpg").remove();0<h&&(""!==f&&(h+=50),a("td#"+b+"_"+d.p.pagerpos,"#"+k).width(h));d.p._nvtd=[];d.p._nvtd[0]=h?Math.floor((d.p.width-h)/2):Math.floor(d.p.width/
3);d.p._nvtd[1]=0;h=null;a(".ui-pg-selbox","#"+k).on("change",function(){if(!w("records",this))return!1;d.p.page=Math.round(d.p.rowNum*(d.p.page-1)/this.value-.5)+1;d.p.rowNum=this.value;d.p.pager&&a(".ui-pg-selbox",d.p.pager).val(this.value);d.p.toppager&&a(".ui-pg-selbox",d.p.toppager).val(this.value);W();return!1});!0===d.p.pgbuttons&&(a(".ui-pg-button","#"+k).hover(function(){a(this).hasClass(u)?this.style.cursor="default":(a(this).addClass(z),this.style.cursor="pointer")},function(){a(this).hasClass(u)||
(a(this).removeClass(z),this.style.cursor="default")}),a("#first"+a.jgrid.jqID(c)+", #prev"+a.jgrid.jqID(c)+", #next"+a.jgrid.jqID(c)+", #last"+a.jgrid.jqID(c)).click(function(){if(a(this).hasClass(u))return!1;var b=F(d.p.page,1),e=F(d.p.lastpage,1),f=!1,h=!0,g=!0,k=!0,l=!0;0===e||1===e?l=k=g=h=!1:1<e&&1<=b?1===b?g=h=!1:b===e&&(l=k=!1):1<e&&0===b&&(l=k=!1,b=e-1);if(!w(this.id.split("_")[0],this))return!1;this.id==="first"+c&&h&&(d.p.page=1,f=!0);this.id==="prev"+c&&g&&(d.p.page=b-1,f=!0);this.id===
"next"+c&&k&&(d.p.page=b+1,f=!0);this.id==="last"+c&&l&&(d.p.page=e,f=!0);f&&W();return!1}));if(!0===d.p.pginput)a("#"+k).on("keypress","input.ui-pg-input",function(b){if(13===(b.charCode||b.keyCode||0)){if(!w("user",this))return!1;a(this).val(F(a(this).val(),1));d.p.page=0<a(this).val()?a(this).val():d.p.page;W();return!1}return this})};var wa=function(b,c,e){var f=d.p.colModel,h=d.p.frozenColumns?c:d.grid.headers[b].el;c="";var g;a("span.ui-grid-ico-sort",h).addClass(u);a(h).attr("aria-selected",
"false");g=f[b].index||f[b].name;if("undefined"==typeof e)if(f[b].lso)if("asc"===f[b].lso)f[b].lso+="-desc",c="desc";else if("desc"===f[b].lso)f[b].lso+="-asc",c="asc";else{if("asc-desc"===f[b].lso||"desc-asc"===f[b].lso)f[b].lso=""}else f[b].lso=c=f[b].firstsortorder||"asc";else f[b].lso=c=e;c?(a("span.s-ico",h).show(),a("span.ui-icon-"+c,h).removeClass(u),a(h).attr("aria-selected","true")):d.p.viewsortcols[0]||a("span.s-ico",h).hide();b=r.indexOf(g);-1===b?(r.push(g),E.push(c)):c?E[b]=c:(E.splice(b,
1),r.splice(b,1));d.p.sortorder="";d.p.sortname="";b=0;for(e=r.length;b<e;b++)0<b&&(d.p.sortname+=", "),d.p.sortname+=r[b],b!==e-1&&(d.p.sortname+=" "+E[b]);d.p.sortorder=E[e-1]},Z=function(b,c,e,f,h){if(d.p.colModel[c].sortable&&!(0<d.p.savedRow.length)){e||(d.p.lastsort===c&&""!==d.p.sortname?"asc"===d.p.sortorder?d.p.sortorder="desc":"desc"===d.p.sortorder&&(d.p.sortorder="asc"):d.p.sortorder=d.p.colModel[c].firstsortorder||"asc",d.p.page=1);if(d.p.multiSort)wa(c,h,f);else{if(f){if(d.p.lastsort===
c&&d.p.sortorder===f&&!e)return;d.p.sortorder=f}e=d.grid.headers[d.p.lastsort]?d.grid.headers[d.p.lastsort].el:null;h=d.p.frozenColumns?h:d.grid.headers[c].el;f="single"===d.p.viewsortcols[1]?!0:!1;var g;g=a(e).find("span.ui-grid-ico-sort");g.addClass(u);f&&a(g).css("display","none");a(e).attr("aria-selected","false");d.p.frozenColumns&&(g=d.grid.fhDiv.find("span.ui-grid-ico-sort"),g.addClass(u),f&&g.css("display","none"),d.grid.fhDiv.find("th").attr("aria-selected","false"));g=a(h).find("span.ui-icon-"+
d.p.sortorder);g.removeClass(u);f&&g.css("display","");a(h).attr("aria-selected","true");d.p.viewsortcols[0]||(d.p.lastsort!==c?(d.p.frozenColumns&&d.grid.fhDiv.find("span.s-ico").hide(),a("span.s-ico",e).hide(),a("span.s-ico",h).show()):""===d.p.sortname&&a("span.s-ico",h).show());b=b.substring(5+d.p.id.length+1);d.p.sortname=d.p.colModel[c].index||b}"stop"===a(d).triggerHandler("jqGridSortCol",[d.p.sortname,c,d.p.sortorder])?d.p.lastsort=c:a.isFunction(d.p.onSortCol)&&"stop"===d.p.onSortCol.call(d,
d.p.sortname,c,d.p.sortorder)?d.p.lastsort=c:("local"===d.p.datatype?d.p.deselectAfterSort&&a(d).jqGrid("resetSelection"):(d.p.selrow=null,d.p.multiselect&&K(!1),d.p.selarrrow=[],d.p.savedRow=[]),d.p.scroll&&(e=d.grid.bDiv.scrollLeft,P.call(d,!0,!1),d.grid.hDiv.scrollLeft=e),d.p.subGrid&&"local"===d.p.datatype&&a("td.sgexpanded","#"+a.jgrid.jqID(d.p.id)).each(function(){a(this).trigger("click")}),d.p._sort=!0,W(),d.p.lastsort=c,d.p.sortname!==b&&c&&(d.p.lastsort=c))}},sa=function(b){b=a(d.grid.headers[b].el);
b=[b.position().left+b.outerWidth()];"rtl"===d.p.direction&&(b[0]=d.p.width-b[0]);b[0]-=d.grid.bDiv.scrollLeft;b.push(a(d.grid.hDiv).position().top);b.push(a(d.grid.bDiv).offset().top-a(d.grid.hDiv).offset().top+a(d.grid.bDiv).height());return b},ma=function(b){var c,e=d.grid.headers,f=a.jgrid.getCellIndex(b);for(c=0;c<e.length;c++)if(b===e[c].el){f=c;break}return f},Ga=function(b,c,e){var f=d.p.colModel,h=f.length,g,k=[],l=a.jgrid.getRegional(d,"colmenu");c='<ul id="col_menu" class="ui-search-menu  ui-col-menu modal-content" role="menu" tabindex="0" style="left:'+
c+"px;top:"+b+'px;">';for(g=0;g<h;g++){var n=f[g].hidden?"":"checked",m=f[g].name,q=d.p.colNames[g];b="cb"===m||"subgrid"===m||"rn"===m||f[g].hidedlg?"style='display:none'":"";c+="<li "+b+' class="ui-menu-item" role="presentation" draggable="true"><a class="g-menu-item" tabindex="0" role="menuitem" ><table class="ui-common-table" ><tr><td class="menu_icon" title="'+l.reorder+'"><span class="'+p+" "+w.icon_move+' notclick"></span></td><td class="menu_icon"><input class="'+w.input_checkbox+'" type="checkbox" name="'+
m+'" '+n+'></td><td class="menu_text">'+q+"</td></tr></table></a></li>";k.push(g)}c+="</ul>";a(e).append(c);a("#col_menu").addClass("ui-menu "+w.menu_widget);if(a.fn.html5sortable())a("#col_menu").html5sortable({handle:"span",forcePlaceholderSize:!0}).on("sortupdate",function(b,c){k.splice(c.startindex,1);k.splice(c.endindex,0,c.startindex);a(d).jqGrid("destroyFrozenColumns");a(d).jqGrid("remapColumns",k,!0);a(d).jqGrid("setFrozenColumns");for(g=0;g<h;g++)k[g]=g});a("#col_menu > li > a").on("click",
function(b){a(b.target).hasClass("notclick")||(a(b.target).is(":input")?b=a(b.target).is(":checked"):(b=!a("input",this).is(":checked"),a("input",this).prop("checked",b)),b?(a(d).jqGrid("showCol",a("input",this).attr("name")),a(this).parent().attr("draggable","true")):(a(d).jqGrid("hideCol",a("input",this).attr("name")),a(this).parent().attr("draggable","false")))}).hover(function(){a(this).addClass(z)},function(){a(this).removeClass(z)})},Pa=function(b,c,e,f){var h=d.p.colModel[b],g,k="",l="",n=
"",m="";b="";var p,q="",u,x;x="eq ne lt le gt ge nu nn in ni".split(" ");var t="eq ne bw bn ew en cn nc nu nn in ni".split(" "),A=a.jgrid.getRegional(d,"search"),r=a.jgrid.styleUI[d.p.styleUI||"jQueryUI"].common;if(h){(g=d.p.colFilters&&d.p.colFilters[h.name]?d.p.colFilters[h.name]:!1)&&!a.isEmptyObject(g)&&(k=g.oper1,l=g.value1,n=g.rule,m=g.oper2,b=g.value2);h.searchoptions||(h.searchoptions={});p=h.searchoptions.sopt?h.searchoptions.sopt:"text"===h.sorttype?t:x;g=h.searchoptions.operands?h.searchoptions.operands:
A.groupOps;x=a("<form></form>");var v="<div>"+a.jgrid.getRegional(d,"colmenu.searchTitle")+"</div>",v=v+('<div><select id="oper1" class="'+w.filter_select+'">');a.each(A.odata,function(b,c){u=c.oper===k?'selected="selected"':"";-1!==a.inArray(c.oper,p)&&(q+='<option value="'+c.oper+'" '+u+">"+c.text+"</option>")});v+=q;v+="</select></div>";x.append(v);t="";h.searchoptions.defaultValue&&(t=a.isFunction(h.searchoptions.defaultValue)?h.searchoptions.defaultValue.call(d):h.searchoptions.defaultValue);
l&&(t=l);l=a.extend(h.searchoptions,{name:h.index||h.name,id:"sval1_"+d.p.idPrefix+h.name,oper:"search"});l=a.jgrid.createEl.call(d,h.stype,l,t,!1,a.extend({},a.jgrid.ajaxOptions,d.p.ajaxSelectOptions||{}));a(l).addClass(w.filter_input);v=a("<div></div>").append(l);x.append(v);v='<div><select id="operand" class="'+w.filter_select+'">';a.each(g,function(a,b){u=b.op===n?'selected="selected"':"";v+="<option value='"+b.op+"' "+u+">"+b.text+"</option>"});v+="</select></div>";x.append(v);q="";a.each(A.odata,
function(b,c){u=c.oper===m?'selected="selected"':"";-1!==a.inArray(c.oper,p)&&(q+='<option value="'+c.oper+'" '+u+">"+c.text+"</option>")});v='<div><select id="oper2" class="'+w.filter_select+'">'+q+"</select></div>";x.append(v);t=b?b:"";l=a.extend(h.searchoptions,{name:h.index||h.name,id:"sval2_"+d.p.idPrefix+h.name,oper:"search"});l=a.jgrid.createEl.call(d,h.stype,l,t,!1,a.extend({},a.jgrid.ajaxOptions,d.p.ajaxSelectOptions||{}));a(l).addClass(w.filter_input);v=a("<div></div>").append(l);x.append(v);
v="<div>";v+="<div class='search_buttons'><a tabindex='0' id='bs_reset' class='fm-button "+r.button+" ui-reset'>"+A.Reset+"</a></div>";v+="<div class='search_buttons'><a tabindex='0' id='bs_search' class='fm-button "+r.button+" ui-search'>"+A.Find+"</a></div>";v+="</div>";x.append(v);x=a('<li class="ui-menu-item" role="presentation"></li>').append(x);x=a('<ul id="search_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="left:'+e+"px;top:"+c+'px;"></ul>').append(x);a(f).append(x);
a("#search_menu").addClass("ui-menu "+w.menu_widget);a("#bs_reset, #bs_search","#search_menu").hover(function(){a(this).addClass(z)},function(){a(this).removeClass(z)});a(x).find("#bs_reset").click(function(b){d.p.colFilters[h.name]={};d.p.postData.filters=qa();d.p.search=!0;a(d).trigger("reloadGrid");a("#column_menu").remove();return!1});a(x).find("#bs_search").click(function(b){d.p.colFilters[h.name]={oper1:a("#oper1","#search_menu").val(),value1:a("#sval1_"+d.p.idPrefix+h.name,"#search_menu").val(),
rule:a("#operand","#search_menu").val(),oper2:a("#oper2","#search_menu").val(),value2:a("#sval2_"+d.p.idPrefix+h.name,"#search_menu").val()};d.p.postData.filters=qa();d.p.search=!0;a(d).trigger("reloadGrid");a("#column_menu").remove();return!1})}},qa=function(){var b='{"groupOp":"AND","rules":[], "groups" : [',c=0,e;for(e in d.p.colFilters)if(d.p.colFilters.hasOwnProperty(e)){var f=d.p.colFilters[e];a.isEmptyObject(f)||(0<c&&(b+=","),b+='{"groupOp": "'+f.rule+'", "rules" : [',b+='{"field":"'+e+'",',
b+='"op":"'+f.oper1+'",',f.value1+="",b+='"data":"'+f.value1.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',f.value2&&(b+=',{"field":"'+e+'",',b+='"op":"'+f.oper2+'",',f.value2+="",b+='"data":"'+f.value2.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}'),b+="]}",c++)}return b+"]}"},Qa=function(b,c,e){c=parseInt(c,10);e=parseInt(e,10)+25;e='<ul id="column_menu" class="ui-search-menu modal-content column-menu" role="menu" tabindex="0" style="font-size:'+(a(".ui-jqgrid-view").css("font-size")||"11px")+
";left:"+c+"px;top:"+e+'px;">';var f=d.p.colModel[b],h=a.extend({sorting:!0,columns:!0,filtering:!0,seraching:!0,grouping:!0,freeze:!0},f.coloptions),g=a.jgrid.getRegional(d,"colmenu"),k,l;h.sorting&&(e+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortasc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+p+" "+w.icon_sort_asc+'"></span></td><td class="menu_text">'+g.sortasc+"</td></tr></table></a></li>",e+='<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="sortdesc"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+
p+" "+w.icon_sort_desc+'"></span></td><td class="menu_text">'+g.sortdesc+"</td></tr></table></a></li>");h.columns&&(e=e+'<li class="ui-menu-item divider" role="separator"></li>'+('<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="columns"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+p+" "+w.icon_columns+'"></span></td><td class="menu_text">'+g.columns+"</td></tr></table></a></li>"));h.filtering&&(e=e+'<li class="ui-menu-item divider" role="separator"></li>'+
('<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="filtering"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+p+" "+w.icon_filter+'"></span></td><td class="menu_text">'+g.filter+" "+(f.label||f.name)+"</td></tr></table></a></li>"));h.grouping&&(k=a.inArray(f.name,d.p.groupingView.groupField),e=e+'<li class="ui-menu-item divider" role="separator"></li>'+('<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="grouping"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+
p+" "+w.icon_group+'"></span></td><td class="menu_text">'+(-1!==k?g.ungrouping:g.grouping+" "+(f.label||f.name))+"</td></tr></table></a></li>"));h.freeze&&(l=f.frozen&&d.p.frozenColumns?!1:!0,e=e+'<li class="ui-menu-item divider" role="separator"></li>'+('<li class="ui-menu-item" role="presentation"><a class="g-menu-item" tabindex="0" role="menuitem" value="freeze"><table class="ui-common-table"><tr><td class="menu_icon"><span class="'+p+" "+w.icon_freeze+'"></span></td><td class="menu_text">'+(l?
g.freeze+" "+(f.label||f.name):g.unfreeze)+"</td></tr></table></a></li>"));e+="</ul>";a("body").append(e);a("#column_menu").addClass("ui-menu "+w.menu_widget);"ltr"===d.p.direction&&(e=a("#column_menu").width()+26,a("#column_menu").css("left",c-e));a("#column_menu > li > a").hover(function(){a("#col_menu").remove();a("#search_menu").remove();var c,d;"columns"===a(this).attr("value")&&(c=a(this).parent().width()+18,d=a(this).parent().position().top-5,Ga(d,c,a(this).parent()));"filtering"===a(this).attr("value")&&
(c=a(this).parent().width()+18,d=a(this).parent().position().top-5,Pa(b,d,c,a(this).parent()));a(this).addClass(z)},function(){a(this).removeClass(z)}).click(function(){var c=a(this).attr("value"),e=d.grid.headers[b].el;if("sortasc"===c)Z("jqgh_"+d.p.id+"_"+f.name,b,!0,"asc",e);else if("sortdesc"===c)Z("jqgh_"+d.p.id+"_"+f.name,b,!0,"desc",e);else if("grouping"===c){var e=d.p.colModel[b],h=d.p.groupingView;-1!==k?h.groupField.splice(k,1):h.groupField.push(e.name);a(d).jqGrid("groupingGroupBy",h.groupField);
d.p.frozenColumns&&(a(d).jqGrid("destroyFrozenColumns"),a(d).jqGrid("setFrozenColumns"))}else if("freeze"===c){var e=l,h=[],g,n=d.p.colModel.length,m=-1,p=d.p.colModel;for(g=0;g<n;g++)p[g].frozen&&(m=g),h.push(g);h.splice(b,1);h.splice(m+(e?1:0),0,b);p[b].frozen=e;a(d).jqGrid("destroyFrozenColumns");a(d).jqGrid("remapColumns",h,!0);a(d).jqGrid("setFrozenColumns")}-1===c.indexOf("sort")&&"grouping"!==c&&"freeze"!==c||a(this).remove()})},R;if(d.p.colMenu)a("body").on("click",function(b){a(b.target).closest(".column-menu").length||
a("#column_menu").remove()});this.p.id=this.id;-1===a.inArray(d.p.multikey,["shiftKey","altKey","ctrlKey"])&&(d.p.multikey=!1);d.p.keyName=!1;for(k=0;k<d.p.colModel.length;k++)R="string"===typeof d.p.colModel[k].template?null!=a.jgrid.cmTemplate&&"object"===typeof a.jgrid.cmTemplate[d.p.colModel[k].template]?a.jgrid.cmTemplate[d.p.colModel[k].template]:{}:d.p.colModel[k].template,d.p.colModel[k]=a.extend(!0,{},d.p.cmTemplate,R||{},d.p.colModel[k]),!1===d.p.keyName&&!0===d.p.colModel[k].key&&(d.p.keyName=
d.p.colModel[k].name);d.p.sortorder=d.p.sortorder.toLowerCase();a.jgrid.cell_width=a.jgrid.cellWidth();!0===d.p.grouping&&(d.p.scroll=!1,d.p.rownumbers=!1,d.p.treeGrid=!1,d.p.gridview=!0);if(!0===this.p.treeGrid){try{a(this).jqGrid("setTreeGrid")}catch(X){}"local"!==d.p.datatype&&(d.p.localReader={id:"_id_"})}if(this.p.subGrid)try{a(d).jqGrid("setSubGrid")}catch(X){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",
width:a.jgrid.cell_width?d.p.multiselectWidth+d.p.cellLayout:d.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:d.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0}));d.p.xmlReader=a.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",
subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},d.p.xmlReader);d.p.jsonReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},d.p.jsonReader);d.p.localReader=a.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},d.p.localReader);d.p.scroll&&(d.p.pgbuttons=
!1,d.p.pginput=!1,d.p.rowList=[]);d.p.data.length&&(O(),Y());R="<thead><tr class='ui-jqgrid-labels' role='row'>";var ra,Ca,ya,ha="",T,S,ta,A=ta="",L;if(!0===d.p.shrinkToFit&&!0===d.p.forceFit)for(k=d.p.colModel.length-1;0<=k;k--)if(!d.p.colModel[k].hidden){d.p.colModel[k].resizable=!1;break}"horizontal"===d.p.viewsortcols[1]?(ta=" ui-i-asc",A=" ui-i-desc"):"single"===d.p.viewsortcols[1]&&(ta=" ui-single-sort-asc",A=" ui-single-sort-desc",ha=" style='display:none'",d.p.viewsortcols[0]=!1);ra=c?"class='ui-th-div-ie'":
"";ta="<span class='s-ico' style='display:none'>"+("<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+ta+" ui-sort-"+q+" "+u+" "+p+" "+t(n,"icon_asc",!0)+"'"+ha+"></span>");ta+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+A+" ui-sort-"+q+" "+u+" "+p+" "+t(n,"icon_desc",!0)+"'"+ha+"></span></span>";if(d.p.multiSort&&d.p.sortname)for(r=d.p.sortname.split(","),k=0;k<r.length;k++)A=a.trim(r[k]).split(" "),r[k]=a.trim(A[0]),E[k]=A[1]?a.trim(A[1]):d.p.sortorder||"asc";for(k=0;k<this.p.colNames.length;k++)A=
d.p.headertitles?' title="'+a.jgrid.stripHtml(d.p.colNames[k])+'"':"",L=d.p.colModel[k],L.hasOwnProperty("colmenu")||(L.colmenu="rn"===L.name||"cb"===L.name||"subgrid"===L.name?!1:!0),R+="<th id='"+d.p.id+"_"+L.name+"' role='columnheader' "+t(n,"headerBox",!1,"ui-th-column ui-th-"+q)+" "+A+">",A=L.index||L.name,R+="<div class='ui-th-div' id='jqgh_"+d.p.id+"_"+L.name+"' "+ra+">"+d.p.colNames[k],L.width=L.width?parseInt(L.width,10):150,"boolean"!==typeof L.title&&(L.title=!0),L.lso="",A===d.p.sortname&&
(d.p.lastsort=k),d.p.multiSort&&(A=a.inArray(A,r),-1!==A&&(L.lso=E[A])),R+=ta,d.p.colMenu&&L.colmenu&&(R+="<a class='colmenu' href='#/'><span class='colmenuspan "+p+" "+w.icon_menu+"'></span></a>"),R+="</div></th>";R+="</tr></thead>";L=ta=null;a(this).append(R);a("thead tr:first th",this).hover(function(){a(this).addClass(z)},function(){a(this).removeClass(z)});if(this.p.multiselect){var U=[],V;a("#cb_"+a.jgrid.jqID(d.p.id),this).on("click",function(){d.p.selarrrow=[];var b=!0===d.p.frozenColumns?
d.p.id+"_frozen":"";this.checked?(a(d.rows).each(function(c){0<c&&!(a(this).hasClass("ui-subgrid")||a(this).hasClass("jqgroup")||a(this).hasClass(u)||a(this).hasClass("jqfoot"))&&(a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(this.id))[d.p.useProp?"prop":"attr"]("checked",!0),a(this).addClass(x).attr("aria-selected","true"),d.p.selarrrow.push(this.id),d.p.selrow=this.id,b&&(a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(this.id),d.grid.fbDiv)[d.p.useProp?"prop":"attr"]("checked",!0),a("#"+a.jgrid.jqID(this.id),
d.grid.fbDiv).addClass(x)))}),V=!0,U=[]):(a(d.rows).each(function(c){0<c&&!(a(this).hasClass("ui-subgrid")||a(this).hasClass("jqgroup")||a(this).hasClass(u)||a(this).hasClass("jqfoot"))&&(a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(this.id))[d.p.useProp?"prop":"attr"]("checked",!1),a(this).removeClass(x).attr("aria-selected","false"),U.push(this.id),b&&(a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(this.id),d.grid.fbDiv)[d.p.useProp?"prop":"attr"]("checked",!1),a("#"+a.jgrid.jqID(this.id),d.grid.fbDiv).removeClass(x)))}),
d.p.selrow=null,V=!1);a(d).triggerHandler("jqGridSelectAll",[V?d.p.selarrrow:U,V]);a.isFunction(d.p.onSelectAll)&&d.p.onSelectAll.call(d,V?d.p.selarrrow:U,V)})}!0===d.p.autowidth&&(R=a(v).innerWidth(),d.p.width=0<R?R:"nw");(function(){var b=0,c=a.jgrid.cell_width?0:F(d.p.cellLayout,0),e=0,f,g=F(d.p.scrollOffset,0),k,l=!1,n,m=0,p;a.each(d.p.colModel,function(){void 0===this.hidden&&(this.hidden=!1);if(d.p.grouping&&d.p.autowidth){var f=a.inArray(this.name,d.p.groupingView.groupField);0<=f&&d.p.groupingView.groupColumnShow.length>
f&&(this.hidden=!d.p.groupingView.groupColumnShow[f])}this.widthOrg=k=F(this.width,0);!1===this.hidden&&(b+=k+c,this.fixed?m+=k+c:e++)});isNaN(d.p.width)&&(d.p.width=b+(!1!==d.p.shrinkToFit||isNaN(d.p.height)?0:g));h.width=parseInt(d.p.width,10);d.p.tblwidth=b;!1===d.p.shrinkToFit&&!0===d.p.forceFit&&(d.p.forceFit=!1);!0===d.p.shrinkToFit&&0<e&&(n=h.width-c*e-m,isNaN(d.p.height)||(n-=g,l=!0),b=0,a.each(d.p.colModel,function(a){!1!==this.hidden||this.fixed||(this.width=k=Math.round(n*this.width/(d.p.tblwidth-
c*e-m)),b+=k,f=a)}),p=0,l?h.width-m-(b+c*e)!==g&&(p=h.width-m-(b+c*e)-g):l||1===Math.abs(h.width-m-(b+c*e))||(p=h.width-m-(b+c*e)),d.p.colModel[f].width+=p,d.p.tblwidth=b+p+c*e+m,d.p.tblwidth>d.p.width&&(d.p.colModel[f].width-=d.p.tblwidth-parseInt(d.p.width,10),d.p.tblwidth=d.p.width))})();a(v).css("width",h.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+d.p.id+"'>&#160;</div>");d.p.scrollPopUp&&a(v).append("<div "+t(n,"scrollBox",!1,"loading ui-scroll-popup")+" id='scroll_g"+d.p.id+
"'></div>");a(B).css("width",h.width+"px");R=a("thead:first",d).get(0);var ca="";d.p.footerrow&&(ca+="<table role='presentation' style='width:"+d.p.tblwidth+"px' "+t(n,"footerTable",!1,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+t(n,"footerBox",!1,"footrow footrow-"+q)+">");var k=a("tr:first",R),da="<tr class='jqgfirstrow' role='row'>";d.p.disableClick=!1;a("th",k).each(function(b){L=d.p.colModel[b];Ca=L.width;void 0===L.resizable&&(L.resizable=!0);L.resizable?(ya=document.createElement("span"),
a(ya).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+q).css("cursor","col-resize"),a(this).addClass(d.p.resizeclass)):ya="";a(this).css("width",Ca+"px").prepend(ya);ya=null;var c="";L.hidden&&(a(this).css("display","none"),c="display:none;");da+="<td role='gridcell' style='height:0px;width:"+Ca+"px;"+c+"'></td>";h.headers[b]={width:Ca,el:this};ha=L.sortable;"boolean"!==typeof ha&&(ha=L.sortable=!0);c=L.name;"cb"!==c&&"subgrid"!==c&&"rn"!==c&&d.p.viewsortcols[2]&&a(">div",this).addClass("ui-jqgrid-sortable");
ha&&(d.p.multiSort?d.p.viewsortcols[0]?(a("div span.s-ico",this).show(),d.p.colModel[b].lso&&a("div span.ui-icon-"+L.lso,this).removeClass(u).css("display","")):d.p.colModel[b].lso&&(a("div span.s-ico",this).show(),a("div span.ui-icon-"+L.lso,this).removeClass(u).css("display","")):d.p.viewsortcols[0]?(a("div span.s-ico",this).show(),b===d.p.lastsort&&a("div span.ui-icon-"+d.p.sortorder,this).removeClass(u).css("display","")):b===d.p.lastsort&&""!==d.p.sortname&&(a("div span.s-ico",this).show(),a("div span.ui-icon-"+
d.p.sortorder,this).removeClass(u).css("display","")));d.p.footerrow&&(ca+="<td role='gridcell' "+H(b,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(b){if(1===a(b.target).closest("th>span.ui-jqgrid-resize").length){var c=ma(this);if(!0===d.p.forceFit){var e=d.p,f=c,g;for(g=c+1;g<d.p.colModel.length;g++)if(!0!==d.p.colModel[g].hidden){f=g;break}e.nv=f-c}h.dragStart(c,b,sa(c));return!1}}).click(function(b){if(d.p.disableClick)return d.p.disableClick=!1;var c="th>div.ui-jqgrid-sortable",e,f;d.p.viewsortcols[2]||
(c="th>div>span>span.ui-grid-ico-sort");c=a(b.target).closest(c);if(1===c.length){var h;if(d.p.frozenColumns){var g=a(this)[0].id.substring(d.p.id.length+1);a(d.p.colModel).each(function(a){if(this.name===g)return h=a,!1})}else h=ma(this);if(a(b.target).hasClass("colmenuspan")){if(null!=a("#column_menu")[0]&&a("#column_menu").remove(),e=a.jgrid.getCellIndex(b.target),-1!==e){var k=a(this).offset();f=k.left;k=k.top;"ltr"===d.p.direction&&(f+=a(this).outerWidth());Qa(e,f,k,c);b.stopPropagation()}}else return d.p.viewsortcols[2]||
(e=!0,f=c.attr("sort")),null!=h&&Z(a("div",this)[0].id,h,e,f,this),!1}});L=null;if(d.p.sortable&&a.fn.sortable)try{a(d).jqGrid("sortableColumns",k)}catch(X){}d.p.footerrow&&(ca+="</tr></tbody></table>");da+="</tr>";k=document.createElement("tbody");this.appendChild(k);a(this).addClass(t(n,"rowTable",!0,"ui-jqgrid-btable ui-common-table")).append(da);da=null;B=a("<table "+t(n,"headerTable",!1,"ui-jqgrid-htable ui-common-table")+" style='width:"+d.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+
this.id+"'></table>").append(R);var ia=d.p.caption&&!0===d.p.hiddengrid?!0:!1;ra=a("<div class='ui-jqgrid-hbox"+("rtl"===q?"-rtl":"")+"'></div>");k="Bootstrap"!==d.p.styleUI||isNaN(d.p.height)?0:2;R=null;h.hDiv=document.createElement("div");h.hDiv.style.width=h.width-k+"px";h.hDiv.className=t(n,"headerDiv",!0,"ui-jqgrid-hdiv");a(h.hDiv).append(ra);a(ra).append(B);B=null;ia&&a(h.hDiv).hide();d.p.pager&&("string"===typeof d.p.pager?"#"!==d.p.pager.substr(0,1)&&(d.p.pager="#"+d.p.pager):d.p.pager="#"+
a(d.p.pager).attr("id"),a(d.p.pager).css({width:h.width+"px"}).addClass(t(n,"pagerBox",!0,"ui-jqgrid-pager")).appendTo(v),ia&&a(d.p.pager).hide(),l(d.p.pager,""));if(!1===d.p.cellEdit&&!0===d.p.hoverrows)a(d).on({mouseover:function(b){S=a(b.target).closest("tr.jqgrow");"ui-subgrid"!==a(S).attr("class")&&a(S).addClass(z)},mouseout:function(b){S=a(b.target).closest("tr.jqgrow");a(S).removeClass(z)}});var ea,na,ga;a(d).before(h.hDiv).on({click:function(b){T=b.target;S=a(T,d.rows).closest("tr.jqgrow");
if(0===a(S).length||-1<S[0].className.indexOf(u)||(a(T,d).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==d.id)return this;var c=a(T).filter(":enabled").hasClass("cbox"),e=a(d).triggerHandler("jqGridBeforeSelectRow",[S[0].id,b]),e=!1===e||"stop"===e?!1:!0;if(a.isFunction(d.p.beforeSelectRow)){var f=d.p.beforeSelectRow.call(d,S[0].id,b);if(!1===f||"stop"===f)e=!1}if("A"!==T.tagName&&("INPUT"!==T.tagName&&"TEXTAREA"!==T.tagName&&"OPTION"!==T.tagName&&"SELECT"!==T.tagName||
c))if(ea=S[0].id,T=a(T).closest("tr.jqgrow>td"),0<T.length&&(na=a.jgrid.getCellIndex(T),ga=a(T).closest("td,th").html(),a(d).triggerHandler("jqGridCellSelect",[ea,na,ga,b]),a.isFunction(d.p.onCellSelect)&&d.p.onCellSelect.call(d,ea,na,ga,b)),!0===d.p.cellEdit)if(d.p.multiselect&&c&&e)a(d).jqGrid("setSelection",ea,!0,b);else{if(0<T.length)try{a(d).jqGrid("editCell",S[0].rowIndex,na,!0)}catch(Ta){}}else if(e)if(d.p.multikey)b[d.p.multikey]?a(d).jqGrid("setSelection",ea,!0,b):d.p.multiselect&&c&&(c=
a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+ea).is(":checked"),a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+ea)[d.p.useProp?"prop":"attr"]("checked",!c));else{if(d.p.multiselect&&d.p.multiboxonly&&!c){var h=d.p.frozenColumns?d.p.id+"_frozen":"";a(d.p.selarrrow).each(function(b,c){(b=a(d).jqGrid("getGridRowById",c))&&a(b).removeClass(x);a("#jqg_"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(c))[d.p.useProp?"prop":"attr"]("checked",!1);h&&(a("#"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(h)).removeClass(x),a("#jqg_"+a.jgrid.jqID(d.p.id)+
"_"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(h))[d.p.useProp?"prop":"attr"]("checked",!1))});d.p.selarrrow=[]}a(d).jqGrid("setSelection",ea,!0,b)}},reloadGrid:function(b,c){!0===d.p.treeGrid&&(d.p.datatype=d.p.treedatatype);c=c||{};c.current&&d.grid.selectionPreserver(d);"local"===d.p.datatype?(a(d).jqGrid("resetSelection"),d.p.data.length&&(O(),Y())):d.p.treeGrid||(d.p.selrow=null,d.p.multiselect&&(d.p.selarrrow=[],K(!1)),d.p.savedRow=[]);d.p.scroll&&P.call(d,!0,!1);c.page&&(b=c.page,b>d.p.lastpage&&(b=
d.p.lastpage),1>b&&(b=1),d.p.page=b,d.grid.bDiv.scrollTop=d.grid.prevRowHeight?(b-1)*d.grid.prevRowHeight*d.p.rowNum:0);d.grid.prevRowHeight&&d.p.scroll&&void 0===c.page?(delete d.p.lastpage,d.grid.populateVisible()):d.grid.populate();!0===d.p.inlineNav&&a(d).jqGrid("showAddEditButtons");return!1},dblclick:function(b){T=b.target;S=a(T,d.rows).closest("tr.jqgrow");if(0!==a(S).length){ea=S[0].rowIndex;na=a.jgrid.getCellIndex(T);var c=a(d).triggerHandler("jqGridDblClickRow",[a(S).attr("id"),ea,na,b]);
if(null!=c||a.isFunction(d.p.ondblClickRow)&&(c=d.p.ondblClickRow.call(d,a(S).attr("id"),ea,na,b),null!=c))return c}},contextmenu:function(b){T=b.target;S=a(T,d.rows).closest("tr.jqgrow");if(0!==a(S).length){d.p.multiselect||a(d).jqGrid("setSelection",S[0].id,!0,b);ea=S[0].rowIndex;na=a.jgrid.getCellIndex(T);var c=a(d).triggerHandler("jqGridRightClickRow",[a(S).attr("id"),ea,na,b]);if(null!=c||a.isFunction(d.p.onRightClickRow)&&(c=d.p.onRightClickRow.call(d,a(S).attr("id"),ea,na,b),null!=c))return c}}});
h.bDiv=document.createElement("div");c&&"auto"===String(d.p.height).toLowerCase()&&(d.p.height="100%");a(h.bDiv).append(a('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:d.p.height+(isNaN(d.p.height)?"":"px"),width:h.width-k+"px"}).scroll(h.scrollGrid);a("table:first",h.bDiv).css({width:d.p.tblwidth+"px"});a.support.tbody||2===a("tbody",this).length&&a("tbody:gt(0)",this).remove();if(d.p.multikey)if(a.jgrid.msie())a(h.bDiv).on("selectstart",
function(){return!1});else a(h.bDiv).on("mousedown",function(){return!1});ia&&a(h.bDiv).hide();var ja=p+" "+t(n,"icon_caption_open",!0),oa=p+" "+t(n,"icon_caption_close",!0);h.cDiv=document.createElement("div");var ka=!0===d.p.hidegrid?a("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+m+"' title='"+(a.jgrid.getRegional(d,"defaults.showhide",d.p.showhide)||"")+"' />").hover(function(){ka.addClass(z)},function(){ka.removeClass(z)}).append("<span class='ui-jqgrid-headlink "+ja+"'></span>").css("rtl"===
q?"left":"right","0px"):"";a(h.cDiv).append(ka).append("<span class='ui-jqgrid-title'>"+d.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===q?"-rtl":"")+" "+t(n,"gridtitleBox",!0));a(h.cDiv).insertBefore(h.hDiv);d.p.toolbar[0]&&(m=t(n,"customtoolbarBox",!0,"ui-userdata"),h.uDiv=document.createElement("div"),"top"===d.p.toolbar[1]?a(h.uDiv).insertBefore(h.hDiv):"bottom"===d.p.toolbar[1]&&a(h.uDiv).insertAfter(h.hDiv),"both"===d.p.toolbar[1]?(h.ubDiv=document.createElement("div"),
a(h.uDiv).addClass(m+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(h.hDiv).width(h.width-k),a(h.ubDiv).addClass(m+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(h.hDiv).width(h.width-k),ia&&a(h.ubDiv).hide()):a(h.uDiv).width(h.width-k).addClass(m+" ui-userdata-top").attr("id","t_"+this.id),ia&&a(h.uDiv).hide());d.p.toppager&&(d.p.toppager=a.jgrid.jqID(d.p.id)+"_toppager",h.topDiv=a("<div id='"+d.p.toppager+"'></div>")[0],d.p.toppager="#"+d.p.toppager,a(h.topDiv).addClass(t(n,
"toppagerBox",!0,"ui-jqgrid-toppager")).width(h.width-k).insertBefore(h.hDiv),l(d.p.toppager,"_t"));d.p.footerrow&&(h.sDiv=a("<div class='ui-jqgrid-sdiv'></div>")[0],ra=a("<div class='ui-jqgrid-hbox"+("rtl"===q?"-rtl":"")+"'></div>"),a(h.sDiv).append(ra).width(h.width-k).insertAfter(h.hDiv),a(ra).append(ca),h.footers=a(".ui-jqgrid-ftable",h.sDiv)[0].rows[0].cells,d.p.rownumbers&&(h.footers[0].className=t(n,"rownumBox",!0,"jqgrid-rownum")),ia&&a(h.sDiv).hide());ra=null;if(d.p.caption){var ua=d.p.datatype;
!0===d.p.hidegrid&&(a(".ui-jqgrid-titlebar-close",h.cDiv).click(function(b){var c=a.isFunction(d.p.onHeaderClick),e=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",f,g=this;!0===d.p.toolbar[0]&&("both"===d.p.toolbar[1]&&(e+=", #"+a(h.ubDiv).attr("id")),e+=", #"+a(h.uDiv).attr("id"));f=a(e,"#gview_"+a.jgrid.jqID(d.p.id)).length;"visible"===d.p.gridstate?a(e,"#gbox_"+a.jgrid.jqID(d.p.id)).slideUp("fast",function(){f--;0===f&&(a("span",g).removeClass(ja).addClass(oa),
d.p.gridstate="hidden",a("#gbox_"+a.jgrid.jqID(d.p.id)).hasClass("ui-resizable")&&a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(d.p.id)).hide(),a(d).triggerHandler("jqGridHeaderClick",[d.p.gridstate,b]),c&&(ia||d.p.onHeaderClick.call(d,d.p.gridstate,b)))}):"hidden"===d.p.gridstate&&a(e,"#gbox_"+a.jgrid.jqID(d.p.id)).slideDown("fast",function(){f--;0===f&&(a("span",g).removeClass(oa).addClass(ja),ia&&(d.p.datatype=ua,W(),ia=!1),d.p.gridstate="visible",a("#gbox_"+a.jgrid.jqID(d.p.id)).hasClass("ui-resizable")&&
a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(d.p.id)).show(),a(d).triggerHandler("jqGridHeaderClick",[d.p.gridstate,b]),c&&(ia||d.p.onHeaderClick.call(d,d.p.gridstate,b)))});return!1}),ia&&(d.p.datatype="local",a(".ui-jqgrid-titlebar-close",h.cDiv).trigger("click")))}else a(h.cDiv).hide(),d.p.toppager||a(h.hDiv).addClass(t(d.p.styleUI+".common","cornertop",!0));a(h.hDiv).after(h.bDiv).mousemove(function(a){if(h.resizing)return h.dragMove(a),!1});a(".ui-jqgrid-labels",h.hDiv).on("selectstart",function(){return!1});
a(document).on("mouseup.jqGrid"+d.p.id,function(){return h.resizing?(h.dragEnd(!0),!1):!0});if("rtl"===d.p.direction)a(d).on("jqGridAfterGridComplete.setRTLPadding",function(){var b=h.bDiv.offsetWidth-h.bDiv.clientWidth;d.p.scrollOffset=b;a("div:first",h.hDiv).css({paddingLeft:b+"px"});h.hDiv.scrollLeft=h.bDiv.scrollLeft});d.formatCol=H;d.sortData=Z;d.updatepager=function(b,c){var e,f,h,g,k,l,m,p="",q=(g=d.p.pager?a.jgrid.jqID(d.p.pager.substr(1)):"")?"_"+g:"",x=d.p.toppager?"_"+d.p.toppager.substr(1):
"";h=parseInt(d.p.page,10)-1;0>h&&(h=0);h*=parseInt(d.p.rowNum,10);k=h+d.p.reccount;if(d.p.scroll){e=a("tbody:first > tr:gt(0)",d.grid.bDiv);k>d.p.records&&(k=d.p.records);h=k-e.length;d.p.reccount=e.length;if(e=e.outerHeight()||d.grid.prevRowHeight)f=h*e,p=parseInt(d.p.records,10)*e,a(">div:first",d.grid.bDiv).css({height:p}).children("div:first").css({height:f,display:f?"":"none"}),0===d.grid.bDiv.scrollTop&&1<d.p.page&&(d.grid.bDiv.scrollTop=d.p.rowNum*(d.p.page-1)*e);d.grid.bDiv.scrollLeft=d.grid.hDiv.scrollLeft}p=
d.p.pager||"";if(p+=d.p.toppager?p?","+d.p.toppager:d.p.toppager:"")m=a.jgrid.getRegional(d,"formatter.integer"),e=F(d.p.page),f=F(d.p.lastpage),a(".selbox",p)[this.p.useProp?"prop":"attr"]("disabled",!1),!0===d.p.pginput&&(a("#input"+q).html(a.jgrid.template(a.jgrid.getRegional(d,"defaults.pgtext",d.p.pgtext)||"","<input "+t(n,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+a.jgrid.jqID(g)+"'></span>")),d.p.toppager&&a("#input_t"+x).html(a.jgrid.template(a.jgrid.getRegional(d,
"defaults.pgtext",d.p.pgtext)||"","<input "+t(n,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+a.jgrid.jqID(g)+"_toppager'></span>")),a(".ui-pg-input",p).val(d.p.page),g=d.p.toppager?"#sp_1"+q+",#sp_1"+q+"_toppager":"#sp_1"+q,a(g).html(a.fmatter?a.fmatter.util.NumberFormat(d.p.lastpage,m):d.p.lastpage)),d.p.viewrecords&&(0===d.p.reccount?a(".ui-paging-info",p).html(a.jgrid.getRegional(d,"defaults.emptyrecords",d.p.emptyrecords)):(g=h+
1,l=d.p.records,a.fmatter&&(g=a.fmatter.util.NumberFormat(g,m),k=a.fmatter.util.NumberFormat(k,m),l=a.fmatter.util.NumberFormat(l,m)),m=a.jgrid.getRegional(d,"defaults.recordtext",d.p.recordtext),a(".ui-paging-info",p).html(a.jgrid.template(m,g,k,l)))),!0===d.p.pgbuttons&&(0>=e&&(e=f=0),1===e||0===e?(a("#first"+q+", #prev"+q).addClass(u).removeClass(z),d.p.toppager&&a("#first_t"+x+", #prev_t"+x).addClass(u).removeClass(z)):(a("#first"+q+", #prev"+q).removeClass(u),d.p.toppager&&a("#first_t"+x+", #prev_t"+
x).removeClass(u)),e===f||0===e?(a("#next"+q+", #last"+q).addClass(u).removeClass(z),d.p.toppager&&a("#next_t"+x+", #last_t"+x).addClass(u).removeClass(z)):(a("#next"+q+", #last"+q).removeClass(u),d.p.toppager&&a("#next_t"+x+", #last_t"+x).removeClass(u)));!0===b&&!0===d.p.rownumbers&&a(">td.jqgrid-rownum",d.rows).each(function(b){a(this).html(h+1+b)});c&&d.p.jqgdnd&&a(d).jqGrid("gridDnD","updateDnD");a(d).triggerHandler("jqGridGridComplete");a.isFunction(d.p.gridComplete)&&d.p.gridComplete.call(d);
a(d).triggerHandler("jqGridAfterGridComplete")};d.refreshIndex=Y;d.setHeadCheckBox=K;d.constructTr=va;d.formatter=function(a,b,c,d,e){return y(a,b,c,d,e)};a.extend(h,{populate:W,emptyRows:P,beginReq:fa,endReq:la});this.grid=h;d.addXmlData=function(a){ba(a)};d.addJSONData=function(a){pa(a)};this.grid.cols=this.rows[0].cells;a(d).triggerHandler("jqGridInitGrid");a.isFunction(d.p.onInitGrid)&&d.p.onInitGrid.call(d);W();d.p.hiddengrid=!1;d.p.responsive&&(l="onorientationchange"in window?"orientationchange":
"resize",a(window).on(l,function(){a(d).jqGrid("resizeGrid")}))}}}})};a.jgrid.extend({getGridParam:function(b,e){var c=this[0],f;if(c&&c.grid){void 0===e&&"string"!==typeof e&&(e="jqGrid");f=c.p;if("jqGrid"!==e)try{f=a(c).data(e)}catch(g){f=c.p}return b?void 0!==f[b]?f[b]:null:f}},setGridParam:function(b,e){return this.each(function(){null==e&&(e=!1);this.grid&&"object"===typeof b&&(!0===e?this.p=a.extend({},this.p,b):a.extend(!0,this.p,b))})},getGridRowById:function(b){var e;this.each(function(){try{for(var c=
this.rows.length;c--;)if(b.toString()===this.rows[c].id){e=this.rows[c];break}}catch(f){e=a(this.grid.bDiv).find("#"+a.jgrid.jqID(b))}});return e},getDataIDs:function(){var b=[],e=0,c,f=0;this.each(function(){if((c=this.rows.length)&&0<c)for(;e<c;)a(this.rows[e]).hasClass("jqgrow")&&(b[f]=this.rows[e].id,f++),e++});return b},setSelection:function(b,e,c){return this.each(function(){var f,g,d,h,k,l;g=a.jgrid.getMethod("getStyleUI");var m=g(this.p.styleUI+".common","highlight",!0);f=g(this.p.styleUI+
".common","disabled",!0);void 0!==b&&(e=!1===e?!1:!0,!(g=a(this).jqGrid("getGridRowById",b))||!g.className||-1<g.className.indexOf(f)||(!0===this.p.scrollrows&&(d=a(this).jqGrid("getGridRowById",b).rowIndex,0<=d&&(f=a(this.grid.bDiv)[0].clientHeight,h=a(this.grid.bDiv)[0].scrollTop,k=a(this.rows[d]).position().top,d=this.rows[d].clientHeight,k+d>=f+h?a(this.grid.bDiv)[0].scrollTop=k-(f+h)+d+h:k<f+h&&k<h&&(a(this.grid.bDiv)[0].scrollTop=k))),!0===this.p.frozenColumns&&(l=this.p.id+"_frozen"),this.p.multiselect?
(this.setHeadCheckBox(!1),this.p.selrow=g.id,h=a.inArray(this.p.selrow,this.p.selarrrow),-1===h?("ui-subgrid"!==g.className&&a(g).addClass(m).attr("aria-selected","true"),f=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==g.className&&a(g).removeClass(m).attr("aria-selected","false"),f=!1,this.p.selarrrow.splice(h,1),k=this.p.selarrrow[0],this.p.selrow=void 0===k?null:k),a("#jqg_"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(g.id))[this.p.useProp?"prop":"attr"]("checked",f),l&&(-1===h?a("#"+a.jgrid.jqID(b),
"#"+a.jgrid.jqID(l)).addClass(m):a("#"+a.jgrid.jqID(b),"#"+a.jgrid.jqID(l)).removeClass(m),a("#jqg_"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(b),"#"+a.jgrid.jqID(l))[this.p.useProp?"prop":"attr"]("checked",f)),e&&(a(this).triggerHandler("jqGridSelectRow",[g.id,f,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,g.id,f,c))):"ui-subgrid"!==g.className&&(this.p.selrow!==g.id?((f=a(this).jqGrid("getGridRowById",this.p.selrow))&&a(f).removeClass(m).attr({"aria-selected":"false",tabindex:"-1"}),a(g).addClass(m).attr({"aria-selected":"true",
tabindex:"0"}),l&&(a("#"+a.jgrid.jqID(this.p.selrow),"#"+a.jgrid.jqID(l)).removeClass(m),a("#"+a.jgrid.jqID(b),"#"+a.jgrid.jqID(l)).addClass(m)),f=!0):f=!1,this.p.selrow=g.id,e&&(a(this).triggerHandler("jqGridSelectRow",[g.id,f,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,g.id,f,c)))))})},resetSelection:function(b){return this.each(function(){var e=this,c,f;c=a.jgrid.getMethod("getStyleUI");var g=c(e.p.styleUI+".common","highlight",!0),d=c(e.p.styleUI+".common","hover",!0);!0===e.p.frozenColumns&&
(f=e.p.id+"_frozen");if(void 0!==b){c=b===e.p.selrow?e.p.selrow:b;a("#"+a.jgrid.jqID(e.p.id)+" tbody:first tr#"+a.jgrid.jqID(c)).removeClass(g).attr("aria-selected","false");f&&a("#"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(f)).removeClass(g);if(e.p.multiselect){a("#jqg_"+a.jgrid.jqID(e.p.id)+"_"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(e.p.id))[e.p.useProp?"prop":"attr"]("checked",!1);if(f)a("#jqg_"+a.jgrid.jqID(e.p.id)+"_"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(f))[e.p.useProp?"prop":"attr"]("checked",!1);e.setHeadCheckBox(!1);
var h=a.inArray(a.jgrid.jqID(c),e.p.selarrrow);-1!==h&&e.p.selarrrow.splice(h,1)}e.p.onUnSelectRow&&e.p.onUnSelectRow.call(e,c);c=null}else e.p.multiselect?(a(e.p.selarrrow).each(function(b,c){a(a(e).jqGrid("getGridRowById",c)).removeClass(g).attr("aria-selected","false");a("#jqg_"+a.jgrid.jqID(e.p.id)+"_"+a.jgrid.jqID(c))[e.p.useProp?"prop":"attr"]("checked",!1);f&&(a("#"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(f)).removeClass(g),a("#jqg_"+a.jgrid.jqID(e.p.id)+"_"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(f))[e.p.useProp?
"prop":"attr"]("checked",!1));e.p.onUnSelectRow&&e.p.onUnSelectRow.call(e,c)}),e.setHeadCheckBox(!1),e.p.selarrrow=[],e.p.selrow=null):e.p.selrow&&(a("#"+a.jgrid.jqID(e.p.id)+" tbody:first tr#"+a.jgrid.jqID(e.p.selrow)).removeClass(g).attr("aria-selected","false"),f&&a("#"+a.jgrid.jqID(e.p.selrow),"#"+a.jgrid.jqID(f)).removeClass(g),e.p.onUnSelectRow&&e.p.onUnSelectRow.call(e,e.p.selrow),e.p.selrow=null);!0===e.p.cellEdit&&0<=parseInt(e.p.iCol,10)&&0<=parseInt(e.p.iRow,10)&&(a("td:eq("+e.p.iCol+")",
e.rows[e.p.iRow]).removeClass("edit-cell "+g),a(e.rows[e.p.iRow]).removeClass("selected-row "+d));e.p.savedRow=[]})},getRowData:function(b,e){var c={},f,g=!1,d,h=0;this.each(function(){var k=this,l,m;if(null==b)g=!0,f=[],d=k.rows.length-1;else{m=a(k).jqGrid("getGridRowById",b);if(!m)return c;d=1}for(e&&!0===e&&0<k.p.data.length||(e=!1);h<d;)g&&(m=k.rows[h+1]),a(m).hasClass("jqgrow")&&(e?c=k.p.data[k.p._index[m.id]]:a('td[role="gridcell"]',m).each(function(b){l=k.p.colModel[b].name;if("cb"!==l&&"subgrid"!==
l&&"rn"!==l&&"btn"!==l)if(!0===k.p.treeGrid&&l===k.p.ExpandColumn)c[l]=a.jgrid.htmlDecode(a("span:first",this).html());else try{c[l]=a.unformat.call(k,this,{rowId:m.id,colModel:k.p.colModel[b]},b)}catch(t){c[l]=a.jgrid.htmlDecode(a(this).html())}}),g&&(f.push(c),c={})),h++});return f||c},delRowData:function(b){var e=!1,c,f,g;this.each(function(){c=a(this).jqGrid("getGridRowById",b);if(!c)return!1;this.p.subGrid&&(g=a(c).next(),g.hasClass("ui-subgrid")&&g.remove());a(c).remove();this.p.records--;this.p.reccount--;
this.updatepager(!0,!1);e=!0;this.p.multiselect&&(f=a.inArray(b,this.p.selarrrow),-1!==f&&this.p.selarrrow.splice(f,1));this.p.multiselect&&0<this.p.selarrrow.length?this.p.selrow=this.p.selarrrow[this.p.selarrrow.length-1]:this.p.selrow===b&&(this.p.selrow=null);if("local"===this.p.datatype){var d=a.jgrid.stripPref(this.p.idPrefix,b),d=this.p._index[d];void 0!==d&&(this.p.data.splice(d,1),this.refreshIndex())}if(!0===this.p.altRows&&e){var h=this.p.altclass;a(this.rows).each(function(b){1===b%2?
a(this).addClass(h):a(this).removeClass(h)})}});return e},setRowData:function(b,e,c){var f,g=!0,d;this.each(function(){if(!this.grid)return!1;var h=this,k,l,m=typeof c,q={};l=a(this).jqGrid("getGridRowById",b);if(!l)return!1;if(e)try{if(a(this.p.colModel).each(function(c){f=this.name;var g=a.jgrid.getAccessor(e,f);void 0!==g&&(q[f]=this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?a.unformat.date.call(h,g,this):g,k=h.formatter(b,q[f],c,e,"edit"),d=this.title?{title:a.jgrid.stripHtml(k)}:
{},!0===h.p.treeGrid&&f===h.p.ExpandColumn?a("td[role='gridcell']:eq("+c+") > span:first",l).html(k).attr(d):a("td[role='gridcell']:eq("+c+")",l).html(k).attr(d))}),"local"===h.p.datatype){var t=a.jgrid.stripPref(h.p.idPrefix,b),n=h.p._index[t],u;if(h.p.treeGrid)for(u in h.p.treeReader)h.p.treeReader.hasOwnProperty(u)&&delete q[h.p.treeReader[u]];void 0!==n&&(h.p.data[n]=a.extend(!0,h.p.data[n],q));q=null}}catch(x){g=!1}g&&("string"===m?a(l).addClass(c):null!==c&&"object"===m&&a(l).css(c),a(h).triggerHandler("jqGridAfterGridComplete"))});
return g},addRowData:function(b,e,c,f){-1===a.inArray(c,["first","last","before","after"])&&(c="last");var g=!1,d,h,k="",l="",m,q,t,n,u,x,z="",p,w,r,C,E,A;e&&(a.isArray(e)?(p=!0,w=b):(e=[e],p=!1),this.each(function(){var v=e.length;t=!0===this.p.rownumbers?1:0;m=!0===this.p.multiselect?1:0;q=!0===this.p.subGrid?1:0;p||(void 0!==b?b=String(b):(b=a.jgrid.randId(),!1!==this.p.keyName&&(w=this.p.keyName,void 0!==e[0][w]&&(b=e[0][w]))));r=this.p.altclass;var B=0,H=a(this).jqGrid("getStyleUI",this.p.styleUI+
".base","rowBox",!0,"jqgrow ui-row-"+this.p.direction),D={},y,I=a.isFunction(this.p.afterInsertRow)?!0:!1;t&&(k=a(this).jqGrid("getStyleUI",this.p.styleUI+".base","rownumBox",!1,"jqgrid-rownum"));for(m&&(l=a(this).jqGrid("getStyleUI",this.p.styleUI+".base","multiBox",!1,"cbox"));B<v;){C=e[B];h=[];y=H;if(p){try{b=C[w],void 0===b&&(b=a.jgrid.randId())}catch(G){b=a.jgrid.randId()}y+=!0===this.p.altRows?0===(this.rows.length-1)%2?" "+r:"":""}A=b;b=this.p.idPrefix+b;t&&(z=this.formatCol(0,1,"",null,b,
!0),h[h.length]='<td role="gridcell" '+k+" "+z+">0</td>");m&&(x='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+b+'" '+l+"/>",z=this.formatCol(t,1,"",null,b,!0),h[h.length]='<td role="gridcell" '+z+">"+x+"</td>");q&&(h[h.length]=a(this).jqGrid("addSubGridCell",m+t,1));for(u=m+q+t;u<this.p.colModel.length;u++)E=this.p.colModel[u],d=E.name,D[d]=C[d],x=this.formatter(b,a.jgrid.getAccessor(C,d),u,C),z=this.formatCol(u,1,x,C,b,D),h[h.length]='<td role="gridcell" '+z+">"+x+"</td>";h.unshift(this.constructTr(b,
!1,y,D,C));h[h.length]="</tr>";if(0===this.rows.length)a("table:first",this.grid.bDiv).append(h.join(""));else switch(c){case "last":a(this.rows[this.rows.length-1]).after(h.join(""));n=this.rows.length-1;break;case "first":a(this.rows[0]).after(h.join(""));n=1;break;case "after":if(n=a(this).jqGrid("getGridRowById",f))a(this.rows[n.rowIndex+1]).hasClass("ui-subgrid")?a(this.rows[n.rowIndex+1]).after(h):a(n).after(h.join("")),n=n.rowIndex+1;break;case "before":if(n=a(this).jqGrid("getGridRowById",
f))a(n).before(h.join("")),n=n.rowIndex-1}!0===this.p.subGrid&&a(this).jqGrid("addSubGrid",m+t,n);this.p.records++;this.p.reccount++;a(this).triggerHandler("jqGridAfterInsertRow",[b,C,C]);I&&this.p.afterInsertRow.call(this,b,C,C);B++;"local"===this.p.datatype&&(D[this.p.localReader.id]=A,this.p._index[A]=this.p.data.length,this.p.data.push(D),D={})}!0!==this.p.altRows||p||("last"===c?0===(this.rows.length-1)%2&&a(this.rows[this.rows.length-1]).addClass(r):a(this.rows).each(function(b){0===b%2?a(this).addClass(r):
a(this).removeClass(r)}));this.updatepager(!0,!0);g=!0}));return g},footerData:function(b,e,c){function f(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var g,d=!1,h={},k;void 0===b&&(b="get");"boolean"!==typeof c&&(c=!0);b=b.toLowerCase();this.each(function(){var l=this,m;if(!l.grid||!l.p.footerrow||"set"===b&&f(e))return!1;d=!0;a(this.p.colModel).each(function(f){g=this.name;"set"===b?void 0!==e[g]&&(m=c?l.formatter("",e[g],f,e,"edit"):e[g],k=this.title?{title:a.jgrid.stripHtml(m)}:
{},a("tr.footrow td:eq("+f+")",l.grid.sDiv).html(m).attr(k),d=!0):"get"===b&&(h[g]=a("tr.footrow td:eq("+f+")",l.grid.sDiv).html())})});return"get"===b?h:d},showHideCol:function(b,e){return this.each(function(){var c=this,f=!1,g=a.jgrid.cell_width?0:c.p.cellLayout,d;if(c.grid){"string"===typeof b&&(b=[b]);e="none"!==e?"":"none";var h=""===e?!0:!1,k=c.p.groupHeader&&(a.isArray(c.p.groupHeader)||a.isFunction(c.p.groupHeader));k&&a(c).jqGrid("destroyGroupHeader",!1);a(this.p.colModel).each(function(k){if(-1!==
a.inArray(this.name,b)&&this.hidden===h){if(!0===c.p.frozenColumns&&!0===this.frozen)return!0;a("tr[role=row]",c.grid.hDiv).each(function(){a(this.cells[k]).css("display",e)});a(c.rows).each(function(){a(this).hasClass("jqgroup")||a(this.cells[k]).css("display",e)});c.p.footerrow&&a("tr.footrow td:eq("+k+")",c.grid.sDiv).css("display",e);d=parseInt(this.width,10);c.p.tblwidth="none"===e?c.p.tblwidth-(d+g):c.p.tblwidth+(d+g);this.hidden=!h;f=!0;a(c).triggerHandler("jqGridShowHideCol",[h,this.name,
k])}});!0===f&&(!0!==c.p.shrinkToFit||isNaN(c.p.height)||(c.p.tblwidth+=parseInt(c.p.scrollOffset,10)),a(c).jqGrid("setGridWidth",!0===c.p.shrinkToFit?c.p.tblwidth:c.p.width));if(k){k=a.extend([],c.p.groupHeader);c.p.groupHeader=null;for(var l=0;l<k.length;l++)a(c).jqGrid("setGroupHeaders",k[l])}}})},hideCol:function(b){return this.each(function(){a(this).jqGrid("showHideCol",b,"none")})},showCol:function(b){return this.each(function(){a(this).jqGrid("showHideCol",b,"")})},remapColumns:function(b,
e,c){function f(c){var d;d=c.length?a.makeArray(c):a.extend({},c);a.each(b,function(a){c[a]=d[this]})}function g(c,d){a(">tr"+(d||""),c).each(function(){var c=this,d=a.makeArray(c.cells);a.each(b,function(){var a=d[this];a&&c.appendChild(a)})})}var d=this.get(0);f(d.p.colModel);f(d.p.colNames);f(d.grid.headers);g(a("thead:first",d.grid.hDiv),c&&":not(.ui-jqgrid-labels)");e&&g(a("#"+a.jgrid.jqID(d.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");d.p.footerrow&&g(a("tbody:first",d.grid.sDiv));
d.p.remapColumns&&(d.p.remapColumns.length?f(d.p.remapColumns):d.p.remapColumns=a.makeArray(b));d.p.lastsort=a.inArray(d.p.lastsort,b);d.p.treeGrid&&(d.p.expColInd=a.inArray(d.p.expColInd,b));a(d).triggerHandler("jqGridRemapColumns",[b,e,c])},setGridWidth:function(b,e){return this.each(function(){if(this.grid){var c=this,f,g=0,d=a.jgrid.cell_width?0:c.p.cellLayout,h,k=0,l=!1,m=c.p.scrollOffset,q,t=0,n;n="Bootstrap"===c.p.styleUI?2:0;"boolean"!==typeof e&&(e=c.p.shrinkToFit);if(!isNaN(b)){b=parseInt(b,
10);c.grid.width=c.p.width=b;a("#gbox_"+a.jgrid.jqID(c.p.id)).css("width",b+"px");a("#gview_"+a.jgrid.jqID(c.p.id)).css("width",b+"px");a(c.grid.bDiv).css("width",b-n+"px");a(c.grid.hDiv).css("width",b-n+"px");c.p.pager&&a(c.p.pager).css("width",b+"px");c.p.toppager&&a(c.p.toppager).css("width",b-n+"px");!0===c.p.toolbar[0]&&(a(c.grid.uDiv).css("width",b-n+"px"),"both"===c.p.toolbar[1]&&a(c.grid.ubDiv).css("width",b-n+"px"));c.p.footerrow&&a(c.grid.sDiv).css("width",b-n+"px");!1===e&&!0===c.p.forceFit&&
(c.p.forceFit=!1);if(!0===e){a.each(c.p.colModel,function(){!1===this.hidden&&(f=this.widthOrg,g+=f+d,this.fixed?t+=f+d:k++)});if(0===k)return;c.p.tblwidth=g;q=b-d*k-t;!isNaN(c.p.height)&&(a(c.grid.bDiv)[0].clientHeight<a(c.grid.bDiv)[0].scrollHeight||1===c.rows.length)&&(l=!0,q-=m);var g=0,u=0<c.grid.cols.length;a.each(c.p.colModel,function(a){!1!==this.hidden||this.fixed||(f=this.widthOrg,f=Math.round(q*f/(c.p.tblwidth-d*k-t)),0>f||(this.width=f,g+=f,c.grid.headers[a].width=f,c.grid.headers[a].el.style.width=
f+"px",c.p.footerrow&&(c.grid.footers[a].style.width=f+"px"),u&&(c.grid.cols[a].style.width=f+"px"),h=a))});if(!h)return;n=0;l?b-t-(g+d*k)!==m&&(n=b-t-(g+d*k)-m):1!==Math.abs(b-t-(g+d*k))&&(n=b-t-(g+d*k));c.p.colModel[h].width+=n;c.p.tblwidth=g+n+d*k+t;c.p.tblwidth>b?(l=c.p.tblwidth-parseInt(b,10),c.p.tblwidth=b,f=c.p.colModel[h].width-=l):f=c.p.colModel[h].width;c.grid.headers[h].width=f;c.grid.headers[h].el.style.width=f+"px";u&&(c.grid.cols[h].style.width=f+"px");c.p.footerrow&&(c.grid.footers[h].style.width=
f+"px")}c.p.tblwidth&&(a("table:first",c.grid.bDiv).css("width",c.p.tblwidth+"px"),a("table:first",c.grid.hDiv).css("width",c.p.tblwidth+"px"),c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft,c.p.footerrow&&a("table:first",c.grid.sDiv).css("width",c.p.tblwidth+"px"))}}})},setGridHeight:function(b){return this.each(function(){if(this.grid){var e=a(this.grid.bDiv);e.css({height:b+(isNaN(b)?"":"px")});!0===this.p.frozenColumns&&a("#"+a.jgrid.jqID(this.p.id)+"_frozen").parent().height(e.height()-16);this.p.height=
b;this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(b){return this.each(function(){var e=a(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",!0);this.p.caption=b;a(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(b);a(this.grid.cDiv).show();a(this.grid.hDiv).removeClass(e)})},setLabel:function(b,e,c,f){return this.each(function(){var g=-1;if(this.grid&&null!=b&&(isNaN(b)?a(this.p.colModel).each(function(a){if(this.name===b)return g=a,!1}):g=parseInt(b,10),
0<=g)){var d=a("tr.ui-jqgrid-labels th:eq("+g+")",this.grid.hDiv);if(e){var h=a(".s-ico",d);a("[id^=jqgh_]",d).empty().html(e).append(h);this.p.colNames[g]=e}c&&("string"===typeof c?a(d).addClass(c):a(d).css(c));"object"===typeof f&&a(d).attr(f)}})},setSortIcon:function(b,e){return this.each(function(){var c=-1;if(this.grid&&null!=b&&(isNaN(b)?a(this.p.colModel).each(function(a){if(this.name===b)return c=a,!1}):c=parseInt(b,10),0<=c)){var f=a("tr.ui-jqgrid-labels th:eq("+c+")",this.grid.hDiv);"left"===
e?f.find(".s-ico").css("float","left"):f.find(".s-ico").css("float","none")}})},setCell:function(b,e,c,f,g,d){return this.each(function(){var h=-1,k,l;if(this.grid&&(isNaN(e)?a(this.p.colModel).each(function(a){if(this.name===e)return h=a,!1}):h=parseInt(e,10),0<=h&&(k=a(this).jqGrid("getGridRowById",b)))){var m=a("td:eq("+h+")",k);l=0;var q=[];if(""!==c||!0===d){if(void 0!==k.cells)for(;l<k.cells.length;)q.push(k.cells[l].innerHTML),l++;k=this.formatter(b,c,h,q,"edit");l=this.p.colModel[h].title?
{title:a.jgrid.stripHtml(k)}:{};this.p.treeGrid&&0<a(".tree-wrap",a(m)).length?a("span",a(m)).html(k).attr(l):a(m).html(k).attr(l);"local"===this.p.datatype&&(k=this.p.colModel[h],c=k.formatter&&"string"===typeof k.formatter&&"date"===k.formatter?a.unformat.date.call(this,c,k):c,l=this.p._index[a.jgrid.stripPref(this.p.idPrefix,b)],void 0!==l&&(this.p.data[l][k.name]=c))}"string"===typeof f?a(m).addClass(f):f&&a(m).css(f);"object"===typeof g&&a(m).attr(g)}})},getCell:function(b,e){var c=!1;this.each(function(){var f=
-1,g,d;if(this.grid&&(g=e,isNaN(e)?a(this.p.colModel).each(function(a){if(this.name===e)return g=this.name,f=a,!1}):f=parseInt(e,10),0<=f)){if(d=a(this).jqGrid("getGridRowById",b))try{c=a.unformat.call(this,a("td:eq("+f+")",d),{rowId:d.id,colModel:this.p.colModel[f]},f)}catch(h){c=a.jgrid.htmlDecode(a("td:eq("+f+")",d).html())}this.p.treeGrid&&c&&this.p.ExpandColumn===g&&(c=a("<div>"+c+"</div>").find("span:first").html())}});return c},getCol:function(b,e,c){var f=[],g,d=0,h,k,l;e="boolean"!==typeof e?
!1:e;void 0===c&&(c=!1);this.each(function(){var m=-1;if(this.grid&&(isNaN(b)?a(this.p.colModel).each(function(a){if(this.name===b)return m=a,!1}):m=parseInt(b,10),0<=m)){var q=this.rows.length,t=0,n=0;if(q&&0<q){for(;t<q;){if(a(this.rows[t]).hasClass("jqgrow")){try{g=a.unformat.call(this,a(this.rows[t].cells[m]),{rowId:this.rows[t].id,colModel:this.p.colModel[m]},m)}catch(u){g=a.jgrid.htmlDecode(this.rows[t].cells[m].innerHTML)}c?(l=parseFloat(g),isNaN(l)||(d+=l,void 0===k&&(k=h=l),h=Math.min(h,
l),k=Math.max(k,l),n++)):e?f.push({id:this.rows[t].id,value:g}):f.push(g)}t++}if(c)switch(c.toLowerCase()){case "sum":f=d;break;case "avg":f=d/n;break;case "count":f=q-1;break;case "min":f=h;break;case "max":f=k}}}});return f},clearGridData:function(b){return this.each(function(){if(this.grid){"boolean"!==typeof b&&(b=!1);if(this.p.deepempty)a("#"+a.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove();else{var e=a("#"+a.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];a("#"+a.jgrid.jqID(this.p.id)+
" tbody:first").empty().append(e)}this.p.footerrow&&b&&a(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.selrow=null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=0;this.p.data=[];this.p._index={};this.updatepager(!0,!1)}})},getInd:function(b,e){var c=!1,f;this.each(function(){(f=a(this).jqGrid("getGridRowById",b))&&(c=!0===e?f:f.rowIndex)});return c},bindKeys:function(b){var e=a.extend({onEnter:null,onSpace:null,onLeftKey:null,
onRightKey:null,scrollingRows:!0},b||{});return this.each(function(){var b=this;a("body").is("[role]")||a("body").attr("role","application");b.p.scrollrows=e.scrollingRows;a(b).keydown(function(c){var f=a(b).find("tr[tabindex=0]")[0],d,h,k,l=b.p.treeReader.expanded_field;if(f)if(k=b.p._index[a.jgrid.stripPref(b.p.idPrefix,f.id)],37===c.keyCode||38===c.keyCode||39===c.keyCode||40===c.keyCode){if(38===c.keyCode){h=f.previousSibling;d="";if(h)if(a(h).is(":hidden"))for(;h;){if(h=h.previousSibling,!a(h).is(":hidden")&&
a(h).hasClass("jqgrow")){d=h.id;break}}else d=h.id;a(b).jqGrid("setSelection",d,!0,c);c.preventDefault()}if(40===c.keyCode){h=f.nextSibling;d="";if(h)if(a(h).is(":hidden"))for(;h;){if(h=h.nextSibling,!a(h).is(":hidden")&&a(h).hasClass("jqgrow")){d=h.id;break}}else d=h.id;a(b).jqGrid("setSelection",d,!0,c);c.preventDefault()}37===c.keyCode&&(b.p.treeGrid&&b.p.data[k][l]&&a(f).find("div.treeclick").trigger("click"),a(b).triggerHandler("jqGridKeyLeft",[b.p.selrow]),a.isFunction(e.onLeftKey)&&e.onLeftKey.call(b,
b.p.selrow));39===c.keyCode&&(b.p.treeGrid&&!b.p.data[k][l]&&a(f).find("div.treeclick").trigger("click"),a(b).triggerHandler("jqGridKeyRight",[b.p.selrow]),a.isFunction(e.onRightKey)&&e.onRightKey.call(b,b.p.selrow))}else 13===c.keyCode?(a(b).triggerHandler("jqGridKeyEnter",[b.p.selrow]),a.isFunction(e.onEnter)&&e.onEnter.call(b,b.p.selrow)):32===c.keyCode&&(a(b).triggerHandler("jqGridKeySpace",[b.p.selrow]),a.isFunction(e.onSpace)&&e.onSpace.call(b,b.p.selrow))})})},unbindKeys:function(){return this.each(function(){a(this).off("keydown")})},
getLocalRow:function(b){var e=!1,c;this.each(function(){void 0!==b&&(c=this.p._index[a.jgrid.stripPref(this.p.idPrefix,b)],0<=c&&(e=this.p.data[c]))});return e},progressBar:function(b){b=a.extend({htmlcontent:"",method:"hide",loadtype:"disable"},b||{});return this.each(function(){var e="show"===b.method?!0:!1,c=a("#load_"+a.jgrid.jqID(this.p.id)),f;f=a(window).scrollTop();""!==b.htmlcontent&&c.html(b.htmlcontent);switch(b.loadtype){case "enable":c.toggle(e);break;case "block":a("#lui_"+a.jgrid.jqID(this.p.id)).toggle(e),
c.toggle(e)}c.is(":visible")&&(e=c.offsetParent(),c.css("top",""),c.offset().top<f&&(f=Math.min(10+f-e.offset().top,e.height()-c.height()),c.css("top",f+"px")))})},getColProp:function(a){var b={},c=this[0];if(!c.grid)return!1;var c=c.p.colModel,f;for(f=0;f<c.length;f++)if(c[f].name===a){b=c[f];break}return b},setColProp:function(b,e){return this.each(function(){if(this.grid&&e){var c=this.p.colModel,f;for(f=0;f<c.length;f++)if(c[f].name===b){a.extend(!0,this.p.colModel[f],e);break}}})},sortGrid:function(a,
e,c){return this.each(function(){var b=-1,g,d=!1;if(this.grid){a||(a=this.p.sortname);for(g=0;g<this.p.colModel.length;g++)if(this.p.colModel[g].index===a||this.p.colModel[g].name===a){b=g;!0===this.p.frozenColumns&&!0===this.p.colModel[g].frozen&&(d=this.grid.fhDiv.find("#"+this.p.id+"_"+a));break}-1!==b&&(g=this.p.colModel[b].sortable,d||(d=this.grid.headers[b].el),"boolean"!==typeof g&&(g=!0),"boolean"!==typeof e&&(e=!1),g&&this.sortData("jqgh_"+this.p.id+"_"+a,b,e,c,d))}})},setGridState:function(b){return this.each(function(){if(this.grid){var e=
a(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",!0),c=a(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",!0);"hidden"===b?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&a(this.p.pager).slideUp("fast"),this.p.toppager&&a(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&a(this.grid.ubDiv).slideUp("fast"),a(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv",
"#gbox_"+a.jgrid.jqID(this.p.id)).slideUp("fast"),a(".ui-jqgrid-headlink",this.grid.cDiv).removeClass(e).addClass(c),this.p.gridstate="hidden"):"visible"===b&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&a(this.p.pager).slideDown("fast"),this.p.toppager&&a(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&a(this.grid.ubDiv).slideDown("fast"),a(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&a(".ui-jqgrid-sdiv",
"#gbox_"+a.jgrid.jqID(this.p.id)).slideDown("fast"),a(".ui-jqgrid-headlink",this.grid.cDiv).removeClass(c).addClass(e),this.p.gridstate="visible")}})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var b=this,e=b.p.colModel,c=0,f=e.length,g=-1,d=!1,h=a(b).jqGrid("getStyleUI",b.p.styleUI+".base","headerDiv",!0,"ui-jqgrid-hdiv"),k=a(b).jqGrid("getStyleUI",b.p.styleUI+".common","hover",!0);if(!0!==b.p.subGrid&&!0!==b.p.treeGrid&&!0!==b.p.cellEdit&&!b.p.sortable&&!b.p.scroll){b.p.rownumbers&&
c++;for(b.p.multiselect&&c++;c<f;){if(!0===e[c].frozen)d=!0,g=c;else break;c++}if(0<=g&&d){e=b.p.caption?a(b.grid.cDiv).outerHeight():0;c=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(b.p.id)).height();b.p.toppager&&(e+=a(b.grid.topDiv).outerHeight());!0===b.p.toolbar[0]&&"bottom"!==b.p.toolbar[1]&&(e+=a(b.grid.uDiv).outerHeight());b.grid.fhDiv=a('<div style="position:absolute;'+("rtl"===b.p.direction?"right:0;":"left:0;")+"top:"+e+"px;height:"+c+'px;" class="frozen-div '+h+'"></div>');b.grid.fbDiv=
a('<div style="position:absolute;'+("rtl"===b.p.direction?"right:0;":"left:0;")+"top:"+(parseInt(e,10)+parseInt(c,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fhDiv);h=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(b.p.id)).clone(!0);if(b.p.groupHeader){a("tr.jqg-first-row-header, tr.jqg-third-row-header",h).each(function(){a("th:gt("+g+")",this).remove()});var l=-1,m=-1,q,t;a("tr.jqg-second-row-header th",h).each(function(){q=
parseInt(a(this).attr("colspan"),10);if(t=parseInt(a(this).attr("rowspan"),10))l++,m++;q&&(l+=q,m++);if(l===g)return m=g,!1});l!==g&&(m=g);a("tr.jqg-second-row-header",h).each(function(){a("th:gt("+m+")",this).remove()})}else a("tr",h).each(function(){a("th:gt("+g+")",this).remove()});a(h).width(1);a(h).css("height",c+"px");a(b.grid.fhDiv).append(h).mousemove(function(a){if(b.grid.resizing)return b.grid.dragMove(a),!1});b.p.footerrow&&(h=a(".ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(b.p.id)).height(),
b.grid.fsDiv=a('<div style="position:absolute;left:0px;top:'+(parseInt(e,10)+parseInt(c,10)+parseInt(h,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>'),a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fsDiv),h=a(".ui-jqgrid-ftable","#gview_"+a.jgrid.jqID(b.p.id)).clone(!0),a("tr",h).each(function(){a("td:gt("+g+")",this).remove()}),a(h).width(1),a(b.grid.fsDiv).append(h));a(b).on("jqGridResizeStop.setFrozenColumns",function(c,d,e){c=a(".ui-jqgrid-htable",b.grid.fhDiv);a("th:eq("+e+")",c).width(d);
c=a(".ui-jqgrid-btable",b.grid.fbDiv);a("tr:first td:eq("+e+")",c).width(d);b.p.footerrow&&(c=a(".ui-jqgrid-ftable",b.grid.fsDiv),a("tr:first td:eq("+e+")",c).width(d))});a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fbDiv);a(b.grid.fbDiv).on("mousewheel DOMMouseScroll",function(c){var d=a(b.grid.bDiv).scrollTop();0<c.originalEvent.wheelDelta||0>c.originalEvent.detail?a(b.grid.bDiv).scrollTop(d-25):a(b.grid.bDiv).scrollTop(d+25);c.preventDefault()});!0===b.p.hoverrows&&a("#"+a.jgrid.jqID(b.p.id)).off("mouseover mouseout");
a(b).on("jqGridAfterGridComplete.setFrozenColumns",function(){a("#"+a.jgrid.jqID(b.p.id)+"_frozen").remove();a(b.grid.fbDiv).height(a(b.grid.bDiv).height()-16);var c=[];a("#"+a.jgrid.jqID(b.p.id)+" tr[role=row].jqgrow").each(function(){c.push(a("td:visible:first",this).height())});var d=a("#"+a.jgrid.jqID(b.p.id)).clone(!0);a("tr[role=row]",d).each(function(){a("td[role=gridcell]:gt("+g+")",this).remove()});a(d).width(1).attr("id",b.p.id+"_frozen");a(b.grid.fbDiv).append(d);a("tr[role=row].jqgrow",
d).each(function(b,d){a("td:not(.jqgrid-rownum):visible:first",this).height(c[b])});!0===b.p.hoverrows&&(a("tr.jqgrow",d).hover(function(){a(this).addClass(k);a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)).addClass(k)},function(){a(this).removeClass(k);a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)).removeClass(k)}),a("tr.jqgrow","#"+a.jgrid.jqID(b.p.id)).hover(function(){a(this).addClass(k);a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)+"_frozen").addClass(k)},function(){a(this).removeClass(k);
a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)+"_frozen").removeClass(k)}));d=null});b.grid.hDiv.loading||a(b).triggerHandler("jqGridAfterGridComplete");b.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){var b=a(this).jqGrid("getStyleUI",this.p.styleUI+".common","hover",!0);a(this.grid.fhDiv).remove();a(this.grid.fbDiv).remove();this.grid.fhDiv=null;this.grid.fbDiv=null;this.p.footerrow&&(a(this.grid.fsDiv).remove(),
this.grid.fsDiv=null);a(this).off(".setFrozenColumns");if(!0===this.p.hoverrows){var e;a("#"+a.jgrid.jqID(this.p.id)).on({mouseover:function(c){e=a(c.target).closest("tr.jqgrow");"ui-subgrid"!==a(e).attr("class")&&a(e).addClass(b)},mouseout:function(c){e=a(c.target).closest("tr.jqgrow");a(e).removeClass(b)}})}this.p.frozenColumns=!1}})},resizeColumn:function(a,e){return this.each(function(){var b=this.grid,f=this.p,g=f.colModel,d,h=g.length;if("string"===typeof a)for(d=0;d<h;d++){if(g[d].name===a){a=
d;break}}else a=parseInt(a,10);e=parseInt(e,10);if(!("number"!==typeof a||0>a||a>g.length-1||"number"!==typeof e||e<f.minColWidth)){if(f.forceFit)for(f.nv=0,d=a+1;d<h;d++)if(!0!==g[d].hidden){f.nv=d-a;break}b.resizing={idx:a};g=e-b.headers[a].width;if(f.forceFit){d=b.headers[a+f.nv].width-g;if(d<f.minColWidth)return;b.headers[a+f.nv].newWidth=b.headers[a+f.nv].width-g}b.newWidth=f.tblwidth+g;b.headers[a].newWidth=e;b.dragEnd(!1)}})},getStyleUI:function(b,e,c,f){var g="",d="";try{var h=b.split(".");
c||(g="class=",d='"');null==f&&(f="");switch(h.length){case 1:g+=d+a.trim(f+" "+a.jgrid.styleUI[h[0]][e]+d);break;case 2:g+=d+a.trim(f+" "+a.jgrid.styleUI[h[0]][h[1]][e]+d)}}catch(k){g=""}return g},resizeGrid:function(b){return this.each(function(){var e=this;void 0===b&&(b=500);setTimeout(function(){try{var b=a(window).width(),f=a("#gbox_"+a.jgrid.jqID(e.p.id)).parent().width(),g=e.p.width,g=3<b-f?f:b;a("#"+a.jgrid.jqID(e.p.id)).jqGrid("setGridWidth",g)}catch(d){}},b)})}});a.jgrid.extend({editCell:function(b,
e,c){return this.each(function(){var f=this,g,d,h,k,l=a(this).jqGrid("getStyleUI",f.p.styleUI+".common","highlight",!0),m=a(this).jqGrid("getStyleUI",f.p.styleUI+".common","hover",!0),q=a(this).jqGrid("getStyleUI",f.p.styleUI+".celledit","inputClass",!0);if(f.grid&&!0===f.p.cellEdit){e=parseInt(e,10);f.p.selrow=f.rows[b].id;f.p.knv||a(f).jqGrid("GridNav");if(0<f.p.savedRow.length){if(!0===c&&b==f.p.iRow&&e==f.p.iCol)return;a(f).jqGrid("saveCell",f.p.savedRow[0].id,f.p.savedRow[0].ic)}else window.setTimeout(function(){a("#"+
a.jgrid.jqID(f.p.knv)).attr("tabindex","-1").focus()},1);k=f.p.colModel[e];g=k.name;if("subgrid"!==g&&"cb"!==g&&"rn"!==g){try{h=f.rows[b].cells[e]}catch(n){h=a("td:eq("+e+")",f.rows[b])}if(!0!==k.editable||!0!==c||h.hasClass("not-editable-cell")||a.isFunction(f.p.isCellEditable)&&!f.p.isCellEditable.call(f,g,b,e))0<=parseInt(f.p.iCol,10)&&0<=parseInt(f.p.iRow,10)&&a(f.rows[f.p.iRow]).removeClass("selected-row "+m).find("td:eq("+f.p.iCol+")").removeClass("edit-cell "+l),h.addClass("edit-cell "+l),
a(f.rows[b]).addClass("selected-row "+m),d=h.html().replace(/\&#160\;/ig,""),a(f).triggerHandler("jqGridSelectCell",[f.rows[b].id,g,d,b,e]),a.isFunction(f.p.onSelectCell)&&f.p.onSelectCell.call(f,f.rows[b].id,g,d,b,e);else{0<=parseInt(f.p.iCol,10)&&0<=parseInt(f.p.iRow,10)&&a(f.rows[f.p.iRow]).removeClass("selected-row "+m).find("td:eq("+f.p.iCol+")").removeClass("edit-cell "+l);a(h).addClass("edit-cell "+l);a(f.rows[b]).addClass("selected-row "+m);try{d=a.unformat.call(f,h,{rowId:f.rows[b].id,colModel:k},
e)}catch(n){d=k.edittype&&"textarea"===k.edittype?a(h).text():a(h).html()}f.p.autoencode&&(d=a.jgrid.htmlDecode(d));k.edittype||(k.edittype="text");f.p.savedRow.push({id:b,ic:e,name:g,v:d});if("&nbsp;"===d||"&#160;"===d||1===d.length&&160===d.charCodeAt(0))d="";a.isFunction(f.p.formatCell)&&(l=f.p.formatCell.call(f,f.rows[b].id,g,d,b,e),void 0!==l&&(d=l));a(f).triggerHandler("jqGridBeforeEditCell",[f.rows[b].id,g,d,b,e]);a.isFunction(f.p.beforeEditCell)&&f.p.beforeEditCell.call(f,f.rows[b].id,g,d,
b,e);var l=a.extend({},k.editoptions||{},{id:b+"_"+g,name:g,rowId:f.rows[b].id,oper:"edit"}),t=a.jgrid.createEl.call(f,k.edittype,l,d,!0,a.extend({},a.jgrid.ajaxOptions,f.p.ajaxSelectOptions||{}));-1<a.inArray(k.edittype,["text","textarea","password","select"])&&a(t).addClass(q);a(h).html("").append(t).attr("tabindex","0");a.jgrid.bindEv.call(f,t,l);window.setTimeout(function(){a(t).focus()},1);a("input, select, textarea",h).on("keydown",function(c){27===c.keyCode&&(0<a("input.hasDatepicker",h).length?
a(".ui-datepicker").is(":hidden")?a(f).jqGrid("restoreCell",b,e):a("input.hasDatepicker",h).datepicker("hide"):a(f).jqGrid("restoreCell",b,e));if(13===c.keyCode&&!c.shiftKey)return a(f).jqGrid("saveCell",b,e),!1;if(9===c.keyCode){if(f.grid.hDiv.loading)return!1;c.shiftKey?a(f).jqGrid("prevCell",b,e):a(f).jqGrid("nextCell",b,e)}c.stopPropagation()});a(f).triggerHandler("jqGridAfterEditCell",[f.rows[b].id,g,d,b,e]);a.isFunction(f.p.afterEditCell)&&f.p.afterEditCell.call(f,f.rows[b].id,g,d,b,e)}f.p.iCol=
e;f.p.iRow=b}}})},saveCell:function(b,e){return this.each(function(){var c=this,f,g=a.jgrid.getRegional(this,"errors"),d=a.jgrid.getRegional(this,"edit");if(c.grid&&!0===c.p.cellEdit){f=1<=c.p.savedRow.length?0:null;if(null!==f){var h=a("td:eq("+e+")",c.rows[b]),k,l,m=c.p.colModel[e],q=m.name,t=a.jgrid.jqID(q),n=a(h).offset();switch(m.edittype){case "select":if(m.editoptions.multiple){var u=a("#"+b+"_"+t,c.rows[b]),x=[];(k=a(u).val())?k.join(","):k="";a("option:selected",u).each(function(b,c){x[b]=
a(c).text()});l=x.join(",")}else k=a("#"+b+"_"+t+" option:selected",c.rows[b]).val(),l=a("#"+b+"_"+t+" option:selected",c.rows[b]).text();m.formatter&&(l=k);break;case "checkbox":u=["Yes","No"];m.editoptions&&(u=m.editoptions.value.split(":"));l=k=a("#"+b+"_"+t,c.rows[b]).is(":checked")?u[0]:u[1];break;case "password":case "text":case "textarea":case "button":l=k=a("#"+b+"_"+t,c.rows[b]).val();break;case "custom":try{if(m.editoptions&&a.isFunction(m.editoptions.custom_value)){k=m.editoptions.custom_value.call(c,
a(".customelement",h),"get");if(void 0===k)throw"e2";l=k}else throw"e1";}catch(C){"e1"===C?a.jgrid.info_dialog(g.errcap,"function 'custom_value' "+d.msg.nodefined,d.bClose,{styleUI:c.p.styleUI}):"e2"===C?a.jgrid.info_dialog(g.errcap,"function 'custom_value' "+d.msg.novalue,d.bClose,{styleUI:c.p.styleUI}):a.jgrid.info_dialog(g.errcap,C.message,d.bClose,{styleUI:c.p.styleUI})}}if(l!==c.p.savedRow[f].v){if(f=a(c).triggerHandler("jqGridBeforeSaveCell",[c.rows[b].id,q,k,b,e]))l=k=f;a.isFunction(c.p.beforeSaveCell)&&
(f=c.p.beforeSaveCell.call(c,c.rows[b].id,q,k,b,e))&&(l=k=f);var z=a.jgrid.checkValues.call(c,k,e),p=!1;if(!0===z[0]){f=a(c).triggerHandler("jqGridBeforeSubmitCell",[c.rows[b].id,q,k,b,e])||{};a.isFunction(c.p.beforeSubmitCell)&&((f=c.p.beforeSubmitCell.call(c,c.rows[b].id,q,k,b,e))||(f={}));0<a("input.hasDatepicker",h).length&&a("input.hasDatepicker",h).datepicker("hide");if("remote"===c.p.cellsubmit)if(c.p.cellurl){var w={};c.p.autoencode&&(k=a.jgrid.htmlEncode(k));m.editoptions&&m.editoptions.NullIfEmpty&&
""===k&&(k="null",p=!0);w[q]=k;var r;r=c.p.prmNames;m=r.id;u=r.oper;w[m]=a.jgrid.stripPref(c.p.idPrefix,c.rows[b].id);w[u]=r.editoper;w=a.extend(f,w);a(c).jqGrid("progressBar",{method:"show",loadtype:c.p.loadui,htmlcontent:a.jgrid.getRegional(c,"defaults.savetext")});c.grid.hDiv.loading=!0;a.ajax(a.extend({url:c.p.cellurl,data:a.isFunction(c.p.serializeCellData)?c.p.serializeCellData.call(c,w,q):w,type:"POST",complete:function(f,m){a(c).jqGrid("progressBar",{method:"hide",loadtype:c.p.loadui});c.grid.hDiv.loading=
!1;if("success"===m){var u=a(c).triggerHandler("jqGridAfterSubmitCell",[c,f,w.id,q,k,b,e])||[!0,""];!0===u[0]&&a.isFunction(c.p.afterSubmitCell)&&(u=c.p.afterSubmitCell.call(c,f,w.id,q,k,b,e));!0===u[0]?(p&&(k=""),a(h).empty(),a(c).jqGrid("setCell",c.rows[b].id,e,l,!1,!1,!0),a(h).addClass("dirty-cell"),a(c.rows[b]).addClass("edited"),a(c).triggerHandler("jqGridAfterSaveCell",[c.rows[b].id,q,k,b,e]),a.isFunction(c.p.afterSaveCell)&&c.p.afterSaveCell.call(c,c.rows[b].id,q,k,b,e),c.p.savedRow.splice(0,
1)):(a.isFunction(c.p.errorCell)?c.p.errorCell.call(c,f,m):a.jgrid.info_dialog(g.errcap,u[1],d.bClose,{styleUI:c.p.styleUI,top:n.top+30,left:n.left,onClose:function(){c.p.restoreCellonFail||a("#"+b+"_"+t,c.rows[b]).focus()}}),c.p.restoreCellonFail&&a(c).jqGrid("restoreCell",b,e))}},error:function(f,h,k){a("#lui_"+a.jgrid.jqID(c.p.id)).hide();c.grid.hDiv.loading=!1;a(c).triggerHandler("jqGridErrorCell",[f,h,k]);a.isFunction(c.p.errorCell)?c.p.errorCell.call(c,f,h,k):a.jgrid.info_dialog(g.errcap,f.status+
" : "+f.statusText+"<br/>"+h,d.bClose,{styleUI:c.p.styleUI,top:n.top+30,left:n.left,onClose:function(){c.p.restoreCellonFail||a("#"+b+"_"+t,c.rows[b]).focus()}});c.p.restoreCellonFail&&a(c).jqGrid("restoreCell",b,e)}},a.jgrid.ajaxOptions,c.p.ajaxCellOptions||{}))}else try{a.jgrid.info_dialog(g.errcap,g.nourl,d.bClose,{styleUI:c.p.styleUI}),c.p.restoreCellonFail&&a(c).jqGrid("restoreCell",b,e)}catch(C){}"clientArray"===c.p.cellsubmit&&(a(h).empty(),a(c).jqGrid("setCell",c.rows[b].id,e,l,!1,!1,!0),
a(h).addClass("dirty-cell"),a(c.rows[b]).addClass("edited"),a(c).triggerHandler("jqGridAfterSaveCell",[c.rows[b].id,q,k,b,e]),a.isFunction(c.p.afterSaveCell)&&c.p.afterSaveCell.call(c,c.rows[b].id,q,k,b,e),c.p.savedRow.splice(0,1))}else try{a.isFunction(c.p.validationCell)?c.p.validationCell.call(c,a("#"+b+"_"+t,c.rows[b]),z[1],b,e):(window.setTimeout(function(){a.jgrid.info_dialog(g.errcap,k+" "+z[1],d.bClose,{styleUI:c.p.styleUI,top:n.top+30,left:n.left,onClose:function(){c.p.restoreCellonFail||
a("#"+b+"_"+t,c.rows[b]).focus()}})},50),c.p.restoreCellonFail&&a(c).jqGrid("restoreCell",b,e))}catch(C){alert(z[1])}}else a(c).jqGrid("restoreCell",b,e)}window.setTimeout(function(){a("#"+a.jgrid.jqID(c.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(b,e){return this.each(function(){var c=this,f;if(c.grid&&!0===c.p.cellEdit){f=1<=c.p.savedRow.length?0:null;if(null!==f){var g=a("td:eq("+e+")",c.rows[b]);if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker",g).datepicker("hide")}catch(d){}a(g).empty().attr("tabindex",
"-1");a(c).jqGrid("setCell",c.rows[b].id,e,c.p.savedRow[f].v,!1,!1,!0);a(c).triggerHandler("jqGridAfterRestoreCell",[c.rows[b].id,c.p.savedRow[f].v,b,e]);a.isFunction(c.p.afterRestoreCell)&&c.p.afterRestoreCell.call(c,c.rows[b].id,c.p.savedRow[f].v,b,e);c.p.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+c.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(b,e){return this.each(function(){var c=!1,f;if(this.grid&&!0===this.p.cellEdit){for(f=e+1;f<this.p.colModel.length;f++)if(!0===
this.p.colModel[f].editable&&(!a.isFunction(this.p.isCellEditable)||this.p.isCellEditable.call(this,this.p.colModel[f].name,b,f))){c=f;break}!1!==c?a(this).jqGrid("editCell",b,c,!0):0<this.p.savedRow.length&&a(this).jqGrid("saveCell",b,e)}})},prevCell:function(b,e){return this.each(function(){var c=!1,f;if(this.grid&&!0===this.p.cellEdit){for(f=e-1;0<=f;f--)if(!0===this.p.colModel[f].editable&&(!a.isFunction(this.p.isCellEditable)||this.p.isCellEditable.call(this,this.p.colModel[f].name,b,f))){c=
f;break}!1!==c?a(this).jqGrid("editCell",b,c,!0):0<this.p.savedRow.length&&a(this).jqGrid("saveCell",b,e)}})},GridNav:function(){return this.each(function(){function b(b,d,e){if("v"===e.substr(0,1)){var f=a(c.grid.bDiv)[0].clientHeight,h=a(c.grid.bDiv)[0].scrollTop,g=c.rows[b].offsetTop+c.rows[b].clientHeight,k=c.rows[b].offsetTop;"vd"===e&&g>=f&&(a(c.grid.bDiv)[0].scrollTop=a(c.grid.bDiv)[0].scrollTop+c.rows[b].clientHeight);"vu"===e&&k<h&&(a(c.grid.bDiv)[0].scrollTop=a(c.grid.bDiv)[0].scrollTop-
c.rows[b].clientHeight)}"h"===e&&(e=a(c.grid.bDiv)[0].clientWidth,f=a(c.grid.bDiv)[0].scrollLeft,h=c.rows[b].cells[d].offsetLeft,c.rows[b].cells[d].offsetLeft+c.rows[b].cells[d].clientWidth>=e+parseInt(f,10)?a(c.grid.bDiv)[0].scrollLeft=a(c.grid.bDiv)[0].scrollLeft+c.rows[b].cells[d].clientWidth:h<f&&(a(c.grid.bDiv)[0].scrollLeft=a(c.grid.bDiv)[0].scrollLeft-c.rows[b].cells[d].clientWidth))}function e(a,b){var d,e;if("lft"===b)for(d=a+1,e=a;0<=e;e--)if(!0!==c.p.colModel[e].hidden){d=e;break}if("rgt"===
b)for(d=a-1,e=a;e<c.p.colModel.length;e++)if(!0!==c.p.colModel[e].hidden){d=e;break}return d}var c=this;if(c.grid&&!0===c.p.cellEdit){c.p.knv=c.p.id+"_kn";var f=a("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+c.p.knv+"'></div></div>"),g,d;a(f).insertBefore(c.grid.cDiv);a("#"+c.p.knv).focus().keydown(function(f){d=f.keyCode;"rtl"===c.p.direction&&(37===d?d=39:39===d&&(d=37));switch(d){case 38:0<c.p.iRow-1&&(b(c.p.iRow-
1,c.p.iCol,"vu"),a(c).jqGrid("editCell",c.p.iRow-1,c.p.iCol,!1));break;case 40:c.p.iRow+1<=c.rows.length-1&&(b(c.p.iRow+1,c.p.iCol,"vd"),a(c).jqGrid("editCell",c.p.iRow+1,c.p.iCol,!1));break;case 37:0<=c.p.iCol-1&&(g=e(c.p.iCol-1,"lft"),b(c.p.iRow,g,"h"),a(c).jqGrid("editCell",c.p.iRow,g,!1));break;case 39:c.p.iCol+1<=c.p.colModel.length-1&&(g=e(c.p.iCol+1,"rgt"),b(c.p.iRow,g,"h"),a(c).jqGrid("editCell",c.p.iRow,g,!1));break;case 13:0<=parseInt(c.p.iCol,10)&&0<=parseInt(c.p.iRow,10)&&a(c).jqGrid("editCell",
c.p.iRow,c.p.iCol,!0);break;default:return!0}return!1})}})},getChangedCells:function(b){var e=[];b||(b="all");this.each(function(){var c=this,f;c.grid&&!0===c.p.cellEdit&&a(c.rows).each(function(g){var d={};a(this).hasClass("edited")&&(a("td",this).each(function(e){f=c.p.colModel[e].name;if("cb"!==f&&"subgrid"!==f)if("dirty"===b){if(a(this).hasClass("dirty-cell"))try{d[f]=a.unformat.call(c,this,{rowId:c.rows[g].id,colModel:c.p.colModel[e]},e)}catch(k){d[f]=a.jgrid.htmlDecode(a(this).html())}}else try{d[f]=
a.unformat.call(c,this,{rowId:c.rows[g].id,colModel:c.p.colModel[e]},e)}catch(k){d[f]=a.jgrid.htmlDecode(a(this).html())}}),d.id=this.id,e.push(d))})});return e}});a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true");a.o&&a.o.remove()},hideModal:function(b,e){e=a.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},e||{});var c=e.gb&&"string"===typeof e.gb&&"#gbox_"===e.gb.substr(0,6)?a("#"+e.gb.substr(6))[0]:!1;if(e.onClose){var f=c?
e.onClose.call(c,b):e.onClose(b);if("boolean"===typeof f&&!f)return}if(e.formprop&&c&&e.form){var f=a(b)[0].style.height,g=a(b)[0].style.width;-1<f.indexOf("px")&&(f=parseFloat(f));-1<g.indexOf("px")&&(g=parseFloat(g));var d,h;"edit"===e.form?(d="#"+a.jgrid.jqID("FrmGrid_"+e.gb.substr(6)),h="formProp"):"view"===e.form&&(d="#"+a.jgrid.jqID("ViewGrid_"+e.gb.substr(6)),h="viewProp");a(c).data(h,{top:parseFloat(a(b).css("top")),left:parseFloat(a(b).css("left")),width:g,height:f,dataheight:a(d).height(),
datawidth:a(d).width()})}if(a.fn.jqm&&!0===e.jqm)a(b).attr("aria-hidden","true").jqmHide();else{if(""!==e.gb)try{a(".jqgrid-overlay:first",e.gb).hide()}catch(k){}a(b).hide().attr("aria-hidden","true")}e.removemodal&&a(b).remove()},findPos:function(b){b=a(b).offset();return[b.left,b.top]},createModal:function(b,e,c,f,g,d,h){c=a.extend(!0,{},a.jgrid.jqModal||{},c);var k=this,l="rtl"===a(c.gbox).attr("dir")?!0:!1,m=a.jgrid.styleUI[c.styleUI||"jQueryUI"].modal,q=a.jgrid.styleUI[c.styleUI||"jQueryUI"].common,
t=document.createElement("div");h=a.extend({},h||{});t.className="ui-jqdialog "+m.modal;t.id=b.themodal;var n=document.createElement("div");n.className="ui-jqdialog-titlebar "+m.header;n.id=b.modalhead;a(n).append("<span class='ui-jqdialog-title'>"+c.caption+"</span>");var u=a("<a class='ui-jqdialog-titlebar-close "+q.cornerall+"'></a>").hover(function(){u.addClass(q.hover)},function(){u.removeClass(q.hover)}).append("<span class='"+q.icon_base+" "+m.icon_close+"'></span>");a(n).append(u);l?(t.dir=
"rtl",a(".ui-jqdialog-title",n).css("float","right"),a(".ui-jqdialog-titlebar-close",n).css("left","0.3em")):(t.dir="ltr",a(".ui-jqdialog-title",n).css("float","left"),a(".ui-jqdialog-titlebar-close",n).css("right","0.3em"));var x=document.createElement("div");a(x).addClass("ui-jqdialog-content "+m.content).attr("id",b.modalcontent);a(x).append(e);t.appendChild(x);a(t).prepend(n);!0===d?a("body").append(t):"string"===typeof d?a(d).append(t):a(t).insertBefore(f);a(t).css(h);void 0===c.jqModal&&(c.jqModal=
!0);e={};if(a.fn.jqm&&!0===c.jqModal)0===c.left&&0===c.top&&c.overlay&&(h=[],h=a.jgrid.findPos(g),c.left=h[0]+4,c.top=h[1]+4),e.top=c.top+"px",e.left=c.left;else if(0!==c.left||0!==c.top)e.left=c.left,e.top=c.top+"px";a("a.ui-jqdialog-titlebar-close",n).click(function(){var d=a("#"+a.jgrid.jqID(b.themodal)).data("onClose")||c.onClose,e=a("#"+a.jgrid.jqID(b.themodal)).data("gbox")||c.gbox;k.hideModal("#"+a.jgrid.jqID(b.themodal),{gb:e,jqm:c.jqModal,onClose:d,removemodal:c.removemodal||!1,formprop:!c.recreateForm||
!1,form:c.form||""});return!1});0!==c.width&&c.width||(c.width=300);0!==c.height&&c.height||(c.height=200);c.zIndex||(f=a(f).parents("*[role=dialog]").filter(":first").css("z-index"),c.zIndex=f?parseInt(f,10)+2:950);f=0;l&&e.left&&!d&&(f=a(c.gbox).width()-(isNaN(c.width)?0:parseInt(c.width,10))-8,e.left=parseInt(e.left,10)+parseInt(f,10));e.left&&(e.left+="px");a(t).css(a.extend({width:isNaN(c.width)?"auto":c.width+"px",height:isNaN(c.height)?"auto":c.height+"px",zIndex:c.zIndex,overflow:"hidden"},
e)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":b.modalhead,"aria-hidden":"true"});void 0===c.drag&&(c.drag=!0);void 0===c.resize&&(c.resize=!0);if(c.drag)if(a(n).css("cursor","move"),a.fn.tinyDraggable)a(t).tinyDraggable({handle:"#"+a.jgrid.jqID(n.id)});else try{a(t).draggable({handle:a("#"+a.jgrid.jqID(n.id))})}catch(z){}if(c.resize)if(a.fn.jqResize)a(t).append("<div class='jqResize "+m.resizable+" "+q.icon_base+" "+m.icon_resizable+"'></div>"),a("#"+a.jgrid.jqID(b.themodal)).jqResize(".jqResize",
b.scrollelm?"#"+a.jgrid.jqID(b.scrollelm):!1);else try{a(t).resizable({handles:"se, sw",alsoResize:b.scrollelm?"#"+a.jgrid.jqID(b.scrollelm):!1})}catch(z){}!0===c.closeOnEscape&&a(t).keydown(function(d){27===d.which&&(d=a("#"+a.jgrid.jqID(b.themodal)).data("onClose")||c.onClose,k.hideModal("#"+a.jgrid.jqID(b.themodal),{gb:c.gbox,jqm:c.jqModal,onClose:d,removemodal:c.removemodal||!1,formprop:!c.recreateForm||!1,form:c.form||""}))})},viewModal:function(b,e){e=a.extend({toTop:!0,overlay:10,modal:!1,
overlayClass:"ui-widget-overlay",onShow:a.jgrid.showModal,onHide:a.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},e||{});void 0===e.focusField&&(e.focusField=0);e.focusField="number"===typeof e.focusField&&0<=e.focusField?parseInt(e.focusField,10):"boolean"!==typeof e.focusField||e.focusField?0:!1;if(a.fn.jqm&&!0===e.jqm)e.jqM?a(b).attr("aria-hidden","false").jqm(e).jqmShow():a(b).attr("aria-hidden","false").jqmShow();else if(""!==e.gbox&&(a(".jqgrid-overlay:first",e.gbox).show(),a(b).data("gbox",e.gbox)),
a(b).show().attr("aria-hidden","false"),0<=e.focusField)try{a(":input:visible",b)[parseInt(e.focusField,10)].focus()}catch(c){}},info_dialog:function(b,e,c,f){var g={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1E3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(!0,g,a.jgrid.jqModal||{},{caption:"<b>"+b+"</b>"},f||{});var d=g.jqModal,h=this;f=a.jgrid.styleUI[g.styleUI||"jQueryUI"].modal;var k=a.jgrid.styleUI[g.styleUI||
"jQueryUI"].common;a.fn.jqm&&!d&&(d=!1);b="";var l;if(0<g.buttons.length)for(l=0;l<g.buttons.length;l++)void 0===g.buttons[l].id&&(g.buttons[l].id="info_button_"+l),b+="<a id='"+g.buttons[l].id+"' class='fm-button "+k.button+"'>"+g.buttons[l].text+"</a>";e="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+(isNaN(g.dataheight)?g.dataheight:g.dataheight+"px")+";"+("text-align:"+g.align+";")+"'>"+e+"</div>")+(c?"<div class='"+
f.content+"' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+k.button+"'>"+c+"</a>"+b+"</div>":""!==b?"<div class='"+f.content+"' style='text-align:"+g.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+b+"</div>":"");e+="</div>";try{"false"===a("#info_dialog").attr("aria-hidden")&&a.jgrid.hideModal("#info_dialog",{jqm:d}),a("#info_dialog").remove()}catch(m){}a.jgrid.createModal({themodal:"info_dialog",
modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},e,g,"","",!0);b&&a.each(g.buttons,function(b){a("#"+a.jgrid.jqID(this.id),"#info_id").on("click",function(){g.buttons[b].onClick.call(a("#info_dialog"));return!1})});a("#closedialog","#info_id").on("click",function(){h.hideModal("#info_dialog",{jqm:d,onClose:a("#info_dialog").data("onClose")||g.onClose,gb:a("#info_dialog").data("gbox")||g.gbox});return!1});a(".fm-button","#info_dialog").hover(function(){a(this).addClass(k.hover)},
function(){a(this).removeClass(k.hover)});a.isFunction(g.beforeOpen)&&g.beforeOpen();a.jgrid.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove();a.o&&a.o.remove()},modal:g.modal,jqm:d});a.isFunction(g.afterOpen)&&g.afterOpen();try{a("#info_dialog").focus()}catch(m){}},bindEv:function(b,e){a.isFunction(e.dataInit)&&e.dataInit.call(this,b,e);e.dataEvents&&a.each(e.dataEvents,function(){if(void 0!==this.data)a(b).on(this.type,this.data,this.fn);else a(b).on(this.type,this.fn)})},createEl:function(b,
e,c,f,g){function d(b,c,d){var e="dataInit dataEvents dataUrl buildSelect sopt searchhidden defaultValue attr custom_element custom_value oper".split(" ");void 0!==d&&a.isArray(d)&&a.merge(e,d);a.each(c,function(c,d){-1===a.inArray(c,e)&&a(b).attr(c,d)});c.hasOwnProperty("id")||a(b).attr("id",a.jgrid.randId())}var h="",k=this;switch(b){case "textarea":h=document.createElement("textarea");f?e.cols||a(h).css({width:"98%"}):e.cols||(e.cols=20);e.rows||(e.rows=2);if("&nbsp;"===c||"&#160;"===c||1===c.length&&
160===c.charCodeAt(0))c="";h.value=c;d(h,e);a(h).attr({role:"textbox",multiline:"true"});break;case "checkbox":h=document.createElement("input");h.type="checkbox";if(e.value){var l=e.value.split(":");c===l[0]&&(h.checked=!0,h.defaultChecked=!0);h.value=l[0];a(h).attr("offval",l[1])}else l=(c+"").toLowerCase(),0>l.search(/(false|f|0|no|n|off|undefined)/i)&&""!==l?(h.checked=!0,h.defaultChecked=!0,h.value=c):h.value="on",a(h).attr("offval","off");d(h,e,["value"]);a(h).attr("role","checkbox");break;
case "select":h=document.createElement("select");h.setAttribute("role","select");f=[];!0===e.multiple?(b=!0,h.multiple="multiple",a(h).attr("aria-multiselectable","true")):b=!1;if(null!=e.dataUrl){var l=null,m=e.postData||g.postData;try{l=e.rowId}catch(u){}k.p&&k.p.idPrefix&&(l=a.jgrid.stripPref(k.p.idPrefix,l));a.ajax(a.extend({url:a.isFunction(e.dataUrl)?e.dataUrl.call(k,l,c,String(e.name)):e.dataUrl,type:"GET",dataType:"html",data:a.isFunction(m)?m.call(k,l,c,String(e.name)):m,context:{elem:h,
options:e,vl:c},success:function(b){var c=[],e=this.elem,f=this.vl,h=a.extend({},this.options),g=!0===h.multiple,l=!0===h.cacheUrlData,n="",q;b=a.isFunction(h.buildSelect)?h.buildSelect.call(k,b):b;"string"===typeof b&&(b=a(a.trim(b)).html());if(b){a(e).append(b);d(e,h,m?["postData"]:void 0);void 0===h.size&&(h.size=g?3:1);g?(c=f.split(","),c=a.map(c,function(b){return a.trim(b)})):c[0]=a.trim(f);a("option",e).each(function(b){q=a(this).text();f=a(this).val();l&&(n+=(0!==b?";":"")+f+":"+q);0===b&&
e.multiple&&(this.selected=!1);a(this).attr("role","option");if(-1<a.inArray(a.trim(q),c)||-1<a.inArray(a.trim(f),c))this.selected="selected"});if(l)if("edit"===h.oper)a(k).jqGrid("setColProp",h.name,{editoptions:{buildSelect:null,dataUrl:null,value:n}});else if("search"===h.oper)a(k).jqGrid("setColProp",h.name,{searchoptions:{dataUrl:null,value:n}});else if("filter"===h.oper&&a("#fbox_"+k.p.id)[0].p){var g=a("#fbox_"+k.p.id)[0].p.columns,u;a.each(g,function(a){u=this.index||this.name;if(h.name===
u)return this.searchoptions.dataUrl=null,this.searchoptions.value=n,!1})}a(k).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[e])}}},g||{}))}else if(e.value){void 0===e.size&&(e.size=b?3:1);b&&(f=c.split(","),f=a.map(f,function(b){return a.trim(b)}));"function"===typeof e.value&&(e.value=e.value());var q,t,n;n=void 0===e.separator?":":e.separator;g=void 0===e.delimiter?";":e.delimiter;if("string"===typeof e.value)for(l=e.value.split(g),g=0;g<l.length;g++)q=l[g].split(n),2<q.length&&(q[1]=a.map(q,
function(a,b){if(0<b)return a}).join(n)),t=document.createElement("option"),t.setAttribute("role","option"),t.value=q[0],t.innerHTML=q[1],h.appendChild(t),b||a.trim(q[0])!==a.trim(c)&&a.trim(q[1])!==a.trim(c)||(t.selected="selected"),b&&(-1<a.inArray(a.trim(q[1]),f)||-1<a.inArray(a.trim(q[0]),f))&&(t.selected="selected");else if("[object Array]"===Object.prototype.toString.call(e.value))for(n=e.value,g=0;g<n.length;g++)2===n[g].length&&(l=n[g][0],q=n[g][1],t=document.createElement("option"),t.setAttribute("role",
"option"),t.value=l,t.innerHTML=q,h.appendChild(t),b||a.trim(l)!==a.trim(c)&&a.trim(q)!==a.trim(c)||(t.selected="selected"),b&&(-1<a.inArray(a.trim(q),f)||-1<a.inArray(a.trim(l),f))&&(t.selected="selected"));else if("object"===typeof e.value)for(l in n=e.value,n)n.hasOwnProperty(l)&&(t=document.createElement("option"),t.setAttribute("role","option"),t.value=l,t.innerHTML=n[l],h.appendChild(t),b||a.trim(l)!==a.trim(c)&&a.trim(n[l])!==a.trim(c)||(t.selected="selected"),b&&(-1<a.inArray(a.trim(n[l]),
f)||-1<a.inArray(a.trim(l),f))&&(t.selected="selected"));d(h,e,["value"])}break;case "image":case "file":h=document.createElement("input");h.type=b;d(h,e);break;case "custom":h=document.createElement("span");try{if(a.isFunction(e.custom_element))if(t=e.custom_element.call(k,c,e))t=a(t).addClass("customelement").attr({id:e.id,name:e.name}),a(h).empty().append(t);else throw"e2";else throw"e1";}catch(u){e=a.jgrid.getRegional(k,"errors"),c=a.jgrid.getRegional(k,"edit"),"e1"===u?a.jgrid.info_dialog(e.errcap,
"function 'custom_element' "+c.msg.nodefined,c.bClose,{styleUI:k.p.styleUI}):"e2"===u?a.jgrid.info_dialog(e.errcap,"function 'custom_element' "+c.msg.novalue,c.bClose,{styleUI:k.p.styleUI}):a.jgrid.info_dialog(e.errcap,"string"===typeof u?u:u.message,c.bClose,{styleUI:k.p.styleUI})}break;default:l="button"===b?"button":"textbox",h=document.createElement("input"),h.type=b,h.value=c,d(h,e),"button"!==b&&(f?e.size||a(h).css({width:"100%"}):e.size||(e.size=20)),a(h).attr("role",l)}return h},checkDate:function(a,
e){var b={},f;a=a.toLowerCase();f=-1!==a.indexOf("/")?"/":-1!==a.indexOf("-")?"-":-1!==a.indexOf(".")?".":"/";a=a.split(f);e=e.split(f);if(3!==e.length)return!1;var g=-1,d,h=f=-1,k;for(k=0;k<a.length;k++)d=isNaN(e[k])?0:parseInt(e[k],10),b[a[k]]=d,d=a[k],-1!==d.indexOf("y")&&(g=k),-1!==d.indexOf("m")&&(h=k),-1!==d.indexOf("d")&&(f=k);d="y"===a[g]||"yyyy"===a[g]?4:"yy"===a[g]?2:-1;k=[0,31,29,31,30,31,30,31,31,30,31,30,31];var l;if(-1===g)return!1;l=b[a[g]].toString();2===d&&1===l.length&&(d=1);if(l.length!==
d||0===b[a[g]]&&"00"!==e[g]||-1===h)return!1;l=b[a[h]].toString();if(1>l.length||1>b[a[h]]||12<b[a[h]]||-1===f)return!1;l=b[a[f]].toString();!(e=1>l.length||1>b[a[f]]||31<b[a[f]])&&(e=2===b[a[h]])&&(g=b[a[g]],e=b[a[f]]>(0!==g%4||0===g%100&&0!==g%400?28:29));return e||b[a[f]]>k[b[a[h]]]?!1:!0},isEmpty:function(a){return void 0===a||a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(b){var e=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!a.jgrid.isEmpty(b))if(b=b.match(e)){if(b[3]){if(1>b[1]||12<b[1])return!1}else if(23<
b[1])return!1;if(59<b[2])return!1}else return!1;return!0},checkValues:function(b,e,c,f){var g,d,h;h=this.p.colModel;var k=a.jgrid.getRegional(this,"edit.msg");if(void 0===c)if("string"===typeof e)for(c=0,f=h.length;c<f;c++){if(h[c].name===e){g=h[c].editrules;e=c;null!=h[c].formoptions&&(d=h[c].formoptions.label);break}}else 0<=e&&(g=h[e].editrules);else g=c,d=void 0===f?"_":f;if(g){d||(d=null!=this.p.colNames?this.p.colNames[e]:h[e].label);if(!0===g.required&&a.jgrid.isEmpty(b))return[!1,d+": "+k.required,
""];c=!1===g.required?!1:!0;if(!0===g.number&&(!1!==c||!a.jgrid.isEmpty(b))&&isNaN(b))return[!1,d+": "+k.number,""];if(void 0!==g.minValue&&!isNaN(g.minValue)&&parseFloat(b)<parseFloat(g.minValue))return[!1,d+": "+k.minValue+" "+g.minValue,""];if(void 0!==g.maxValue&&!isNaN(g.maxValue)&&parseFloat(b)>parseFloat(g.maxValue))return[!1,d+": "+k.maxValue+" "+g.maxValue,""];if(!(!0!==g.email||!1===c&&a.jgrid.isEmpty(b)||(f=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
f.test(b))))return[!1,d+": "+k.email,""];if(!(!0!==g.integer||!1===c&&a.jgrid.isEmpty(b)||!isNaN(b)&&0===b%1&&-1===b.indexOf(".")))return[!1,d+": "+k.integer,""];if(!(!0!==g.date||!1===c&&a.jgrid.isEmpty(b)||(h[e].formatoptions&&h[e].formatoptions.newformat?(h=h[e].formatoptions.newformat,(f=a.jgrid.getRegional(this,"formatter.date.masks"))&&f.hasOwnProperty(h)&&(h=f[h])):h=h[e].datefmt||"Y-m-d",a.jgrid.checkDate(h,b))))return[!1,d+": "+k.date+" - "+h,""];if(!0===g.time&&!(!1===c&&a.jgrid.isEmpty(b)||
a.jgrid.checkTime(b)))return[!1,d+": "+k.date+" - hh:mm (am/pm)",""];if(!(!0!==g.url||!1===c&&a.jgrid.isEmpty(b)||(f=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,f.test(b))))return[!1,d+": "+k.url,""];if(!0===g.custom&&(!1!==c||!a.jgrid.isEmpty(b)))return a.isFunction(g.custom_func)?(b=g.custom_func.call(this,b,d,e),a.isArray(b)?b:[!1,k.customarray,""]):[!1,k.customfcheck,""]}return[!0,"",""]}});a.fn.jqFilter=function(b){if("string"===
typeof b){var e=a.fn.jqFilter[b];if(!e)throw"jqFilter - No such method: "+b;var c=a.makeArray(arguments).slice(1);return e.apply(this,c)}var f=a.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:"eq ne lt le gt ge nu nn in ni".split(" "),stropts:"eq ne bw bn ew en cn nc nu nn in ni".split(" "),strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",
text:"OR"}],groupButton:!0,ruleButtons:!0,uniqueSearchFields:!1,direction:"ltr",addsubgrup:"Add subgroup",addrule:"Add rule",delgroup:"Delete group",delrule:"Delete rule"},a.jgrid.filter,b||{});return this.each(function(){if(!this.filter){this.p=f;if(null===this.p.filter||void 0===this.p.filter)this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]};null!=this.p.sortStrategy&&a.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy);var b,c=this.p.columns.length,e,k=/msie/i.test(navigator.userAgent)&&
!window.opera;this.p.initFilter=a.extend(!0,{},this.p.filter);if(c){for(b=0;b<c;b++)e=this.p.columns[b],e.stype?e.inputtype=e.stype:e.inputtype||(e.inputtype="text"),e.sorttype?e.searchtype=e.sorttype:e.searchtype||(e.searchtype="string"),void 0===e.hidden&&(e.hidden=!1),e.label||(e.label=e.name),e.index&&(e.name=e.index),e.hasOwnProperty("searchoptions")||(e.searchoptions={}),e.hasOwnProperty("searchrules")||(e.searchrules={}),e.inlist=void 0===e.search?!0:e.search;var l=function(){return a("#"+
a.jgrid.jqID(f.id))[0]||null};b=l();var m=a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].filter,q=a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].common;this.p.showQuery&&a(this).append("<table class='queryresult "+m.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var t=function(b,c){var d=[!0,""],e=l();if(a.isFunction(c.searchrules))d=c.searchrules.call(e,b,c);else if(a.jgrid&&a.jgrid.checkValues)try{d=
a.jgrid.checkValues.call(e,b,-1,c.searchrules,c.label)}catch(p){}d&&d.length&&!1===d[0]&&(f.error=!d[0],f.errmsg=d[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){a("table.group:first",this).remove();var b=this.createTableForGroup(f.filter,null);a(this).append(b);a.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(b,c){var d=this,e,
h=a("<table class='group "+m.table_widget+" ui-search-table' style='border:0px none;'><tbody></tbody></table>"),g="left";"rtl"===this.p.direction&&(g="right",h.attr("dir","rtl"));null===c&&h.append("<tr class='error' style='display:none;'><th colspan='5' class='"+q.error+"' align='"+g+"'></th></tr>");var k=a("<tr></tr>");h.append(k);g=a("<th colspan='5' align='"+g+"'></th>");k.append(g);if(!0===this.p.ruleButtons){var l=a("<select class='opsel "+m.srSelect+"'></select>");g.append(l);var k="",n;for(e=
0;e<f.groupOps.length;e++)n=b.groupOp===d.p.groupOps[e].op?" selected='selected'":"",k+="<option value='"+d.p.groupOps[e].op+"'"+n+">"+d.p.groupOps[e].text+"</option>";l.append(k).on("change",function(){b.groupOp=a(l).val();d.onchange()})}k="<span></span>";this.p.groupButton&&(k=a("<input type='button' value='+ {}' title='"+d.p.subgroup+"' class='add-group "+q.button+"'/>"),k.on("click",function(){void 0===b.groups&&(b.groups=[]);b.groups.push({groupOp:f.groupOps[0].op,rules:[],groups:[]});d.reDraw();
d.onchange();return!1}));g.append(k);if(!0===this.p.ruleButtons){var k=a("<input type='button' value='+' title='"+d.p.addrule+"' class='add-rule ui-add "+q.button+"'/>"),u;k.on("click",function(){void 0===b.rules&&(b.rules=[]);for(e=0;e<d.p.columns.length;e++){var c=void 0===d.p.columns[e].search?!0:d.p.columns[e].search,f=!0===d.p.columns[e].hidden;if(!0===d.p.columns[e].searchoptions.searchhidden&&c||c&&!f){u=d.p.columns[e];break}}if(!u)return!1;c=u.searchoptions.sopt?u.searchoptions.sopt:d.p.sopt?
d.p.sopt:-1!==a.inArray(u.searchtype,d.p.strarr)?d.p.stropts:d.p.numopts;b.rules.push({field:u.name,op:c[0],data:""});d.reDraw();return!1});g.append(k)}null!==c&&(k=a("<input type='button' value='-' title='"+d.p.delgroup+"' class='delete-group "+q.button+"'/>"),g.append(k),k.on("click",function(){for(e=0;e<c.groups.length;e++)if(c.groups[e]===b){c.groups.splice(e,1);break}d.reDraw();d.onchange();return!1}));if(void 0!==b.groups)for(e=0;e<b.groups.length;e++)g=a("<tr></tr>"),h.append(g),k=a("<td class='first'></td>"),
g.append(k),k=a("<td colspan='4'></td>"),k.append(this.createTableForGroup(b.groups[e],b)),g.append(k);void 0===b.groupOp&&(b.groupOp=d.p.groupOps[0].op);if(g=d.p.ruleButtons&&d.p.uniqueSearchFields)for(k=0;k<d.p.columns.length;k++)d.p.columns[k].inlist&&(d.p.columns[k].search=!0);if(void 0!==b.rules)for(e=0;e<b.rules.length;e++)if(h.append(this.createTableRowForRule(b.rules[e],b)),g)for(n=b.rules[e].field,k=0;k<d.p.columns.length;k++)if(n===d.p.columns[k].name){d.p.columns[k].search=!1;break}return h};
this.createTableRowForRule=function(b,c){var d=this,e=l(),h=a("<tr></tr>"),g,n,u,t,r="",v;h.append("<td class='first'></td>");var F=a("<td class='columns'></td>");h.append(F);var H=a("<select class='"+m.srSelect+"'></select>"),D,y=[];F.append(H);H.on("change",function(){if(d.p.ruleButtons&&d.p.uniqueSearchFields){var c=parseInt(a(this).data("curr"),10),f=this.selectedIndex;0<=c&&(d.p.columns[c].search=!0,a(this).data("curr",f),d.p.columns[f].search=!1)}b.field=a(H).val();u=a(this).parents("tr:first");
a(".data",u).empty();for(g=0;g<d.p.columns.length;g++)if(d.p.columns[g].name===b.field){t=d.p.columns[g];break}if(t){t.searchoptions.id=a.jgrid.randId();t.searchoptions.name=b.field;t.searchoptions.oper="filter";k&&"text"===t.inputtype&&!t.searchoptions.size&&(t.searchoptions.size=10);var h=a.jgrid.createEl.call(e,t.inputtype,t.searchoptions,"",!0,d.p.ajaxSelectOptions||{},!0);a(h).addClass("input-elm "+m.srInput);n=t.searchoptions.sopt?t.searchoptions.sopt:d.p.sopt?d.p.sopt:-1!==a.inArray(t.searchtype,
d.p.strarr)?d.p.stropts:d.p.numopts;c="";f=0;y=[];a.each(d.p.ops,function(){y.push(this.oper)});for(g=0;g<n.length;g++)D=a.inArray(n[g],y),-1!==D&&(0===f&&(b.op=d.p.ops[D].oper),c+="<option value='"+d.p.ops[D].oper+"'>"+d.p.ops[D].text+"</option>",f++);a(".selectopts",u).empty().append(c);a(".selectopts",u)[0].selectedIndex=0;a.jgrid.msie()&&9>a.jgrid.msiever()&&(c=parseInt(a("select.selectopts",u)[0].offsetWidth,10)+1,a(".selectopts",u).width(c),a(".selectopts",u).css("width","auto"));a(".data",
u).append(h);a.jgrid.bindEv.call(e,h,t.searchoptions);a(".input-elm",u).on("change",function(c){c=c.target;b.data="SPAN"===c.nodeName.toUpperCase()&&t.searchoptions&&a.isFunction(t.searchoptions.custom_value)?t.searchoptions.custom_value.call(e,a(c).children(".customelement:first"),"get"):c.value;d.onchange()});setTimeout(function(){b.data=a(h).val();d.onchange()},0)}});for(g=F=0;g<d.p.columns.length;g++){v=void 0===d.p.columns[g].search?!0:d.p.columns[g].search;var I=!0===d.p.columns[g].hidden;if(!0===
d.p.columns[g].searchoptions.searchhidden&&v||v&&!I)v="",b.field===d.p.columns[g].name&&(v=" selected='selected'",F=g),r+="<option value='"+d.p.columns[g].name+"'"+v+">"+d.p.columns[g].label+"</option>"}H.append(r);H.data("curr",F);r=a("<td class='operators'></td>");h.append(r);t=f.columns[F];t.searchoptions.id=a.jgrid.randId();k&&"text"===t.inputtype&&!t.searchoptions.size&&(t.searchoptions.size=10);t.searchoptions.name=b.field;t.searchoptions.oper="filter";F=a.jgrid.createEl.call(e,t.inputtype,
t.searchoptions,b.data,!0,d.p.ajaxSelectOptions||{},!0);if("nu"===b.op||"nn"===b.op)a(F).attr("readonly","true"),a(F).attr("disabled","true");var G=a("<select class='selectopts "+m.srSelect+"'></select>");r.append(G);G.on("change",function(){b.op=a(G).val();u=a(this).parents("tr:first");var c=a(".input-elm",u)[0];"nu"===b.op||"nn"===b.op?(b.data="","SELECT"!==c.tagName.toUpperCase()&&(c.value=""),c.setAttribute("readonly","true"),c.setAttribute("disabled","true")):("SELECT"===c.tagName.toUpperCase()&&
(b.data=c.value),c.removeAttribute("readonly"),c.removeAttribute("disabled"));d.onchange()});n=t.searchoptions.sopt?t.searchoptions.sopt:d.p.sopt?d.p.sopt:-1!==a.inArray(t.searchtype,d.p.strarr)?d.p.stropts:d.p.numopts;r="";a.each(d.p.ops,function(){y.push(this.oper)});for(g=0;g<n.length;g++)D=a.inArray(n[g],y),-1!==D&&(v=b.op===d.p.ops[D].oper?" selected='selected'":"",r+="<option value='"+d.p.ops[D].oper+"'"+v+">"+d.p.ops[D].text+"</option>");G.append(r);r=a("<td class='data'></td>");h.append(r);
r.append(F);a.jgrid.bindEv.call(e,F,t.searchoptions);a(F).addClass("input-elm "+m.srInput).on("change",function(){b.data="custom"===t.inputtype?t.searchoptions.custom_value.call(e,a(this).children(".customelement:first"),"get"):a(this).val();d.onchange()});r=a("<td></td>");h.append(r);!0===this.p.ruleButtons&&(F=a("<input type='button' value='-' title='"+d.p.delrule+"' class='delete-rule ui-del "+q.button+"'/>"),r.append(F),F.on("click",function(){for(g=0;g<c.rules.length;g++)if(c.rules[g]===b){c.rules.splice(g,
1);break}d.reDraw();d.onchange();return!1}));return h};this.getStringForGroup=function(a){var b="(",c;if(void 0!==a.groups)for(c=0;c<a.groups.length;c++){1<b.length&&(b+=" "+a.groupOp+" ");try{b+=this.getStringForGroup(a.groups[c])}catch(z){alert(z)}}if(void 0!==a.rules)try{for(c=0;c<a.rules.length;c++)1<b.length&&(b+=" "+a.groupOp+" "),b+=this.getStringForRule(a.rules[c])}catch(z){alert(z)}b+=")";return"()"===b?"":b};this.getStringForRule=function(b){var c="",d="",e,h;for(e=0;e<this.p.ops.length;e++)if(this.p.ops[e].oper===
b.op){c=this.p.operands.hasOwnProperty(b.op)?this.p.operands[b.op]:"";d=this.p.ops[e].oper;break}for(e=0;e<this.p.columns.length;e++)if(this.p.columns[e].name===b.field){h=this.p.columns[e];break}if(void 0===h)return"";e=b.data;if("bw"===d||"bn"===d)e+="%";if("ew"===d||"en"===d)e="%"+e;if("cn"===d||"nc"===d)e="%"+e+"%";if("in"===d||"ni"===d)e=" ("+e+")";f.errorcheck&&t(b.data,h);return-1!==a.inArray(h.searchtype,["int","integer","float","number","currency"])||"nn"===d||"nu"===d?b.field+" "+c+" "+
e:b.field+" "+c+' "'+e+'"'};this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){a("th."+q.error,this).html("");a("tr.error",this).hide()};this.showError=function(){a("th."+q.error,this).html(this.p.errmsg);a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){function a(c){var d="(",e;if(void 0!==c.groups)for(e=0;e<c.groups.length;e++)1<d.length&&
(d="OR"===c.groupOp?d+" || ":d+" && "),d+=a(c.groups[e]);if(void 0!==c.rules)for(e=0;e<c.rules.length;e++){1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && ");var f=void 0,h,g=c.rules[e];if(b.p.errorcheck){for(h=0;h<b.p.columns.length;h++)if(b.p.columns[h].name===g.field){f=b.p.columns[h];break}f&&t(g.data,f)}d+=g.op+"(item."+g.field+",'"+g.data+"')"}d+=")";return"()"===d?"":d}var b=this;return a(this.p.filter)};this.reDraw();if(this.p.showQuery)this.onchange();this.filter=!0}}})};a.extend(a.fn.jqFilter,
{toSQLString:function(){var a="";this.each(function(){a=this.toUserFriendlyString()});return a},filterData:function(){var a;this.each(function(){a=this.p.filter});return a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(b){"string"===typeof b&&(b=a.jgrid.parse(b));this.each(function(){this.p.filter=b;this.reDraw();this.onchange()})}});a.jgrid.extend({filterToolbar:function(b){var e=
a.jgrid.getRegional(this[0],"search");b=a.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,onClearSearchValue:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",splitSelect:",",groupOpSelect:"OR",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#",bt:"..."}},e,b||{});return this.each(function(){var c=
this;if(!c.p.filterToolbar){a(c).data("filterToolbar")||a(c).data("filterToolbar",b);c.p.force_regional&&(b=a.extend(b,e));var f=a.jgrid.styleUI[c.p.styleUI||"jQueryUI"].filter,g=a.jgrid.styleUI[c.p.styleUI||"jQueryUI"].common,d=a.jgrid.styleUI[c.p.styleUI||"jQueryUI"].base,h=function(){var d={},e=0,f,h,g={},k,l=!1,m=[],q=!1,t;a.each(c.p.colModel,function(){var n=a("#gs_"+c.p.idPrefix+a.jgrid.jqID(this.name),!0===this.frozen&&!0===c.p.frozenColumns?c.grid.fhDiv:c.grid.hDiv);h=this.index||this.name;
t=this.searchoptions||{};k=b.searchOperators&&t.searchOperMenu?n.parent().prev().children("a").attr("soper")||b.defaultSearch:t.sopt?t.sopt[0]:"select"===this.stype?"eq":b.defaultSearch;f="custom"===this.stype&&a.isFunction(t.custom_value)&&0<n.length&&"SPAN"===n[0].nodeName.toUpperCase()?t.custom_value.call(c,n.children(".customelement:first"),"get"):n.val();"select"===this.stype&&t.multiple&&a.isArray(f)&&f.length&&(l=!0,m.push(h),f=1===f.length?f[0]:f);"bt"===k&&(q=!0);if(f||"nu"===k||"nn"===k)d[h]=
f,g[h]=k,e++;else try{delete c.p.postData[h]}catch(Y){}});var r=0<e?!0:!1;if(!0===b.stringResult||"local"===c.p.datatype||!0===b.searchOperators){var F='{"groupOp":"'+b.groupOp+'","rules":[',H=0;a.each(d,function(a,b){0<H&&(F+=",");F+='{"field":"'+a+'",';F+='"op":"'+g[a]+'",';F+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';H++});var F=F+"]}",D,y,I,G,J,M,Q;if(l&&(D=a.jgrid.parse(F),D.rules&&D.rules.length))for(y=D.rules,I=0;I<y.length;I++)J=y[I],a.inArray(J.filed,m)&&(M=J.data.split(b.splitSelect),
1<M.length&&(void 0===D.groups&&(D.groups=[]),Q={groupOp:b.groupOpSelect,groups:[],rules:[]},D.groups.push(Q),a.each(M,function(a){(G=M[a])&&Q.rules.push({data:M[a],op:J.op,field:J.field})}),y.splice(I,1),I--));if(q&&(a.isPlainObject(D)||(D=a.jgrid.parse(F)),D.rules&&D.rules.length))for(y=D.rules,I=0;I<y.length;I++)J=y[I],"bt"===J.op&&(M=J.data.split("..."),1<M.length&&(void 0===D.groups&&(D.groups=[]),Q={groupOp:"AND",groups:[],rules:[]},D.groups.push(Q),a.each(M,function(a){(G=M[a])&&Q.rules.push({data:M[a],
op:0===a?"ge":"le",field:J.field})}),y.splice(I,1),I--));if(q||l)F=JSON.stringify(D);a.extend(c.p.postData,{filters:F});a.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else a.extend(c.p.postData,d);var P;c.p.searchurl&&(P=c.p.url,a(c).jqGrid("setGridParam",{url:c.p.searchurl}));D="stop"===a(c).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!D&&a.isFunction(b.beforeSearch)&&(D=b.beforeSearch.call(c));D||a(c).jqGrid("setGridParam",
{search:r}).trigger("reloadGrid",[{page:1}]);P&&a(c).jqGrid("setGridParam",{url:P});a(c).triggerHandler("jqGridToolbarAfterSearch");a.isFunction(b.afterSearch)&&b.afterSearch.call(c)},k=function(d,e,k){a("#sopt_menu").remove();e=parseInt(e,10);k=parseInt(k,10)+18;e='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+(a(".ui-jqgrid-view").css("font-size")||"11px")+";left:"+e+"px;top:"+k+'px;">';k=a(d).attr("soper");var l,m=[],n,q=0,t=a(d).attr("colname");
for(l=c.p.colModel.length;q<l&&c.p.colModel[q].name!==t;)q++;q=c.p.colModel[q];t=a.extend({},q.searchoptions);t.sopt||(t.sopt=[],t.sopt[0]="select"===q.stype?"eq":b.defaultSearch);a.each(b.odata,function(){m.push(this.oper)});for(q=0;q<t.sopt.length;q++)n=a.inArray(t.sopt[q],m),-1!==n&&(l=k===b.odata[n].oper?g.highlight:"",e+='<li class="ui-menu-item '+l+'" role="presentation"><a class="'+g.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+b.odata[n].oper+'" oper="'+b.operands[b.odata[n].oper]+
'"><table class="ui-common-table"><tr><td width="25px">'+b.operands[b.odata[n].oper]+"</td><td>"+b.odata[n].text+"</td></tr></table></a></li>");e+="</ul>";a("body").append(e);a("#sopt_menu").addClass("ui-menu "+f.menu_widget);a("#sopt_menu > li > a").hover(function(){a(this).addClass(g.hover)},function(){a(this).removeClass(g.hover)}).click(function(){var e=a(this).attr("value"),f=a(this).attr("oper");a(c).triggerHandler("jqGridToolbarSelectOper",[e,f,d]);a("#sopt_menu").hide();a(d).text(f).attr("soper",
e);!0===b.autosearch&&(f=a(d).parent().next().children()[0],(a(f).val()||"nu"===e||"nn"===e)&&h())})},l=a("<tr class='ui-search-toolbar' role='row'></tr>"),m,q,t;b.restoreFromFilters&&(t=c.p.postData.filters)&&("string"===typeof t&&(t=a.jgrid.parse(t)),q=t.rules.length?t.rules:!1);a.each(c.p.colModel,function(e){var g,k="",n="=",p,t,r=a("<th role='columnheader' class='"+d.headerBox+" ui-th-"+c.p.direction+"' id='gsh_"+c.p.id+"_"+this.name+"' ></th>"),C=a("<div></div>"),E=a("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''></td><td class='ui-search-input' headers=''></td><td class='ui-search-clear' headers=''></td></tr></table>");
!0===this.hidden&&a(r).css("display","none");this.search=!1===this.search?!1:!0;void 0===this.stype&&(this.stype="text");this.searchoptions=this.searchoptions||{};void 0===this.searchoptions.searchOperMenu&&(this.searchoptions.searchOperMenu=!0);g=a.extend({},this.searchoptions,{name:this.index||this.name,id:"gs_"+c.p.idPrefix+this.name,oper:"search"});if(this.search){if(b.restoreFromFilters&&q)for(t=!1,p=0;p<q.length;p++)if(q[p].field&&(this.index||this.name)===q[p].field){t=q[p];break}if(b.searchOperators){k=
g.sopt?g.sopt[0]:"select"===this.stype?"eq":b.defaultSearch;b.restoreFromFilters&&t&&(k=t.op);for(p=0;p<b.odata.length;p++)if(b.odata[p].oper===k){n=b.operands[k]||"";break}p=null!=g.searchtitle?g.searchtitle:b.operandTitle;k=this.searchoptions.searchOperMenu?"<a title='"+p+"' style='padding-right: 0.5em;' soper='"+k+"' class='soptclass' colname='"+this.name+"'>"+n+"</a>":""}a("td:eq(0)",E).attr("colindex",e).append(k);void 0===g.clearSearch&&(g.clearSearch=!0);g.clearSearch?(e=b.resetTitle||"Clear Search Value",
a("td:eq(2)",E).append("<a title='"+e+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+b.resetIcon+"</a>")):a("td:eq(2)",E).hide();this.surl&&(g.dataUrl=this.surl);e="";g.defaultValue&&(e=a.isFunction(g.defaultValue)?g.defaultValue.call(c):g.defaultValue);b.restoreFromFilters&&t&&(e=t.data);t=a.jgrid.createEl.call(c,this.stype,g,e,!1,a.extend({},a.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{}));a(t).addClass(f.srInput);a("td:eq(1)",E).append(t);a(C).append(E);null==g.dataEvents&&
(g.dataEvents=[]);switch(this.stype){case "select":!0===b.autosearch&&g.dataEvents.push({type:"change",fn:function(){h();return!1}});break;case "text":!0===b.autosearch&&(b.searchOnEnter?g.dataEvents.push({type:"keypress",fn:function(a){return 13===(a.charCode||a.keyCode||0)?(h(),!1):this}}):g.dataEvents.push({type:"keydown",fn:function(a){switch(a.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:m&&clearTimeout(m),m=setTimeout(function(){h()},b.autosearchDelay)}}}))}a.jgrid.bindEv.call(c,
t,g)}a(r).append(C);a(l).append(r);b.searchOperators&&""!==k||a("td:eq(0)",E).hide()});a("table thead",c.grid.hDiv).append(l);b.searchOperators&&(a(".soptclass",l).click(function(b){var c=a(this).offset();k(this,c.left,c.top);b.stopPropagation()}),a("body").on("click",function(b){"soptclass"!==b.target.className&&a("#sopt_menu").remove()}));a(".clearsearchclass",l).click(function(){var d=a(this).parents("tr:first"),e=parseInt(a("td.ui-search-oper",d).attr("colindex"),10),f=a.extend({},c.p.colModel[e].searchoptions||
{}),g=f.defaultValue?f.defaultValue:"";"select"===c.p.colModel[e].stype?(d=a("td.ui-search-input select",d),g?d.val(g):d[0].selectedIndex=0):(d=a("td.ui-search-input input",d),d.val(g));a(c).triggerHandler("jqGridToolbarClearVal",[d[0],e,f,g]);a.isFunction(b.onClearSearchValue)&&b.onClearSearchValue.call(c,d[0],e,f,g);!0===b.autosearch&&h()});this.p.filterToolbar=!0;this.triggerToolbar=h;this.clearToolbar=function(d){var e={},f=0,h;d="boolean"!==typeof d?!0:d;a.each(c.p.colModel,function(){var b,
d=a("#gs_"+c.p.idPrefix+a.jgrid.jqID(this.name),!0===this.frozen&&!0===c.p.frozenColumns?c.grid.fhDiv:c.grid.hDiv);this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(b=this.searchoptions.defaultValue);h=this.index||this.name;switch(this.stype){case "select":d.find("option").each(function(c){0===c&&(this.selected=!0);if(a(this).val()===b)return this.selected=!0,!1});if(void 0!==b)e[h]=b,f++;else try{delete c.p.postData[h]}catch(F){}break;case "text":d.val(b||"");if(void 0!==b)e[h]=b,f++;
else try{delete c.p.postData[h]}catch(F){}break;case "custom":a.isFunction(this.searchoptions.custom_value)&&0<d.length&&"SPAN"===d[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(c,d.children(".customelement:first"),"set",b||"")}});var g=0<f?!0:!1;c.p.resetsearch=!0;if(!0===b.stringResult||"local"===c.p.datatype){var k='{"groupOp":"'+b.groupOp+'","rules":[',l=0;a.each(e,function(a,b){0<l&&(k+=",");k+='{"field":"'+a+'",';k+='"op":"eq",';k+='"data":"'+(b+"").replace(/\\/g,"\\\\").replace(/\"/g,
'\\"')+'"}';l++});k+="]}";a.extend(c.p.postData,{filters:k});a.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else a.extend(c.p.postData,e);var m;c.p.searchurl&&(m=c.p.url,a(c).jqGrid("setGridParam",{url:c.p.searchurl}));var n="stop"===a(c).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!n&&a.isFunction(b.beforeClear)&&(n=b.beforeClear.call(c));n||d&&a(c).jqGrid("setGridParam",{search:g}).trigger("reloadGrid",[{page:1}]);m&&
a(c).jqGrid("setGridParam",{url:m});a(c).triggerHandler("jqGridToolbarAfterClear");a.isFunction(b.afterClear)&&b.afterClear()};this.toggleToolbar=function(){var b=a("tr.ui-search-toolbar",c.grid.hDiv),d=!0===c.p.frozenColumns?a("tr.ui-search-toolbar",c.grid.fhDiv):!1;"none"===b.css("display")?(b.show(),d&&d.show()):(b.hide(),d&&d.hide())}}})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.p.filterToolbar=
!1,a(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},refreshFilterToolbar:function(b){b=a.extend(!0,{filters:"",onClearVal:null,onSetVal:null},b||{});return this.each(function(){function e(k){if(k&&k.rules){l=k.rules;d=l.length;for(g=0;g<d;g++)m=l[g],t=a.inArray(m.field,q),-1!==t&&(h=a("#gs_"+c.p.idPrefix+a.jgrid.jqID(f[t].name)),0<h.length&&("select"===f[t].stype?h.find("option[value='"+a.jgrid.jqID(m.data)+"']").prop("selected",!0):"text"===f[t].stype&&h.val(m.data),a.isFunction(b.onSetVal)&&
b.onSetVal.call(c,h,f[t].name)));if(k.groups)for(var n=0;n<k.groups.length;n++)e(k.groups[n])}}var c=this,f=c.p.colModel,g,d=c.p.colModel.length,h,k,l,m,q=[],t;if(c.p.filterToolbar){for(g=0;g<d;g++){q.push(f[g].name);h=a("#gs_"+c.p.idPrefix+a.jgrid.jqID(f[g].name));switch(f[g].stype){case "select":case "text":h.val("")}a.isFunction(b.onClearVal)&&b.onClearVal.call(c,h,f[g].name)}"string"===typeof b.filters&&b.filters.length&&(k=a.jgrid.parse(b.filters));a.isPlainObject(k)&&e(k)}})},searchGrid:function(b){var e=
a.jgrid.getRegional(this[0],"search");b=a.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,
sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},e,b||{});return this.each(function(){function c(c){d=a(e).triggerHandler("jqGridFilterBeforeShow",[c]);void 0===d&&(d=!0);d&&a.isFunction(b.beforeShowSearch)&&
(d=b.beforeShowSearch.call(e,c));d&&(a.jgrid.viewModal("#"+a.jgrid.jqID(k.themodal),{gbox:"#gbox_"+a.jgrid.jqID(g),jqm:b.jqModal,modal:b.modal,overlay:b.overlay,toTop:b.toTop}),a(e).triggerHandler("jqGridFilterAfterShow",[c]),a.isFunction(b.afterShowSearch)&&b.afterShowSearch.call(e,c))}var e=this;if(e.grid){var g="fbox_"+e.p.id,d=!0,h=!0,k={themodal:"searchmod"+g,modalhead:"searchhd"+g,modalcontent:"searchcnt"+g,scrollelm:g},l=e.p.postData[b.sFilter],m,q=a.jgrid.styleUI[e.p.styleUI||"jQueryUI"].filter,
t=a.jgrid.styleUI[e.p.styleUI||"jQueryUI"].common;b.styleUI=e.p.styleUI;"string"===typeof l&&(l=a.jgrid.parse(l));!0===b.recreateFilter&&a("#"+a.jgrid.jqID(k.themodal)).remove();if(void 0!==a("#"+a.jgrid.jqID(k.themodal))[0])c(a("#fbox_"+a.jgrid.jqID(e.p.id)));else{var n=a("<div><div id='"+g+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+a.jgrid.jqID(e.p.id)),u="left",r="";"rtl"===e.p.direction&&(u="right",r=" style='text-align:left'",n.attr("dir","rtl"));var z=
a.extend([],e.p.colModel),p="<a id='"+g+"_search' class='fm-button "+t.button+" fm-button-icon-right ui-search'><span class='"+t.icon_base+" "+q.icon_search+"'></span>"+b.Find+"</a>",w="<a id='"+g+"_reset' class='fm-button "+t.button+" fm-button-icon-left ui-reset'><span class='"+t.icon_base+" "+q.icon_reset+"'></span>"+b.Reset+"</a>",B="",C="",E,A=!1,v=-1;b.showQuery&&(B="<a id='"+g+"_query' class='fm-button "+t.button+" fm-button-icon-left'><span class='"+t.icon_base+" "+q.icon_query+"'></span>Query</a>");
b.columns.length?(z=b.columns,v=0,E=z[0].index||z[0].name):a.each(z,function(a,b){b.label||(b.label=e.p.colNames[a]);if(!A){var c=void 0===b.search?!0:b.search,d=!0===b.hidden;if(b.searchoptions&&!0===b.searchoptions.searchhidden&&c||c&&!d)A=!0,E=b.index||b.name,v=a}});if(!l&&E||!1===b.multipleSearch){var F="eq";0<=v&&z[v].searchoptions&&z[v].searchoptions.sopt?F=z[v].searchoptions.sopt[0]:b.sopt&&b.sopt.length&&(F=b.sopt[0]);l={groupOp:"AND",rules:[{field:E,op:F,data:""}]}}A=!1;b.tmplNames&&b.tmplNames.length&&
(A=!0,C="<tr><td class='ui-search-label'>"+b.tmplLabel+"</td>",C+="<td><select class='ui-template "+q.srSelect+"'>",C+="<option value='default'>Default</option>",a.each(b.tmplNames,function(a,b){C+="<option value='"+a+"'>"+b+"</option>"}),C+="</select></td></tr>");q="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+g+"_2'><tbody><tr><td colspan='2'><hr class='"+t.content+"' style='margin:1px'/></td></tr>"+C+"<tr><td class='EditButton' style='text-align:"+u+"'>"+w+"</td><td class='EditButton' "+
r+">"+B+p+"</td></tr></tbody></table>";g=a.jgrid.jqID(g);a("#"+g).jqFilter({columns:z,sortStrategy:b.sortStrategy,filter:b.loadDefaults?l:null,showQuery:b.showQuery,errorcheck:b.errorcheck,sopt:b.sopt,groupButton:b.multipleGroup,ruleButtons:b.multipleSearch,uniqueSearchFields:b.uniqueSearchFields,afterRedraw:b.afterRedraw,ops:b.odata,operands:b.operands,ajaxSelectOptions:e.p.ajaxSelectOptions,groupOps:b.groupOps,addsubgrup:b.addsubgrup,addrule:b.addrule,delgroup:b.delgroup,delrule:b.delrule,onChange:function(){this.p.showQuery&&
a(".query",this).html(this.toUserFriendlyString());a.isFunction(b.afterChange)&&b.afterChange.call(e,a("#"+g),b)},direction:e.p.direction,id:e.p.id});n.append(q);if(A&&b.tmplFilters&&b.tmplFilters.length)a(".ui-template",n).on("change",function(){var c=a(this).val();"default"===c?a("#"+g).jqFilter("addFilter",l):a("#"+g).jqFilter("addFilter",b.tmplFilters[parseInt(c,10)]);return!1});!0===b.multipleGroup&&(b.multipleSearch=!0);a(e).triggerHandler("jqGridFilterInitialize",[a("#"+g)]);a.isFunction(b.onInitializeSearch)&&
b.onInitializeSearch.call(e,a("#"+g));b.gbox="#gbox_"+g;b.layer?a.jgrid.createModal(k,n,b,"#gview_"+a.jgrid.jqID(e.p.id),a("#gbox_"+a.jgrid.jqID(e.p.id))[0],"#"+a.jgrid.jqID(b.layer),{position:"relative"}):a.jgrid.createModal(k,n,b,"#gview_"+a.jgrid.jqID(e.p.id),a("#gbox_"+a.jgrid.jqID(e.p.id))[0]);(b.searchOnEnter||b.closeOnEscape)&&a("#"+a.jgrid.jqID(k.themodal)).keydown(function(c){var d=a(c.target);if(!(!b.searchOnEnter||13!==c.which||d.hasClass("add-group")||d.hasClass("add-rule")||d.hasClass("delete-group")||
d.hasClass("delete-rule")||d.hasClass("fm-button")&&d.is("[id$=_query]")))return a("#"+g+"_search").click(),!1;if(b.closeOnEscape&&27===c.which)return a("#"+a.jgrid.jqID(k.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1});if(B)a("#"+g+"_query").on("click",function(){a(".queryresult",n).toggle();return!1});void 0===b.stringResult&&(b.stringResult=b.multipleSearch);a("#"+g+"_search").on("click",function(){var c={},d,f;m=a("#"+g);m.find(".input-elm:focus").change();f=m.jqFilter("filterData");
if(b.errorcheck&&(m[0].hideError(),b.showQuery||m.jqFilter("toSQLString"),m[0].p.error))return m[0].showError(),!1;if(b.stringResult){try{d=JSON.stringify(f)}catch(I){}"string"===typeof d&&(c[b.sFilter]=d,a.each([b.sField,b.sValue,b.sOper],function(){c[this]=""}))}else b.multipleSearch?(c[b.sFilter]=f,a.each([b.sField,b.sValue,b.sOper],function(){c[this]=""})):(c[b.sField]=f.rules[0].field,c[b.sValue]=f.rules[0].data,c[b.sOper]=f.rules[0].op,c[b.sFilter]="");e.p.search=!0;a.extend(e.p.postData,c);
h=a(e).triggerHandler("jqGridFilterSearch");void 0===h&&(h=!0);h&&a.isFunction(b.onSearch)&&(h=b.onSearch.call(e,e.p.filters));!1!==h&&a(e).trigger("reloadGrid",[{page:1}]);b.closeAfterSearch&&a.jgrid.hideModal("#"+a.jgrid.jqID(k.themodal),{gb:"#gbox_"+a.jgrid.jqID(e.p.id),jqm:b.jqModal,onClose:b.onClose});return!1});a("#"+g+"_reset").on("click",function(){var c={},d=a("#"+g);e.p.search=!1;e.p.resetsearch=!0;!1===b.multipleSearch?c[b.sField]=c[b.sValue]=c[b.sOper]="":c[b.sFilter]="";d[0].resetFilter();
A&&a(".ui-template",n).val("default");a.extend(e.p.postData,c);h=a(e).triggerHandler("jqGridFilterReset");void 0===h&&(h=!0);h&&a.isFunction(b.onReset)&&(h=b.onReset.call(e));!1!==h&&a(e).trigger("reloadGrid",[{page:1}]);b.closeAfterReset&&a.jgrid.hideModal("#"+a.jgrid.jqID(k.themodal),{gb:"#gbox_"+a.jgrid.jqID(e.p.id),jqm:b.jqModal,onClose:b.onClose});return!1});c(a("#"+g));a(".fm-button:not(."+t.disabled+")",n).hover(function(){a(this).addClass(t.hover)},function(){a(this).removeClass(t.hover)})}}})},
filterInput:function(b,e){e=a.extend(!0,{defaultSearch:"cn",groupOp:"OR",searchAll:!1,beforeSearch:null,afterSearch:null},e||{});return this.each(function(){var c=this;if(c.grid){var f,g,d='{"groupOp":"'+e.groupOp+'","rules":[',h=0,k;b+="";a.each(c.p.colModel,function(){f=this.index||this.name;g=this.searchoptions||{};k=e.defaultSearch?e.defaultSearch:g.sopt?g.sopt[0]:e.defaultSearch;if((this.search=!1===this.search?!1:!0)||e.searchAll)0<h&&(d+=","),d+='{"field":"'+f+'",',d+='"op":"'+k+'",',d+='"data":"'+
b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',h++});d+="]}";a.extend(c.p.postData,{filters:d});a.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]});var l="stop"===a(c).triggerHandler("jqGridFilterInputBeforeSearch")?!0:!1;!l&&a.isFunction(e.beforeSearch)&&(l=e.beforeSearch.call(c));l||a(c).jqGrid("setGridParam",{search:!0}).trigger("reloadGrid",[{page:1}]);a(c).triggerHandler("jqGridFilterInputAfterSearch");a.isFunction(e.afterSearch)&&
e.afterSearch.call(c)}})}});var r={};a.jgrid.extend({editGridRow:function(b,e){var c=a.jgrid.getRegional(this[0],"edit"),f=this[0].p.styleUI,g=a.jgrid.styleUI[f].formedit,d=a.jgrid.styleUI[f].common;e=a.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,
afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:d.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1},c,e||{});r[a(this)[0].p.id]=
e;return this.each(function(){function c(){var b={},c;a(E).find(".FormElement").each(function(){var c=a(".customelement",this);if(c.length){var d=a(c[0]).attr("name");a.each(p.p.colModel,function(){if(this.name===d&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{if(y[d]=this.editoptions.custom_value.call(p,a("#"+a.jgrid.jqID(d),E),"get"),void 0===y[d])throw"e1";}catch(ma){"e1"===ma?a.jgrid.info_dialog(M.errcap,"function 'custom_value' "+r[a(this)[0]].p.msg.novalue,r[a(this)[0]].p.bClose,
{styleUI:r[a(this)[0]].p.styleUI}):a.jgrid.info_dialog(M.errcap,ma.message,r[a(this)[0]].p.bClose,{styleUI:r[a(this)[0]].p.styleUI})}return!0}})}else{switch(a(this).get(0).type){case "checkbox":a(this).is(":checked")?y[this.name]=a(this).val():(c=a(this).attr("offval"),y[this.name]=c);break;case "select-one":y[this.name]=a(this).val();break;case "select-multiple":y[this.name]=a(this).val();y[this.name]=y[this.name]?y[this.name].join(","):"";break;case "password":case "text":case "textarea":case "button":y[this.name]=
a(this).val();break;case "radio":if(b.hasOwnProperty(this.name))return!0;b[this.name]=void 0===a(this).attr("offval")?"off":a(this).attr("offval")}p.p.autoencode&&(y[this.name]=a.jgrid.htmlEncode(y[this.name]))}});for(c in b)if(b.hasOwnProperty(c)){var d=a('input[name="'+c+'"]:checked',E).val();y[c]=void 0!==d?d:b[c];p.p.autoencode&&(y[c]=a.jgrid.htmlEncode(y[c]))}return!0}function f(b,c,d){var e,f=0,h,g,k,l,m;if(r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate)p.p.savedData={},p.p.savedData[c.p.id+
"_id"]=b;var n=c.p.colModel;if("_empty"===b)a(n).each(function(){e=this.name;k=a.extend({},this.editoptions||{});(g=a("#"+a.jgrid.jqID(e),d))&&g.length&&null!==g[0]&&(l="","custom"===this.edittype&&a.isFunction(k.custom_value)?k.custom_value.call(p,a("#"+e,d),"set",l):k.defaultValue?(l=a.isFunction(k.defaultValue)?k.defaultValue.call(p):k.defaultValue,"checkbox"===g[0].type?(m=l.toLowerCase(),0>m.search(/(false|f|0|no|n|off|undefined)/i)&&""!==m?(g[0].checked=!0,g[0].defaultChecked=!0,g[0].value=
l):(g[0].checked=!1,g[0].defaultChecked=!1)):g.val(l)):"checkbox"===g[0].type?(g[0].checked=!1,g[0].defaultChecked=!1,l=a(g).attr("offval")):g[0].type&&"select"===g[0].type.substr(0,6)?g[0].selectedIndex=0:g.val(l),!0===r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate)&&(p.p.savedData[e]=l)}),a("#id_g",d).val(b);else{var q=a(c).jqGrid("getInd",b,!0);q&&(a('td[role="gridcell"]',q).each(function(g){e=n[g].name;if("cb"!==e&&"subgrid"!==e&&"rn"!==e&&"btn"!==e&&!0===n[g].editable){if(e===c.p.ExpandColumn&&
!0===c.p.treeGrid)h=a(this).text();else try{h=a.unformat.call(c,a(this),{rowId:b,colModel:n[g]},g)}catch(ha){h="textarea"===n[g].edittype?a(this).text():a(this).html()}p.p.autoencode&&(h=a.jgrid.htmlDecode(h));if(!0===r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate)p.p.savedData[e]=h;e=a.jgrid.jqID(e);switch(n[g].edittype){case "password":case "text":case "button":case "image":case "textarea":if("&nbsp;"===h||"&#160;"===h||1===h.length&&160===h.charCodeAt(0))h="";a("#"+e,d).val(h);break;case "select":var k=
h.split(","),k=a.map(k,function(b){return a.trim(b)});a("#"+e+" option",d).each(function(){n[g].editoptions.multiple||a.trim(h)!==a.trim(a(this).text())&&k[0]!==a.trim(a(this).text())&&k[0]!==a.trim(a(this).val())?n[g].editoptions.multiple?-1<a.inArray(a.trim(a(this).text()),k)||-1<a.inArray(a.trim(a(this).val()),k)?this.selected=!0:this.selected=!1:this.selected=!1:this.selected=!0});if(!0===r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate)h=a("#"+e,d).val(),n[g].editoptions.multiple&&(h=h.join(",")),
p.p.savedData[e]=h;break;case "checkbox":h=String(h);if(n[g].editoptions&&n[g].editoptions.value)if(n[g].editoptions.value.split(":")[0]===h)a("#"+e,d)[p.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0});else a("#"+e,d)[p.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1});else h=h.toLowerCase(),0>h.search(/(false|f|0|no|n|off|undefined)/i)&&""!==h?(a("#"+e,d)[p.p.useProp?"prop":"attr"]("checked",!0),a("#"+e,d)[p.p.useProp?"prop":"attr"]("defaultChecked",!0)):(a("#"+e,d)[p.p.useProp?"prop":
"attr"]("checked",!1),a("#"+e,d)[p.p.useProp?"prop":"attr"]("defaultChecked",!1));if(!0===r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate)h=a("#"+e,d).is(":checked")?a("#"+e,d).val():a("#"+e,d).attr("offval"),p.p.savedData[e]=h;break;case "custom":try{if(n[g].editoptions&&a.isFunction(n[g].editoptions.custom_value))n[g].editoptions.custom_value.call(p,a("#"+e,d),"set",h);else throw"e1";}catch(ha){"e1"===ha?a.jgrid.info_dialog(M.errcap,"function 'custom_value' "+r[a(this)[0]].p.msg.nodefined,a.rp_ge[a(this)[0]].p.bClose,
{styleUI:r[a(this)[0]].p.styleUI}):a.jgrid.info_dialog(M.errcap,ha.message,a.rp_ge[a(this)[0]].p.bClose,{styleUI:r[a(this)[0]].p.styleUI})}}f++}}),0<f&&(a("#id_g",E).val(b),!0===r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate))&&(p.p.savedData[c.p.id+"_id"]=b)}}function l(){a.each(p.p.colModel,function(a,b){b.editoptions&&!0===b.editoptions.NullIfEmpty&&y.hasOwnProperty(b.name)&&""===y[b.name]&&(y[b.name]="null")})}function m(){var b,c=[!0,"",""],h={},g=p.p.prmNames,k,m,n,q,t,u=a(p).triggerHandler("jqGridAddEditBeforeCheckValues",
[a(B),G]);u&&"object"===typeof u&&(y=u);a.isFunction(r[p.p.id].beforeCheckValues)&&(u=r[p.p.id].beforeCheckValues.call(p,y,a(B),G))&&"object"===typeof u&&(y=u);for(n in y)if(y.hasOwnProperty(n)&&(c=a.jgrid.checkValues.call(p,y[n],n),!1===c[0]))break;l();c[0]&&(h=a(p).triggerHandler("jqGridAddEditClickSubmit",[r[p.p.id],y,G]),void 0===h&&a.isFunction(r[p.p.id].onclickSubmit)&&(h=r[p.p.id].onclickSubmit.call(p,r[p.p.id],y,G)||{}),c=a(p).triggerHandler("jqGridAddEditBeforeSubmit",[y,a(B),G]),void 0===
c&&(c=[!0,"",""]),c[0]&&a.isFunction(r[p.p.id].beforeSubmit)&&(c=r[p.p.id].beforeSubmit.call(p,y,a(B),G)));if(c[0]&&!r[p.p.id].processing){r[p.p.id].processing=!0;a("#sData",E+"_2").addClass(d.active);n=r[p.p.id].url||a(p).jqGrid("getGridParam","editurl");m=g.oper;k="clientArray"===n?p.p.keyName:g.id;y[m]="_empty"===a.trim(y[p.p.id+"_id"])?g.addoper:g.editoper;y[m]!==g.addoper?y[k]=y[p.p.id+"_id"]:void 0===y[k]&&(y[k]=y[p.p.id+"_id"]);delete y[p.p.id+"_id"];y=a.extend(y,r[p.p.id].editData,h);if(!0===
p.p.treeGrid)for(t in y[m]===g.addoper&&(q=a(p).jqGrid("getGridParam","selrow"),y["adjacency"===p.p.treeGridModel?p.p.treeReader.parent_id_field:"parent_id"]=q),p.p.treeReader)p.p.treeReader.hasOwnProperty(t)&&(h=p.p.treeReader[t],!y.hasOwnProperty(h)||y[m]===g.addoper&&"parent_id_field"===t||delete y[h]);y[k]=a.jgrid.stripPref(p.p.idPrefix,y[k]);t=a.extend({url:n,type:r[p.p.id].mtype,data:a.isFunction(r[p.p.id].serializeEditData)?r[p.p.id].serializeEditData.call(p,y):y,complete:function(h,l){var n;
a("#sData",E+"_2").removeClass(d.active);y[k]=p.p.idPrefix+y[k];300<=h.status&&304!==h.status?(c[0]=!1,c[1]=a(p).triggerHandler("jqGridAddEditErrorTextFormat",[h,G]),a.isFunction(r[p.p.id].errorTextFormat)?c[1]=r[p.p.id].errorTextFormat.call(p,h,G):c[1]=l+" Status: '"+h.statusText+"'. Error code: "+h.status):(c=a(p).triggerHandler("jqGridAddEditAfterSubmit",[h,y,G]),void 0===c&&(c=[!0,"",""]),c[0]&&a.isFunction(r[p.p.id].afterSubmit)&&(c=r[p.p.id].afterSubmit.call(p,h,y,G)));if(!1===c[0])a(".FormError",
B).html(c[1]),a(".FormError",B).show();else if(p.p.autoencode&&a.each(y,function(b,c){y[b]=a.jgrid.htmlDecode(c)}),y[m]===g.addoper?(c[2]||(c[2]=a.jgrid.randId()),null==y[k]||"_empty"===y[k]||""==y[k]?y[k]=c[2]:c[2]=y[k],r[p.p.id].reloadAfterSubmit?a(p).trigger("reloadGrid"):!0===p.p.treeGrid?a(p).jqGrid("addChildNode",c[2],q,y):a(p).jqGrid("addRowData",c[2],y,e.addedrow),r[p.p.id].closeAfterAdd?(!0!==p.p.treeGrid&&a(p).jqGrid("setSelection",c[2]),a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),{gb:"#gbox_"+
a.jgrid.jqID(w),jqm:e.jqModal,onClose:r[p.p.id].onClose,removemodal:r[p.p.id].removemodal,formprop:!r[p.p.id].recreateForm,form:r[p.p.id].form})):r[p.p.id].clearAfterAdd&&f("_empty",p,B)):(r[p.p.id].reloadAfterSubmit?(a(p).trigger("reloadGrid"),r[p.p.id].closeAfterEdit||setTimeout(function(){a(p).jqGrid("setSelection",y[k])},1E3)):!0===p.p.treeGrid?a(p).jqGrid("setTreeRow",y[k],y):a(p).jqGrid("setRowData",y[k],y),r[p.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),{gb:"#gbox_"+
a.jgrid.jqID(w),jqm:e.jqModal,onClose:r[p.p.id].onClose,removemodal:r[p.p.id].removemodal,formprop:!r[p.p.id].recreateForm,form:r[p.p.id].form})),a.isFunction(r[p.p.id].afterComplete)&&(b=h,setTimeout(function(){a(p).triggerHandler("jqGridAddEditAfterComplete",[b,y,a(B),G]);r[p.p.id].afterComplete.call(p,b,y,a(B),G);b=null},500)),r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate)if(a(B).data("disabled",!1),"_empty"!==p.p.savedData[p.p.id+"_id"])for(n in p.p.savedData)p.p.savedData.hasOwnProperty(n)&&
y[n]&&(p.p.savedData[n]=y[n]);r[p.p.id].processing=!1;try{a(":input:visible",B)[0].focus()}catch(ya){}}},a.jgrid.ajaxOptions,r[p.p.id].ajaxEditOptions);t.url||r[p.p.id].useDataProxy||(a.isFunction(p.p.dataProxy)?r[p.p.id].useDataProxy=!0:(c[0]=!1,c[1]+=" "+M.nourl));c[0]&&(r[p.p.id].useDataProxy?(h=p.p.dataProxy.call(p,t,"set_"+p.p.id),void 0===h&&(h=[!0,""]),!1===h[0]?(c[0]=!1,c[1]=h[1]||"Error deleting the selected row!"):(t.data.oper===g.addoper&&r[p.p.id].closeAfterAdd&&a.jgrid.hideModal("#"+
a.jgrid.jqID(v.themodal),{gb:"#gbox_"+a.jgrid.jqID(w),jqm:e.jqModal,onClose:r[p.p.id].onClose,removemodal:r[p.p.id].removemodal,formprop:!r[p.p.id].recreateForm,form:r[p.p.id].form}),t.data.oper===g.editoper&&r[p.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),{gb:"#gbox_"+a.jgrid.jqID(w),jqm:e.jqModal,onClose:r[p.p.id].onClose,removemodal:r[p.p.id].removemodal,formprop:!r[p.p.id].recreateForm,form:r[p.p.id].form}))):"clientArray"===t.url?(r[p.p.id].reloadAfterSubmit=!1,y=t.data,
t.complete({status:200,statusText:""},"")):a.ajax(t))}!1===c[0]&&(a(".FormError",B).html(c[1]),a(".FormError",B).show())}function q(b,c){var d,e;d=!(a.isPlainObject(b)&&a.isPlainObject(c)&&Object.getOwnPropertyNames(b).length===Object.getOwnPropertyNames(c).length);if(!d)for(e in c)if(c.hasOwnProperty(e))if(b.hasOwnProperty(e)){if(b[e]!==c[e]){d=!0;break}}else{d=!0;break}return d}function t(){var b=!0;a(".FormError",B).hide();r[p.p.id].checkOnUpdate&&(y={},c(),I=q(y,p.p.savedData))&&(a(B).data("disabled",
!0),a(".confirm","#"+v.themodal).show(),b=!1);return b}function n(b,c){var e=c[1].length-1;0===b?a("#pData",A).addClass(d.disabled):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass(d.disabled)?a("#pData",A).addClass(d.disabled):a("#pData",A).removeClass(d.disabled);b===e?a("#nData",A).addClass(d.disabled):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass(d.disabled)?a("#nData",A).addClass(d.disabled):a("#nData",A).removeClass(d.disabled)}function u(){var b=a(p).jqGrid("getDataIDs"),
c=a("#id_g",E).val();if(p.p.multiselect&&r[p.p.id].editselected){for(var d=[],e=0,f=b.length;e<f;e++)-1!==a.inArray(b[e],p.p.selarrrow)&&d.push(b[e]);c=a.inArray(c,d);return[c,d]}c=a.inArray(c,b);return[c,b]}function x(a){var b="";"string"===typeof a&&(b=a.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(a,b){return'<span id="'+b+'" ></span>'}));return b}function z(){if(r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate){var b=[],c={},b=a.map(p.p.savedData,function(a,b){return b});a(".FormElement",
O).each(function(){if(-1===b.indexOf(this.name)){var d=a(this).val(),e=a(this).get(0).type;if("checkbox"===e)a(this).is(":checked")||(d=a(this).attr("offval"));else if("select-multiple"===e)d=d.join(",");else if("radio"===e){if(c.hasOwnProperty(this.name))return!0;c[this.name]=void 0===a(this).attr("offval")?"off":a(this).attr("offval")}p.p.savedData[this.name]=d}});for(var d in c)if(c.hasOwnProperty(d)){var e=a('input[name="'+d+'"]:checked',O).val();p.p.savedData[d]=void 0!==e?e:c[d]}}}var p=this;
if(p.grid&&b){p.p.savedData={};var w=p.p.id,B="FrmGrid_"+w,C="TblGrid_"+w,E="#"+a.jgrid.jqID(C),A,v={themodal:"editmod"+w,modalhead:"edithd"+w,modalcontent:"editcnt"+w,scrollelm:B},F=!0,H=1,D=0,y,I,G,J="string"===typeof r[p.p.id].template&&0<r[p.p.id].template.length,M=a.jgrid.getRegional(this,"errors");r[p.p.id].styleUI=p.p.styleUI||"jQueryUI";a.jgrid.isMobile()&&(r[p.p.id].resize=!1);"new"===b?(b="_empty",G="add",e.caption=r[p.p.id].addCaption):(e.caption=r[p.p.id].editCaption,G="edit");e.recreateForm||
a(p).data("formProp")&&a.extend(r[a(this)[0].p.id],a(p).data("formProp"));var Q=!0;e.checkOnUpdate&&e.jqModal&&!e.modal&&(Q=!1);var F=isNaN(r[a(this)[0].p.id].dataheight)?r[a(this)[0].p.id].dataheight:r[a(this)[0].p.id].dataheight+"px",P=isNaN(r[a(this)[0].p.id].datawidth)?r[a(this)[0].p.id].datawidth:r[a(this)[0].p.id].datawidth+"px",O=a("<form name='FormPost' id='"+B+"' class='FormGrid' onSubmit='return false;' style='width:"+P+";height:"+F+";'></form>").data("disabled",!1),Y;J?(Y=x(r[a(this)[0].p.id].template),
A=E):(Y=a("<table id='"+C+"' class='EditTable ui-common-table'><tbody></tbody></table>"),A=E+"_2");B="#"+a.jgrid.jqID(B);a(O).append("<div class='FormError "+d.error+"' style='display:none;'></div>");a(O).append("<div class='tinfo topinfo'>"+r[p.p.id].topinfo+"</div>");a(p.p.colModel).each(function(){var a=this.formoptions;H=Math.max(H,a?a.colpos||0:0);D=Math.max(D,a?a.rowpos||0:0)});a(O).append(Y);F=a(p).triggerHandler("jqGridAddEditBeforeInitData",[O,G]);void 0===F&&(F=!0);F&&a.isFunction(r[p.p.id].beforeInitData)&&
(F=r[p.p.id].beforeInitData.call(p,O,G));if(!1!==F){(function(){var c;if("_empty"!==b&&void 0!==p.p.savedRow&&0<p.p.savedRow.length&&a.isFunction(a.fn.jqGrid.restoreRow))for(c=0;c<p.p.savedRow.length;c++)if(p.p.savedRow[c].id===b){a(p).jqGrid("restoreRow",b);break}})();(function(b,c,d,e){var f,h,k,l=0,m,n,q,t=[],u=!1,x="",v,z;for(v=1;v<=e;v++)x+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";"_empty"!==b&&(u=a(c).jqGrid("getInd",b));a(c.p.colModel).each(function(v){f=this.name;
n=(h=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";if("cb"!==f&&"subgrid"!==f&&!0===this.editable&&"rn"!==f){if(!1===u)m="";else if(f===c.p.ExpandColumn&&!0===c.p.treeGrid)m=a("td[role='gridcell']:eq("+v+")",c.rows[u]).text();else{try{m=a.unformat.call(c,a("td[role='gridcell']:eq("+v+")",c.rows[u]),{rowId:b,colModel:this},v)}catch(Wa){m=this.edittype&&"textarea"===this.edittype?a("td[role='gridcell']:eq("+v+")",c.rows[u]).text():a("td[role='gridcell']:eq("+
v+")",c.rows[u]).html()}if(!m||"&nbsp;"===m||"&#160;"===m||1===m.length&&160===m.charCodeAt(0))m=""}var w=a.extend({},this.editoptions||{},{id:f,name:f,rowId:b,oper:"edit"}),y=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),A=parseInt(y.rowpos,10)||l+1,D=parseInt(2*(parseInt(y.colpos,10)||1),10);"_empty"===b&&w.defaultValue&&(m=a.isFunction(w.defaultValue)?w.defaultValue.call(p):w.defaultValue);this.edittype||(this.edittype="text");p.p.autoencode&&(m=a.jgrid.htmlDecode(m));
q=a.jgrid.createEl.call(p,this.edittype,w,m,!1,a.extend({},a.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{}));"select"===this.edittype&&(m=a(q).val(),"select-multiple"===a(q).get(0).type&&m&&(m=m.join(",")));"checkbox"===this.edittype&&(m=a(q).is(":checked")?a(q).val():a(q).attr("offval"));a(q).addClass("FormElement");-1<a.inArray(this.edittype,["text","textarea","password","select"])&&a(q).addClass(g.inputClass);z=!0;if(J)y=a(O).find("#"+f),y.length?y.replaceWith(q):z=!1;else{k=a(d).find("tr[rowpos="+
A+"]");if(y.rowabove){var C=a("<tr><td class='contentinfo' colspan='"+2*e+"'>"+y.rowcontent+"</td></tr>");a(d).append(C);C[0].rp=A}0===k.length&&(k=a("<tr "+n+" rowpos='"+A+"'></tr>").addClass("FormData").attr("id","tr_"+f),a(k).append(x),a(d).append(k),k[0].rp=A);a("td:eq("+(D-2)+")",k[0]).html("<label for='"+f+"'>"+(void 0===y.label?c.p.colNames[v]:y.label)+"</label>");a("td:eq("+(D-1)+")",k[0]).append(y.elmprefix).append(q).append(y.elmsuffix)}(r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate)&&
z&&(p.p.savedData[f]=m);"custom"===this.edittype&&a.isFunction(w.custom_value)&&w.custom_value.call(p,a("#"+f,B),"set",m);a.jgrid.bindEv.call(p,q,w);t[l]=v;l++}});0<l&&(J?(v="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+c.p.id+"_id' value='"+b+"'/>",a(O).append(v)):(v=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+c.p.id+
"_id' value='"+b+"'/></td></tr>"),v[0].rp=l+999,a(d).append(v)),r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate)&&(p.p.savedData[c.p.id+"_id"]=b);return t})(b,p,Y,H);var F="rtl"===p.p.direction?!0:!1,va="<a id='"+(F?"nData":"pData")+"' class='fm-button "+d.button+"'><span class='"+d.icon_base+" "+g.icon_prev+"'></span></a>",P="<a id='"+(F?"pData":"nData")+"' class='fm-button "+d.button+"'><span class='"+d.icon_base+" "+g.icon_next+"'></span></a>",ba="<a id='sData' class='fm-button "+d.button+"'>"+
e.bSubmit+"</a>",pa="<a id='cData' class='fm-button "+d.button+"'>"+e.bCancel+"</a>",xa="<table style='height:auto' class='EditTable ui-common-table' id='"+C+"_2'><tbody><tr><td colspan='2'><hr class='"+d.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(F?P+va:va+P)+"</td><td class='EditButton'>"+ba+pa+"</td></tr>",xa=xa+"</tbody></table>";if(0<D){var fa=[];a.each(a(Y)[0].rows,function(a,b){fa[a]=b});fa.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0});a.each(fa,
function(b,c){a("tbody",Y).append(c)})}e.gbox="#gbox_"+a.jgrid.jqID(w);var la=!1;!0===e.closeOnEscape&&(e.closeOnEscape=!1,la=!0);J?(a(O).find("#pData").replaceWith(va),a(O).find("#nData").replaceWith(P),a(O).find("#sData").replaceWith(ba),a(O).find("#cData").replaceWith(pa),C=a("<div id="+C+"></div>").append(O)):C=a("<div></div>").append(O).append(xa);a(O).append("<div class='binfo topinfo bottominfo'>"+r[p.p.id].bottominfo+"</div>");a.jgrid.createModal(v,C,r[a(this)[0].p.id],"#gview_"+a.jgrid.jqID(p.p.id),
a("#gbox_"+a.jgrid.jqID(p.p.id))[0]);F&&(a("#pData, #nData",E+"_2").css("float","right"),a(".EditButton",E+"_2").css("text-align","left"));r[p.p.id].topinfo&&a(".tinfo",B).show();r[p.p.id].bottominfo&&a(".binfo",B).show();xa=C=null;a("#"+a.jgrid.jqID(v.themodal)).keydown(function(b){var c=b.target;if(!0===a(B).data("disabled"))return!1;if(!0===r[p.p.id].savekey[0]&&b.which===r[p.p.id].savekey[1]&&"TEXTAREA"!==c.tagName)return a("#sData",E+"_2").trigger("click"),!1;if(27===b.which){if(!t())return!1;
la&&a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),{gb:e.gbox,jqm:e.jqModal,onClose:r[p.p.id].onClose,removemodal:r[p.p.id].removemodal,formprop:!r[p.p.id].recreateForm,form:r[p.p.id].form});return!1}if(!0===r[p.p.id].navkeys[0]){if("_empty"===a("#id_g",E).val())return!0;if(b.which===r[p.p.id].navkeys[1])return a("#pData",A).trigger("click"),!1;if(b.which===r[p.p.id].navkeys[2])return a("#nData",A).trigger("click"),!1}});e.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span","#"+a.jgrid.jqID(v.themodal)).removeClass("jqmClose"),
a("a.ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(v.themodal)).off("click").click(function(){if(!t())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),{gb:"#gbox_"+a.jgrid.jqID(w),jqm:e.jqModal,onClose:r[p.p.id].onClose,removemodal:r[p.p.id].removemodal,formprop:!r[p.p.id].recreateForm,form:r[p.p.id].form});return!1}));e.saveicon=a.extend([!0,"left",g.icon_save],e.saveicon);e.closeicon=a.extend([!0,"left",g.icon_close],e.closeicon);!0===e.saveicon[0]&&a("#sData",A).addClass("right"===e.saveicon[1]?
"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+d.icon_base+" "+e.saveicon[2]+"'></span>");!0===e.closeicon[0]&&a("#cData",A).addClass("right"===e.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+d.icon_base+" "+e.closeicon[2]+"'></span>");if(r[p.p.id].checkOnSubmit||r[p.p.id].checkOnUpdate)ba="<a id='sNew' class='fm-button "+d.button+"' style='z-index:1002'>"+e.bYes+"</a>",P="<a id='nNew' class='fm-button "+d.button+"' style='z-index:1002;margin-left:5px'>"+
e.bNo+"</a>",pa="<a id='cNew' class='fm-button "+d.button+"' style='z-index:1002;margin-left:5px;'>"+e.bExit+"</a>",C=e.zIndex||999,C++,a("<div class='"+e.overlayClass+" jqgrid-overlay confirm' style='z-index:"+C+";display:none;'>&#160;</div><div class='confirm ui-jqconfirm "+d.content+"' style='z-index:"+(C+1)+"'>"+e.saveData+"<br/><br/>"+ba+P+pa+"</div>").insertAfter(B),a("#sNew","#"+a.jgrid.jqID(v.themodal)).click(function(){m();a(B).data("disabled",!1);a(".confirm","#"+a.jgrid.jqID(v.themodal)).hide();
return!1}),a("#nNew","#"+a.jgrid.jqID(v.themodal)).click(function(){a(".confirm","#"+a.jgrid.jqID(v.themodal)).hide();a(B).data("disabled",!1);setTimeout(function(){a(":input:visible",B)[0].focus()},0);return!1}),a("#cNew","#"+a.jgrid.jqID(v.themodal)).click(function(){a(".confirm","#"+a.jgrid.jqID(v.themodal)).hide();a(B).data("disabled",!1);a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),{gb:"#gbox_"+a.jgrid.jqID(w),jqm:e.jqModal,onClose:r[p.p.id].onClose,removemodal:r[p.p.id].removemodal,formprop:!r[p.p.id].recreateForm,
form:r[p.p.id].form});return!1});a(p).triggerHandler("jqGridAddEditInitializeForm",[a(B),G]);a.isFunction(r[p.p.id].onInitializeForm)&&r[p.p.id].onInitializeForm.call(p,a(B),G);"_empty"!==b&&r[p.p.id].viewPagerButtons?a("#pData,#nData",A).show():a("#pData,#nData",A).hide();a(p).triggerHandler("jqGridAddEditBeforeShowForm",[a(B),G]);a.isFunction(r[p.p.id].beforeShowForm)&&r[p.p.id].beforeShowForm.call(p,a(B),G);z();a("#"+a.jgrid.jqID(v.themodal)).data("onClose",r[p.p.id].onClose);a.jgrid.viewModal("#"+
a.jgrid.jqID(v.themodal),{gbox:"#gbox_"+a.jgrid.jqID(w),jqm:e.jqModal,overlay:e.overlay,modal:e.modal,overlayClass:e.overlayClass,focusField:e.focusField,onHide:function(b){var c=a("#editmod"+w)[0].style.height,d=a("#editmod"+w)[0].style.width;-1<c.indexOf("px")&&(c=parseFloat(c));-1<d.indexOf("px")&&(d=parseFloat(d));a(p).data("formProp",{top:parseFloat(a(b.w).css("top")),left:parseFloat(a(b.w).css("left")),width:d,height:c,dataheight:a(B).height(),datawidth:a(B).width()});b.w.remove();b.o&&b.o.remove()}});
Q||a("."+a.jgrid.jqID(e.overlayClass)).click(function(){if(!t())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),{gb:"#gbox_"+a.jgrid.jqID(w),jqm:e.jqModal,onClose:r[p.p.id].onClose,removemodal:r[p.p.id].removemodal,formprop:!r[p.p.id].recreateForm,form:r[p.p.id].form});return!1});a(".fm-button","#"+a.jgrid.jqID(v.themodal)).hover(function(){a(this).addClass(d.hover)},function(){a(this).removeClass(d.hover)});a("#sData",A).click(function(){y={};a(".FormError",B).hide();c();"_empty"===y[p.p.id+
"_id"]?m():!0===e.checkOnSubmit?(I=q(y,p.p.savedData))?(a(B).data("disabled",!0),a(".confirm","#"+a.jgrid.jqID(v.themodal)).show()):m():m();return!1});a("#cData",A).click(function(){if(!t())return!1;a.jgrid.hideModal("#"+a.jgrid.jqID(v.themodal),{gb:"#gbox_"+a.jgrid.jqID(w),jqm:e.jqModal,onClose:r[p.p.id].onClose,removemodal:r[p.p.id].removemodal,formprop:!r[p.p.id].recreateForm,form:r[p.p.id].form});return!1});a("#nData",A).click(function(){if(!t())return!1;a(".FormError",B).hide();var b=u();b[0]=
parseInt(b[0],10);if(-1!==b[0]&&b[1][b[0]+1]){a(p).triggerHandler("jqGridAddEditClickPgButtons",["next",a(B),b[1][b[0]]]);var c;if(a.isFunction(e.onclickPgButtons)&&(c=e.onclickPgButtons.call(p,"next",a(B),b[1][b[0]]),void 0!==c&&!1===c)||a("#"+a.jgrid.jqID(b[1][b[0]+1])).hasClass(d.disabled))return!1;f(b[1][b[0]+1],p,B);p.p.multiselect&&r[p.p.id].editselected||a(p).jqGrid("setSelection",b[1][b[0]+1]);a(p).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",a(B),b[1][b[0]]]);a.isFunction(e.afterclickPgButtons)&&
e.afterclickPgButtons.call(p,"next",a(B),b[1][b[0]+1]);z();n(b[0]+1,b)}return!1});a("#pData",A).click(function(){if(!t())return!1;a(".FormError",B).hide();var b=u();if(-1!==b[0]&&b[1][b[0]-1]){a(p).triggerHandler("jqGridAddEditClickPgButtons",["prev",a(B),b[1][b[0]]]);var c;if(a.isFunction(e.onclickPgButtons)&&(c=e.onclickPgButtons.call(p,"prev",a(B),b[1][b[0]]),void 0!==c&&!1===c)||a("#"+a.jgrid.jqID(b[1][b[0]-1])).hasClass(d.disabled))return!1;f(b[1][b[0]-1],p,B);p.p.multiselect&&r[p.p.id].editselected||
a(p).jqGrid("setSelection",b[1][b[0]-1]);a(p).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",a(B),b[1][b[0]]]);a.isFunction(e.afterclickPgButtons)&&e.afterclickPgButtons.call(p,"prev",a(B),b[1][b[0]-1]);z();n(b[0]-1,b)}return!1});a(p).triggerHandler("jqGridAddEditAfterShowForm",[a(B),G]);a.isFunction(r[p.p.id].afterShowForm)&&r[p.p.id].afterShowForm.call(p,a(B),G);Q=u();n(Q[0],Q)}}})},viewGridRow:function(b,e){var c=a.jgrid.getRegional(this[0],"view"),f=this[0].p.styleUI,g=a.jgrid.styleUI[f].formedit,
d=a.jgrid.styleUI[f].common;e=a.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},c,e||{});r[a(this)[0].p.id]=e;return this.each(function(){function c(){!0!==r[q.p.id].closeOnEscape&&!0!==r[q.p.id].navkeys[0]||setTimeout(function(){a(".ui-jqdialog-titlebar-close",
"#"+a.jgrid.jqID(p.modalhead)).attr("tabindex","-1").focus()},0)}function f(b,c){var d,e,f=0,h,g;if(g=a(c).jqGrid("getInd",b,!0))a("td",g).each(function(b){d=c.p.colModel[b].name;e=c.p.colModel[b].editrules&&!0===c.p.colModel[b].editrules.edithidden?!1:!0===c.p.colModel[b].hidden?!0:!1;"cb"!==d&&"subgrid"!==d&&"rn"!==d&&"btn"!==d&&(h=d===c.p.ExpandColumn&&!0===c.p.treeGrid?a(this).text():a(this).html(),d=a.jgrid.jqID("v_"+d),a("#"+d+" span","#"+u).html(h),e&&a("#"+d,"#"+u).parents("tr:first").hide(),
f++)}),0<f&&a("#id_g","#"+u).val(b)}function l(b,c){var e=c[1].length-1;0===b?a("#pData","#"+u+"_2").addClass(d.disabled):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass(d.disabled)?a("#pData",u+"_2").addClass(d.disabled):a("#pData","#"+u+"_2").removeClass(d.disabled);b===e?a("#nData","#"+u+"_2").addClass(d.disabled):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass(d.disabled)?a("#nData",u+"_2").addClass(d.disabled):a("#nData","#"+u+"_2").removeClass(d.disabled)}function m(){var b=
a(q).jqGrid("getDataIDs"),c=a("#id_g","#"+u).val();return[a.inArray(c,b),b]}var q=this;if(q.grid&&b){var t=q.p.id,n="ViewGrid_"+a.jgrid.jqID(t),u="ViewTbl_"+a.jgrid.jqID(t),x="ViewGrid_"+t,z="ViewTbl_"+t,p={themodal:"viewmod"+t,modalhead:"viewhd"+t,modalcontent:"viewcnt"+t,scrollelm:n},w=a.isFunction(r[q.p.id].beforeInitData)?r[q.p.id].beforeInitData:!1,B=!0,C=1,E=0;r[q.p.id].styleUI=q.p.styleUI||"jQueryUI";e.recreateForm||a(q).data("viewProp")&&a.extend(r[a(this)[0].p.id],a(q).data("viewProp"));
var A=isNaN(r[a(this)[0].p.id].dataheight)?r[a(this)[0].p.id].dataheight:r[a(this)[0].p.id].dataheight+"px",v=isNaN(r[a(this)[0].p.id].datawidth)?r[a(this)[0].p.id].datawidth:r[a(this)[0].p.id].datawidth+"px",x=a("<form name='FormPost' id='"+x+"' class='FormGrid' style='width:"+v+";height:"+A+";'></form>"),F=a("<table id='"+z+"' class='EditTable ViewTable'><tbody></tbody></table>");a(q.p.colModel).each(function(){var a=this.formoptions;C=Math.max(C,a?a.colpos||0:0);E=Math.max(E,a?a.rowpos||0:0)});
a(x).append(F);w&&(B=w.call(q,x),void 0===B&&(B=!0));if(!1!==B){(function(b,c,f,h){var g,k,l,m=0,n,p,q=[],t=!1,u,r="<td class='CaptionTD form-view-label "+d.content+"' width='"+e.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset "+d.content+"'>&#160;</td>",x="",v="<td class='CaptionTD form-view-label "+d.content+"'>&#160;</td><td class='DataTD form-view-data "+d.content+"'>&#160;</td>",z=["integer","number","currency"],w=0,A=0,y,D,C;for(u=1;u<=h;u++)x+=1===u?r:v;a(c.p.colModel).each(function(){(k=
this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,z)?w=Math.max(w,parseInt(this.width,10)):A=Math.max(A,parseInt(this.width,10)))});y=0!==w?w:0!==A?A:0;t=a(c).jqGrid("getInd",b);a(c.p.colModel).each(function(b){g=this.name;D=!1;p=(k=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";C="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==g&&"subgrid"!==
g&&"rn"!==g&&"btn"!==g&&C){n=!1===t?"":g===c.p.ExpandColumn&&!0===c.p.treeGrid?a("td:eq("+b+")",c.rows[t]).text():a("td:eq("+b+")",c.rows[t]).html();D="right"===this.align&&0!==y?!0:!1;var d=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),e=parseInt(d.rowpos,10)||m+1,u=parseInt(2*(parseInt(d.colpos,10)||1),10);if(d.rowabove){var r=a("<tr><td class='contentinfo' colspan='"+2*h+"'>"+d.rowcontent+"</td></tr>");a(f).append(r);r[0].rp=e}l=a(f).find("tr[rowpos="+e+"]");0===l.length&&(l=a("<tr "+
p+" rowpos='"+e+"'></tr>").addClass("FormData").attr("id","trv_"+g),a(l).append(x),a(f).append(l),l[0].rp=e);a("td:eq("+(u-2)+")",l[0]).html("<b>"+(void 0===d.label?c.p.colNames[b]:d.label)+"</b>");a("td:eq("+(u-1)+")",l[0]).append("<span>"+n+"</span>").attr("id","v_"+g);D&&a("td:eq("+(u-1)+") span",l[0]).css({"text-align":"right",width:y+"px"});q[m]=b;m++}});0<m&&(b=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*h-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+
b+"'/></td></tr>"),b[0].rp=m+99,a(f).append(b));return q})(b,q,F,C);z="rtl"===q.p.direction?!0:!1;w="<a id='"+(z?"nData":"pData")+"' class='fm-button "+d.button+"'><span class='"+d.icon_base+" "+g.icon_prev+"'></span></a>";B="<a id='"+(z?"pData":"nData")+"' class='fm-button "+d.button+"'><span class='"+d.icon_base+" "+g.icon_next+"'></span></a>";A="<a id='cData' class='fm-button "+d.button+"'>"+e.bClose+"</a>";if(0<E){var H=[];a.each(a(F)[0].rows,function(a,b){H[a]=b});H.sort(function(a,b){return a.rp>
b.rp?1:a.rp<b.rp?-1:0});a.each(H,function(b,c){a("tbody",F).append(c)})}e.gbox="#gbox_"+a.jgrid.jqID(t);x=a("<div></div>").append(x).append("<table border='0' class='EditTable' id='"+u+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+e.labelswidth+"'>"+(z?B+w:w+B)+"</td><td class='EditButton'>"+A+"</td></tr></tbody></table>");a.jgrid.createModal(p,x,r[a(this)[0].p.id],"#gview_"+a.jgrid.jqID(q.p.id),a("#gview_"+a.jgrid.jqID(q.p.id))[0]);z&&(a("#pData, #nData","#"+u+"_2").css("float",
"right"),a(".EditButton","#"+u+"_2").css("text-align","left"));e.viewPagerButtons||a("#pData, #nData","#"+u+"_2").hide();x=null;a("#"+p.themodal).keydown(function(b){if(27===b.which)return r[q.p.id].closeOnEscape&&a.jgrid.hideModal("#"+a.jgrid.jqID(p.themodal),{gb:e.gbox,jqm:e.jqModal,onClose:e.onClose,removemodal:r[q.p.id].removemodal,formprop:!r[q.p.id].recreateForm,form:r[q.p.id].form}),!1;if(!0===e.navkeys[0]){if(b.which===e.navkeys[1])return a("#pData","#"+u+"_2").trigger("click"),!1;if(b.which===
e.navkeys[2])return a("#nData","#"+u+"_2").trigger("click"),!1}});e.closeicon=a.extend([!0,"left",g.icon_close],e.closeicon);!0===e.closeicon[0]&&a("#cData","#"+u+"_2").addClass("right"===e.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+d.icon_base+" "+e.closeicon[2]+"'></span>");a.isFunction(e.beforeShowForm)&&e.beforeShowForm.call(q,a("#"+n));a.jgrid.viewModal("#"+a.jgrid.jqID(p.themodal),{gbox:"#gbox_"+a.jgrid.jqID(t),jqm:e.jqModal,overlay:e.overlay,modal:e.modal,
onHide:function(b){a(q).data("viewProp",{top:parseFloat(a(b.w).css("top")),left:parseFloat(a(b.w).css("left")),width:a(b.w).width(),height:a(b.w).height(),dataheight:a("#"+n).height(),datawidth:a("#"+n).width()});b.w.remove();b.o&&b.o.remove()}});a(".fm-button:not(."+d.disabled+")","#"+u+"_2").hover(function(){a(this).addClass(d.hover)},function(){a(this).removeClass(d.hover)});c();a("#cData","#"+u+"_2").click(function(){a.jgrid.hideModal("#"+a.jgrid.jqID(p.themodal),{gb:"#gbox_"+a.jgrid.jqID(t),
jqm:e.jqModal,onClose:e.onClose,removemodal:r[q.p.id].removemodal,formprop:!r[q.p.id].recreateForm,form:r[q.p.id].form});return!1});a("#nData","#"+u+"_2").click(function(){a("#FormError","#"+u).hide();var b=m();b[0]=parseInt(b[0],10);-1!==b[0]&&b[1][b[0]+1]&&(a.isFunction(e.onclickPgButtons)&&e.onclickPgButtons.call(q,"next",a("#"+n),b[1][b[0]]),f(b[1][b[0]+1],q),a(q).jqGrid("setSelection",b[1][b[0]+1]),a.isFunction(e.afterclickPgButtons)&&e.afterclickPgButtons.call(q,"next",a("#"+n),b[1][b[0]+1]),
l(b[0]+1,b));c();return!1});a("#pData","#"+u+"_2").click(function(){a("#FormError","#"+u).hide();var b=m();-1!==b[0]&&b[1][b[0]-1]&&(a.isFunction(e.onclickPgButtons)&&e.onclickPgButtons.call(q,"prev",a("#"+n),b[1][b[0]]),f(b[1][b[0]-1],q),a(q).jqGrid("setSelection",b[1][b[0]-1]),a.isFunction(e.afterclickPgButtons)&&e.afterclickPgButtons.call(q,"prev",a("#"+n),b[1][b[0]-1]),l(b[0]-1,b));c();return!1});x=m();l(x[0],x)}}})},delGridRow:function(b,e){var c=a.jgrid.getRegional(this[0],"del"),f=this[0].p.styleUI,
g=a.jgrid.styleUI[f].formedit,d=a.jgrid.styleUI[f].common;e=a.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},c,e||{});r[a(this)[0].p.id]=e;return this.each(function(){var c=
this;if(c.grid&&b){var f=a.isFunction(r[c.p.id].beforeShowForm),l=a.isFunction(r[c.p.id].afterShowForm),m=a.isFunction(r[c.p.id].beforeInitData)?r[c.p.id].beforeInitData:!1,q=c.p.id,t={},n=!0,u="DelTbl_"+a.jgrid.jqID(q),x,z,p,w,B="DelTbl_"+q,C={themodal:"delmod"+q,modalhead:"delhd"+q,modalcontent:"delcnt"+q,scrollelm:u};r[c.p.id].styleUI=c.p.styleUI||"jQueryUI";a.isArray(b)&&(b=b.join());if(void 0!==a("#"+a.jgrid.jqID(C.themodal))[0]){m&&(n=m.call(c,a("#"+u)),void 0===n&&(n=!0));if(!1===n)return;
a("#DelData>td","#"+u).text(b);a("#DelError","#"+u).hide();!0===r[c.p.id].processing&&(r[c.p.id].processing=!1,a("#dData","#"+u).removeClass(d.active));f&&r[c.p.id].beforeShowForm.call(c,a("#"+u));a.jgrid.viewModal("#"+a.jgrid.jqID(C.themodal),{gbox:"#gbox_"+a.jgrid.jqID(q),jqm:r[c.p.id].jqModal,jqM:!1,overlay:r[c.p.id].overlay,modal:r[c.p.id].modal})}else{var E=isNaN(r[c.p.id].dataheight)?r[c.p.id].dataheight:r[c.p.id].dataheight+"px",A=isNaN(e.datawidth)?e.datawidth:e.datawidth+"px",B="<div id='"+
B+"' class='formdata' style='width:"+A+";overflow:auto;position:relative;height:"+E+";'><table class='DelTable'><tbody>"+("<tr id='DelError' style='display:none'><td class='"+d.error+"'></td></tr>"),B=B+("<tr id='DelData' style='display:none'><td >"+b+"</td></tr>"),B=B+('<tr><td class="delmsg" style="white-space:pre;">'+r[c.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>"),B=B+"</tbody></table></div>",B=B+("<table class='EditTable ui-common-table' id='"+u+"_2'><tbody><tr><td><hr class='"+d.content+
"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+("<a id='dData' class='fm-button "+d.button+"'>"+e.bSubmit+"</a>")+"&#160;"+("<a id='eData' class='fm-button "+d.button+"'>"+e.bCancel+"</a>")+"</td></tr></tbody></table>");e.gbox="#gbox_"+a.jgrid.jqID(q);a.jgrid.createModal(C,B,r[c.p.id],"#gview_"+a.jgrid.jqID(c.p.id),a("#gview_"+a.jgrid.jqID(c.p.id))[0]);m&&(n=m.call(c,a(B)),void 0===n&&(n=!0));if(!1===n)return;a(".fm-button","#"+u+"_2").hover(function(){a(this).addClass(d.hover)},
function(){a(this).removeClass(d.hover)});e.delicon=a.extend([!0,"left",g.icon_del],r[c.p.id].delicon);e.cancelicon=a.extend([!0,"left",g.icon_cancel],r[c.p.id].cancelicon);!0===e.delicon[0]&&a("#dData","#"+u+"_2").addClass("right"===e.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+d.icon_base+" "+e.delicon[2]+"'></span>");!0===e.cancelicon[0]&&a("#eData","#"+u+"_2").addClass("right"===e.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+
d.icon_base+" "+e.cancelicon[2]+"'></span>");a("#dData","#"+u+"_2").click(function(){var b=[!0,""],f,h=a("#DelData>td","#"+u).text();t={};a.isFunction(r[c.p.id].onclickSubmit)&&(t=r[c.p.id].onclickSubmit.call(c,r[c.p.id],h)||{});a.isFunction(r[c.p.id].beforeSubmit)&&(b=r[c.p.id].beforeSubmit.call(c,h));if(b[0]&&!r[c.p.id].processing){r[c.p.id].processing=!0;p=c.p.prmNames;x=a.extend({},r[c.p.id].delData,t);w=p.oper;x[w]=p.deloper;z=p.id;h=String(h).split(",");if(!h.length)return!1;for(f in h)h.hasOwnProperty(f)&&
(h[f]=a.jgrid.stripPref(c.p.idPrefix,h[f]));x[z]=h.join();a(this).addClass(d.active);f=a.extend({url:r[c.p.id].url||a(c).jqGrid("getGridParam","editurl"),type:r[c.p.id].mtype,data:a.isFunction(r[c.p.id].serializeDelData)?r[c.p.id].serializeDelData.call(c,x):x,complete:function(f,g){a("#dData","#"+u+"_2").removeClass(d.active);300<=f.status&&304!==f.status?(b[0]=!1,a.isFunction(r[c.p.id].errorTextFormat)?b[1]=r[c.p.id].errorTextFormat.call(c,f):b[1]=g+" Status: '"+f.statusText+"'. Error code: "+f.status):
a.isFunction(r[c.p.id].afterSubmit)&&(b=r[c.p.id].afterSubmit.call(c,f,x));if(!1===b[0])a("#DelError>td","#"+u).html(b[1]),a("#DelError","#"+u).show();else{if(r[c.p.id].reloadAfterSubmit&&"local"!==c.p.datatype)a(c).trigger("reloadGrid");else{if(!0===c.p.treeGrid)try{a(c).jqGrid("delTreeNode",c.p.idPrefix+h[0])}catch(I){}else for(g=0;g<h.length;g++)a(c).jqGrid("delRowData",c.p.idPrefix+h[g]);c.p.selrow=null;c.p.selarrrow=[]}a.isFunction(r[c.p.id].afterComplete)&&setTimeout(function(){r[c.p.id].afterComplete.call(c,
f,h)},500)}r[c.p.id].processing=!1;b[0]&&a.jgrid.hideModal("#"+a.jgrid.jqID(C.themodal),{gb:"#gbox_"+a.jgrid.jqID(q),jqm:e.jqModal,onClose:r[c.p.id].onClose})}},a.jgrid.ajaxOptions,r[c.p.id].ajaxDelOptions);f.url||r[c.p.id].useDataProxy||(a.isFunction(c.p.dataProxy)?r[c.p.id].useDataProxy=!0:(b[0]=!1,b[1]+=" "+a.jgrid.getRegional(c,"errors.nourl")));b[0]&&(r[c.p.id].useDataProxy?(f=c.p.dataProxy.call(c,f,"del_"+c.p.id),void 0===f&&(f=[!0,""]),!1===f[0]?(b[0]=!1,b[1]=f[1]||"Error deleting the selected row!"):
a.jgrid.hideModal("#"+a.jgrid.jqID(C.themodal),{gb:"#gbox_"+a.jgrid.jqID(q),jqm:e.jqModal,onClose:r[c.p.id].onClose})):"clientArray"===f.url?(x=f.data,f.complete({status:200,statusText:""},"")):a.ajax(f))}!1===b[0]&&(a("#DelError>td","#"+u).html(b[1]),a("#DelError","#"+u).show());return!1});a("#eData","#"+u+"_2").click(function(){a.jgrid.hideModal("#"+a.jgrid.jqID(C.themodal),{gb:"#gbox_"+a.jgrid.jqID(q),jqm:r[c.p.id].jqModal,onClose:r[c.p.id].onClose});return!1});f&&r[c.p.id].beforeShowForm.call(c,
a("#"+u));a.jgrid.viewModal("#"+a.jgrid.jqID(C.themodal),{gbox:"#gbox_"+a.jgrid.jqID(q),jqm:r[c.p.id].jqModal,overlay:r[c.p.id].overlay,modal:r[c.p.id].modal})}l&&r[c.p.id].afterShowForm.call(c,a("#"+u));!0===r[c.p.id].closeOnEscape&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(C.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(b,e,c,f,g,d,h){var k=a.jgrid.getRegional(this[0],"nav"),l=this[0].p.styleUI,m=a.jgrid.styleUI[l].navigator,q=a.jgrid.styleUI[l].common;
e=a.extend({edit:!0,editicon:m.icon_edit_nav,add:!0,addicon:m.icon_add_nav,del:!0,delicon:m.icon_del_nav,search:!0,searchicon:m.icon_search_nav,refresh:!0,refreshicon:m.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:m.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},k,e||{});return this.each(function(){if(!this.p.navGrid){var m=
{themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},n=this,u,r;if(n.grid&&"string"===typeof b){a(n).data("navGrid")||a(n).data("navGrid",e);r=a(n).data("navGrid");n.p.force_regional&&(r=a.extend(r,k));void 0===a("#"+m.themodal)[0]&&(r.alerttop||r.alertleft||(void 0!==window.innerWidth?(r.alertleft=window.innerWidth,r.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?
(r.alertleft=document.documentElement.clientWidth,r.alerttop=document.documentElement.clientHeight):(r.alertleft=1024,r.alerttop=768),r.alertleft=r.alertleft/2-parseInt(r.alertwidth,10)/2,r.alerttop=r.alerttop/2-25),a.jgrid.createModal(m,"<div>"+r.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqModal:!0,drag:!0,resize:!0,caption:r.alertcap,top:r.alerttop,left:r.alertleft,width:r.alertwidth,height:r.alertheight,closeOnEscape:r.closeOnEscape,
zIndex:r.alertzIndex,styleUI:n.p.styleUI},"#gview_"+a.jgrid.jqID(n.p.id),a("#gbox_"+a.jgrid.jqID(n.p.id))[0],!0));var z=1,p,w=function(){a(this).hasClass(q.disabled)||a(this).addClass(q.hover)},B=function(){a(this).removeClass(q.hover)};r.cloneToTop&&n.p.toppager&&(z=2);for(p=0;p<z;p++){var C=a("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),E="<td class='ui-pg-button "+q.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>",A,v;0===p?(A=b,
v=n.p.id,A===n.p.toppager&&(v+="_top",z=1)):(A=n.p.toppager,v=n.p.id+"_top");"rtl"===n.p.direction&&a(C).attr("dir","rtl").css("float","right");f=f||{};r.add&&(u=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(u).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.addicon+"'></span>"+r.addtext+"</div>"),a("tr",C).append(u),a(u,C).attr({title:r.addtitle||"",id:f.id||"add_"+v}).click(function(){a(this).hasClass(q.disabled)||(a.isFunction(r.addfunc)?r.addfunc.call(n):a(n).jqGrid("editGridRow",
"new",f));return!1}).hover(w,B),u=null);c=c||{};r.edit&&(u=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(u).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.editicon+"'></span>"+r.edittext+"</div>"),a("tr",C).append(u),a(u,C).attr({title:r.edittitle||"",id:c.id||"edit_"+v}).click(function(){if(!a(this).hasClass(q.disabled)){var b=n.p.selrow;b?a.isFunction(r.editfunc)?r.editfunc.call(n,b):a(n).jqGrid("editGridRow",b,c):(a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),
jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(w,B),u=null);h=h||{};r.view&&(u=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(u).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.viewicon+"'></span>"+r.viewtext+"</div>"),a("tr",C).append(u),a(u,C).attr({title:r.viewtitle||"",id:h.id||"view_"+v}).click(function(){if(!a(this).hasClass(q.disabled)){var b=n.p.selrow;b?a.isFunction(r.viewfunc)?r.viewfunc.call(n,b):a(n).jqGrid("viewGridRow",b,h):(a.jgrid.viewModal("#"+m.themodal,
{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(w,B),u=null);g=g||{};r.del&&(u=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(u).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.delicon+"'></span>"+r.deltext+"</div>"),a("tr",C).append(u),a(u,C).attr({title:r.deltitle||"",id:g.id||"del_"+v}).click(function(){if(!a(this).hasClass(q.disabled)){var b;n.p.multiselect?(b=n.p.selarrrow,0===b.length&&(b=null)):b=n.p.selrow;b?a.isFunction(r.delfunc)?
r.delfunc.call(n,b):a(n).jqGrid("delGridRow",b,g):(a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(w,B),u=null);(r.add||r.edit||r.del||r.view)&&a("tr",C).append(E);d=d||{};r.search&&(u=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(u).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.searchicon+"'></span>"+r.searchtext+"</div>"),a("tr",C).append(u),a(u,C).attr({title:r.searchtitle||"",id:d.id||"search_"+v}).click(function(){a(this).hasClass(q.disabled)||
(a.isFunction(r.searchfunc)?r.searchfunc.call(n,d):a(n).jqGrid("searchGrid",d));return!1}).hover(w,B),d.showOnLoad&&!0===d.showOnLoad&&a(u,C).click(),u=null);r.refresh&&(u=a("<td class='ui-pg-button "+q.cornerall+"'></td>"),a(u).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+r.refreshicon+"'></span>"+r.refreshtext+"</div>"),a("tr",C).append(u),a(u,C).attr({title:r.refreshtitle||"",id:"refresh_"+v}).click(function(){if(!a(this).hasClass(q.disabled)){a.isFunction(r.beforeRefresh)&&r.beforeRefresh.call(n);
n.p.search=!1;n.p.resetsearch=!0;try{if("currentfilter"!==r.refreshstate){var b=n.p.id;n.p.postData.filters="";try{a("#fbox_"+a.jgrid.jqID(b)).jqFilter("resetFilter")}catch(H){}a.isFunction(n.clearToolbar)&&n.clearToolbar.call(n,!1)}}catch(H){}switch(r.refreshstate){case "firstpage":a(n).trigger("reloadGrid",[{page:1}]);break;case "current":case "currentfilter":a(n).trigger("reloadGrid",[{current:!0}])}a.isFunction(r.afterRefresh)&&r.afterRefresh.call(n)}return!1}).hover(w,B),u=null);u=a(".ui-jqgrid").css("font-size")||
"11px";a("body").append("<div id='testpg2' class='ui-jqgrid "+a.jgrid.styleUI[l].base.entrieBox+"' style='font-size:"+u+";visibility:hidden;' ></div>");u=a(C).clone().appendTo("#testpg2").width();a("#testpg2").remove();n.p._nvtd&&(r.dropmenu?(C=null,a(n).jqGrid("_buildNavMenu",A,v,e,c,f,g,d,h)):u>n.p._nvtd[0]?(n.p.responsive?(C=null,a(n).jqGrid("_buildNavMenu",A,v,e,c,f,g,d,h)):a(A+"_"+r.position,A).append(C).width(u),n.p._nvtd[0]=u):a(A+"_"+r.position,A).append(C),n.p._nvtd[1]=u);n.p.navGrid=!0}n.p.storeNavOptions&&
(n.p.navOptions=r,n.p.editOptions=c,n.p.addOptions=f,n.p.delOptions=g,n.p.searchOptions=d,n.p.viewOptions=h,n.p.navButtons=[])}}})},navButtonAdd:function(b,e){var c=this[0].p.styleUI;e=a.extend({caption:"newButton",title:"",buttonicon:a.jgrid.styleUI[c].navigator.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},e||{});return this.each(function(){if(this.grid){"string"===typeof b&&0!==b.indexOf("#")&&(b="#"+a.jgrid.jqID(b));var f=a(".navtable",b)[0],g=this,d=a.jgrid.styleUI[c].common.disabled,
h=a.jgrid.styleUI[c].common.hover,k=a.jgrid.styleUI[c].common.cornerall,l=a.jgrid.styleUI[c].common.icon_base;g.p.storeNavOptions&&!e.internal&&g.p.navButtons.push([b,e]);if(f){if(!e.id||void 0===a("#"+a.jgrid.jqID(e.id),f)[0]){var m=a("<td></td>");"NONE"===e.buttonicon.toString().toUpperCase()?a(m).addClass("ui-pg-button "+k).append("<div class='ui-pg-div'>"+e.caption+"</div>"):a(m).addClass("ui-pg-button "+k).append("<div class='ui-pg-div'><span class='"+l+" "+e.buttonicon+"'></span>"+e.caption+
"</div>");e.id&&a(m).attr("id",e.id);"first"===e.position?0===f.rows[0].cells.length?a("tr",f).append(m):a("tr td:eq(0)",f).before(m):a("tr",f).append(m);a(m,f).attr("title",e.title||"").click(function(b){a(this).hasClass(d)||a.isFunction(e.onClickButton)&&e.onClickButton.call(g,b);return!1}).hover(function(){a(this).hasClass(d)||a(this).addClass(h)},function(){a(this).removeClass(h)})}}else if(f=a(".dropdownmenu",b)[0]){var q=a(f).val(),f=e.id||a.jgrid.randId(),k=a('<li class="ui-menu-item" role="presentation"><a class="'+
k+' g-menu-item" tabindex="0" role="menuitem" id="'+f+'">'+(e.caption||e.title)+"</a></li>");q&&("first"===e.position?a("#"+q).prepend(k):a("#"+q).append(k),a(k).on("click",function(b){a(this).hasClass(d)||(a("#"+q).hide(),a.isFunction(e.onClickButton)&&e.onClickButton.call(g,b));return!1}).find("a").hover(function(){a(this).hasClass(d)||a(this).addClass(h)},function(){a(this).removeClass(h)}))}}})},navSeparatorAdd:function(b,e){var c=a.jgrid.styleUI[this[0].p.styleUI].common;e=a.extend({sepclass:"ui-separator",
sepcontent:"",position:"last"},e||{});return this.each(function(){if(this.grid){"string"===typeof b&&0!==b.indexOf("#")&&(b="#"+a.jgrid.jqID(b));var f=a(".navtable",b)[0],g;this.p.storeNavOptions&&this.p.navButtons.push([b,e]);f?(g="<td class='ui-pg-button "+c.disabled+"' style='width:4px;'><span class='"+e.sepclass+"'></span>"+e.sepcontent+"</td>","first"===e.position?0===f.rows[0].cells.length?a("tr",f).append(g):a("tr td:eq(0)",f).before(g):a("tr",f).append(g)):(f=a(".dropdownmenu",b)[0],g="<li class='ui-menu-item "+
c.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",f&&(f=a(f).val())&&("first"===e.position?a("#"+f).prepend(g):a("#"+f).append(g)))}})},_buildNavMenu:function(b,e,c,f,g,d,h,k){return this.each(function(){var l=this,m=a.jgrid.getRegional(l,"nav"),q=l.p.styleUI,t=a.jgrid.styleUI[q].filter,n=a.jgrid.styleUI[q].common,u="form_menu_"+a.jgrid.randId(),m="<button class='dropdownmenu "+n.button+"' value='"+u+"'>"+(c.navButtonText?c.navButtonText:m.selectcaption||"Actions")+
"</button>";a(b+"_"+c.position,b).append(m);var r="alertmod_"+this.p.id;(function(){var b=a(".ui-jqgrid-view").css("font-size")||"11px",m=a('<ul id="'+u+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+b+'"></ul>');c.add&&(g=g||{},b=g.id||"add_"+e,b=a('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+b+'">'+(c.addtext||c.addtitle)+"</a></li>").click(function(){a(this).hasClass(n.disabled)||
(a.isFunction(c.addfunc)?c.addfunc.call(l):a(l).jqGrid("editGridRow","new",g),a(m).hide());return!1}),a(m).append(b));c.edit&&(f=f||{},b=f.id||"edit_"+e,b=a('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+b+'">'+(c.edittext||c.edittitle)+"</a></li>").click(function(){if(!a(this).hasClass(n.disabled)){var b=l.p.selrow;b?a.isFunction(c.editfunc)?c.editfunc.call(l,b):a(l).jqGrid("editGridRow",b,f):(a.jgrid.viewModal("#"+r,{gbox:"#gbox_"+
a.jgrid.jqID(l.p.id),jqm:!0}),a("#jqg_alrt").focus());a(m).hide()}return!1}),a(m).append(b));c.view&&(k=k||{},b=k.id||"view_"+e,b=a('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+b+'">'+(c.viewtext||c.viewtitle)+"</a></li>").click(function(){if(!a(this).hasClass(n.disabled)){var b=l.p.selrow;b?a.isFunction(c.editfunc)?c.viewfunc.call(l,b):a(l).jqGrid("viewGridRow",b,k):(a.jgrid.viewModal("#"+r,{gbox:"#gbox_"+a.jgrid.jqID(l.p.id),
jqm:!0}),a("#jqg_alrt").focus());a(m).hide()}return!1}),a(m).append(b));c.del&&(d=d||{},b=d.id||"del_"+e,b=a('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+b+'">'+(c.deltext||c.deltitle)+"</a></li>").click(function(){if(!a(this).hasClass(n.disabled)){var b;l.p.multiselect?(b=l.p.selarrrow,0===b.length&&(b=null)):b=l.p.selrow;b?a.isFunction(c.delfunc)?c.delfunc.call(l,b):a(l).jqGrid("delGridRow",b,d):(a.jgrid.viewModal("#"+r,
{gbox:"#gbox_"+a.jgrid.jqID(l.p.id),jqm:!0}),a("#jqg_alrt").focus());a(m).hide()}return!1}),a(m).append(b));(c.add||c.edit||c.del||c.view)&&a(m).append("<li class='ui-menu-item "+n.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>");c.search&&(h=h||{},b=h.id||"search_"+e,b=a('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+b+'">'+(c.searchtext||c.searchtitle)+"</a></li>").click(function(){a(this).hasClass(n.disabled)||
(a.isFunction(c.searchfunc)?c.searchfunc.call(l,h):a(l).jqGrid("searchGrid",h),a(m).hide());return!1}),a(m).append(b),h.showOnLoad&&!0===h.showOnLoad&&a(b).click());c.refresh&&(b=h.id||"search_"+e,b=a('<li class="ui-menu-item" role="presentation"><a class="'+n.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+b+'">'+(c.refreshtext||c.refreshtitle)+"</a></li>").click(function(){if(!a(this).hasClass(n.disabled)){a.isFunction(c.beforeRefresh)&&c.beforeRefresh.call(l);l.p.search=!1;l.p.resetsearch=
!0;try{if("currentfilter"!==c.refreshstate){var b=l.p.id;l.p.postData.filters="";try{a("#fbox_"+a.jgrid.jqID(b)).jqFilter("resetFilter")}catch(B){}a.isFunction(l.clearToolbar)&&l.clearToolbar.call(l,!1)}}catch(B){}switch(c.refreshstate){case "firstpage":a(l).trigger("reloadGrid",[{page:1}]);break;case "current":case "currentfilter":a(l).trigger("reloadGrid",[{current:!0}])}a.isFunction(c.afterRefresh)&&c.afterRefresh.call(l);a(m).hide()}return!1}),a(m).append(b));a(m).hide();a("body").append(m);a("#"+
u).addClass("ui-menu "+t.menu_widget);a("#"+u+" > li > a").hover(function(){a(this).addClass(n.hover)},function(){a(this).removeClass(n.hover)})})();a(".dropdownmenu",b+"_"+c.position).on("click",function(b){var c=a(this).offset(),d=c.left,c=parseInt(c.top),e=a(this).val();a("#"+e).show().css({top:c-(a("#"+e).height()+10)+"px",left:d+"px"});b.stopPropagation()});a("body").on("click",function(b){a(b.target).hasClass("dropdownmenu")||a("#"+u).hide()})})},GridToForm:function(b,e){return this.each(function(){var c=
this,f;if(c.grid){var g=a(c).jqGrid("getRowData",b);if(g)for(f in g)g.hasOwnProperty(f)&&(a("[name="+a.jgrid.jqID(f)+"]",e).is("input:radio")||a("[name="+a.jgrid.jqID(f)+"]",e).is("input:checkbox")?a("[name="+a.jgrid.jqID(f)+"]",e).each(function(){if(a(this).val()==g[f])a(this)[c.p.useProp?"prop":"attr"]("checked",!0);else a(this)[c.p.useProp?"prop":"attr"]("checked",!1)}):a("[name="+a.jgrid.jqID(f)+"]",e).val(g[f]))}})},FormToGrid:function(b,e,c,f){return this.each(function(){if(this.grid){c||(c=
"set");f||(f="first");var g=a(e).serializeArray(),d={};a.each(g,function(a,b){d[b.name]=b.value});"add"===c?a(this).jqGrid("addRowData",b,d,f):"set"===c&&a(this).jqGrid("setRowData",b,d)}})}});a.jgrid.extend({groupingSetup:function(){return this.each(function(){var b,e,c=this.p.colModel,f=this.p.groupingView;b=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].grouping;if(null===f||"object"!==typeof f&&!a.isFunction(f))this.p.grouping=!1;else if(f.plusicon||(f.plusicon=b.icon_plus),f.minusicon||(f.minusicon=
b.icon_minus),f.groupField.length){void 0===f.visibiltyOnNextGrouping&&(f.visibiltyOnNextGrouping=[]);f.lastvalues=[];f._locgr||(f.groups=[]);f.counters=[];for(b=0;b<f.groupField.length;b++)f.groupOrder[b]||(f.groupOrder[b]="asc"),f.groupText[b]||(f.groupText[b]="{0}"),"boolean"!==typeof f.groupColumnShow[b]&&(f.groupColumnShow[b]=!0),"boolean"!==typeof f.groupSummary[b]&&(f.groupSummary[b]=!1),f.groupSummaryPos[b]||(f.groupSummaryPos[b]="footer"),!0===f.groupColumnShow[b]?(f.visibiltyOnNextGrouping[b]=
!0,a(this).jqGrid("showCol",f.groupField[b])):(f.visibiltyOnNextGrouping[b]=a("#"+a.jgrid.jqID(this.p.id+"_"+f.groupField[b])).is(":visible"),a(this).jqGrid("hideCol",f.groupField[b]));f.summary=[];f.hideFirstGroupCol&&a.isArray(f.formatDisplayField)&&!a.isFunction(f.formatDisplayField[0])&&(f.formatDisplayField[0]=function(a){return a});b=0;for(e=c.length;b<e;b++)f.hideFirstGroupCol&&!c[b].hidden&&f.groupField[0]===c[b].name&&(c[b].formatter=function(){return""}),c[b].summaryType&&(c[b].summaryDivider?
f.summary.push({nm:c[b].name,st:c[b].summaryType,v:"",sd:c[b].summaryDivider,vd:"",sr:c[b].summaryRound,srt:c[b].summaryRoundType||"round"}):f.summary.push({nm:c[b].name,st:c[b].summaryType,v:"",sr:c[b].summaryRound,srt:c[b].summaryRoundType||"round"}))}else this.p.grouping=!1})},groupingPrepare:function(b,e){this.each(function(){var c=this.p.groupingView,f=this,g,d=function(){a.isFunction(this.st)?this.v=this.st.call(f,this.v,this.nm,b):(this.v=a(f).jqGrid("groupingCalculations.handler",this.st,
this.v,this.nm,this.sr,this.srt,b),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=a(f).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,b)))},h=c.groupField.length,k,l,m,q=0;for(g=0;g<h;g++)k=c.groupField[g],m=c.displayField[g],l=b[k],m=null==m?null:b[m],null==m&&(m=l),void 0!==l&&(0===e?(c.groups.push({idx:g,dataIndex:k,value:l,displayValue:m,startRow:e,cnt:1,summary:[]}),c.lastvalues[g]=l,c.counters[g]={cnt:1,pos:c.groups.length-1,summary:a.extend(!0,[],c.summary)}):
"object"===typeof l||(a.isArray(c.isInTheSameGroup)&&a.isFunction(c.isInTheSameGroup[g])?c.isInTheSameGroup[g].call(f,c.lastvalues[g],l,g,c):c.lastvalues[g]===l)?1===q?(c.groups.push({idx:g,dataIndex:k,value:l,displayValue:m,startRow:e,cnt:1,summary:[]}),c.lastvalues[g]=l,c.counters[g]={cnt:1,pos:c.groups.length-1,summary:a.extend(!0,[],c.summary)}):(c.counters[g].cnt+=1,c.groups[c.counters[g].pos].cnt=c.counters[g].cnt):(c.groups.push({idx:g,dataIndex:k,value:l,displayValue:m,startRow:e,cnt:1,summary:[]}),
c.lastvalues[g]=l,q=1,c.counters[g]={cnt:1,pos:c.groups.length-1,summary:a.extend(!0,[],c.summary)}),a.each(c.counters[g].summary,d),c.groups[c.counters[g].pos].summary=c.counters[g].summary)});return this},groupingToggle:function(b){this.each(function(){var e=this.p.groupingView,c=b.split("_"),f=parseInt(c[c.length-2],10);c.splice(c.length-2,2);var g=c.join("_"),c=e.minusicon,e=e.plusicon,d=a("#"+a.jgrid.jqID(b)),d=d.length?d[0].nextSibling:null,h=a("#"+a.jgrid.jqID(b)+" span.tree-wrap-"+this.p.direction),
k=function(b){b=a.map(b.split(" "),function(a){if(a.substring(0,g.length+1)===g+"_")return parseInt(a.substring(g.length+1),10)});return 0<b.length?b[0]:void 0},l,m,q=!1,t=!1,n=this.p.frozenColumns?this.p.id+"_frozen":!1,u=(l=n?a("#"+a.jgrid.jqID(b),"#"+a.jgrid.jqID(n)):!1)&&l.length?l[0].nextSibling:null;if(h.hasClass(c)){if(d)for(;d;){l=k(d.className);if(void 0!==l&&l<=f)break;a(d).hide();d=d.nextSibling;n&&(a(u).hide(),u=u.nextSibling)}h.removeClass(c).addClass(e);q=!0}else{if(d)for(m=void 0;d;){l=
k(d.className);void 0===m&&(m=void 0===l);t=a(d).hasClass("ui-subgrid")&&a(d).hasClass("ui-sg-collapsed");if(void 0!==l){if(l<=f)break;l!==f+1||t||(a(d).show().find(">td>span.tree-wrap-"+this.p.direction).removeClass(c).addClass(e),n&&a(u).show().find(">td>span.tree-wrap-"+this.p.direction).removeClass(c).addClass(e))}else m&&!t&&(a(d).show(),n&&a(u).show());d=d.nextSibling;n&&(u=u.nextSibling)}h.removeClass(e).addClass(c)}a(this).triggerHandler("jqGridGroupingClickGroup",[b,q]);a.isFunction(this.p.onClickGroup)&&
this.p.onClickGroup.call(this,b,q)});return!1},groupingRender:function(b,e,c,f){return this.each(function(){function g(a,b,c){var d=!1;if(0===b)d=c[a];else{var e=c[a].idx;if(0===e)d=c[a];else for(;0<=a;a--)if(c[a].idx===e-b){d=c[a];break}}return d}function d(b,c,d,f){var k=g(b,c,d),l=h.p.colModel,m,n=k.cnt;b="";var q;for(q=f;q<e;q++){var p="<td "+h.formatCol(q,1,"")+">&#160;</td>",t="{0}";a.each(k.summary,function(){if(this.nm===l[q].name){l[q].summaryTpl&&(t=l[q].summaryTpl);"string"===typeof this.st&&
"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v/=this.vd:this.v&&0<n&&(this.v/=n));try{this.groupCount=k.cnt,this.groupIndex=k.dataIndex,this.groupValue=k.value,m=h.formatter("",this.v,q,this)}catch(Q){m=this.v}p="<td "+h.formatCol(q,1,"")+">"+a.jgrid.template(t,m)+"</td>";return!1}});b+=p}return b}var h=this,k=h.p.groupingView,l="",m="",q,t,n=k.groupCollapse?k.plusicon:k.minusicon,u,r=[],z=k.groupField.length,p=a.jgrid.styleUI[h.p.styleUI||"jQueryUI"].common,n=n+" tree-wrap-"+h.p.direction;
a.each(h.p.colModel,function(a,b){var c;for(c=0;c<z;c++)if(k.groupField[c]===b.name){r[c]=a;break}});var w=0,B=a.makeArray(k.groupSummary),C;B.reverse();C=h.p.multiselect?' colspan="2"':"";a.each(k.groups,function(g,A){if(k._locgr&&!(A.startRow+A.cnt>(c-1)*f&&A.startRow<c*f))return!0;w++;t=h.p.id+"ghead_"+A.idx;q=t+"_"+g;m="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+p.icon_base+" "+n+"' onclick=\"jQuery('#"+a.jgrid.jqID(h.p.id)+"').jqGrid('groupingToggle','"+q+"');return false;\"></span>";
try{a.isArray(k.formatDisplayField)&&a.isFunction(k.formatDisplayField[A.idx])?(A.displayValue=k.formatDisplayField[A.idx].call(h,A.displayValue,A.value,h.p.colModel[r[A.idx]],A.idx,k),u=A.displayValue):u=h.formatter(q,A.displayValue,r[A.idx],A.value)}catch(I){u=A.displayValue}var v;v=a.isFunction(k.groupText[A.idx])?k.groupText[A.idx].call(h,u,A.cnt,A.summary):a.jgrid.template(k.groupText[A.idx],u,A.cnt,A.summary);"string"!==typeof v&&"number"!==typeof v&&(v=u);"header"===k.groupSummaryPos[A.idx]?
(l+='<tr id="'+q+'"'+(k.groupCollapse&&0<A.idx?' style="display:none;" ':" ")+'role="row" class= "'+p.content+" jqgroup ui-row-"+h.p.direction+" "+t+'"><td style="padding-left:'+12*A.idx+'px;"'+C+">"+m+v+"</td>",l+=d(g,0,k.groups,!1===k.groupColumnShow[A.idx]?""===C?2:3:""===C?1:2),l+="</tr>"):l+='<tr id="'+q+'"'+(k.groupCollapse&&0<A.idx?' style="display:none;" ':" ")+'role="row" class= "'+p.content+" jqgroup ui-row-"+h.p.direction+" "+t+'"><td style="padding-left:'+12*A.idx+'px;" colspan="'+(!1===
k.groupColumnShow[A.idx]?e-1:e)+'">'+m+v+"</td></tr>";if(z-1===A.idx){v=k.groups[g+1];var x,E=0;x=A.startRow;var D=void 0!==v?v.startRow:k.groups[g].startRow+k.groups[g].cnt;k._locgr&&(E=(c-1)*f,E>A.startRow&&(x=E));for(;x<D&&b[x-E];x++)l+=b[x-E].join("");if("header"!==k.groupSummaryPos[A.idx]){var y;if(void 0!==v){for(y=0;y<k.groupField.length&&v.dataIndex!==k.groupField[y];y++);w=k.groupField.length-y}for(v=0;v<w;v++)B[v]&&(E="",k.groupCollapse&&!k.showSummaryOnHide&&(E=' style="display:none;"'),
l+="<tr"+E+' jqfootlevel="'+(A.idx-v)+'" role="row" class="'+p.content+" jqfoot ui-row-"+h.p.direction+'">',l+=d(g,v,k.groups,0),l+="</tr>");w=y}}});a("#"+a.jgrid.jqID(h.p.id)+" tbody:first").append(l);l=null})},groupingGroupBy:function(b,e){return this.each(function(){"string"===typeof b&&(b=[b]);var c=this.p.groupingView;this.p.grouping=!0;c._locgr=!1;void 0===c.visibiltyOnNextGrouping&&(c.visibiltyOnNextGrouping=[]);var f;for(f=0;f<c.groupField.length;f++)!c.groupColumnShow[f]&&c.visibiltyOnNextGrouping[f]&&
a(this).jqGrid("showCol",c.groupField[f]);for(f=0;f<b.length;f++)c.visibiltyOnNextGrouping[f]=a("#"+a.jgrid.jqID(this.p.id)+"_"+a.jgrid.jqID(b[f])).is(":visible");this.p.groupingView=a.extend(this.p.groupingView,e||{});c.groupField=b;a(this).trigger("reloadGrid")})},groupingRemove:function(b){return this.each(function(){void 0===b&&(b=!0);this.p.grouping=!1;if(!0===b){var e=this.p.groupingView,c;for(c=0;c<e.groupField.length;c++)!e.groupColumnShow[c]&&e.visibiltyOnNextGrouping[c]&&a(this).jqGrid("showCol",
e.groupField);a("tr.jqgroup, tr.jqfoot","#"+a.jgrid.jqID(this.p.id)+" tbody:first").remove();a("tr.jqgrow:hidden","#"+a.jgrid.jqID(this.p.id)+" tbody:first").show()}else a(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(a,e,c,f,g,d){var b={sum:function(){return parseFloat(e||0)+parseFloat(d[c]||0)},min:function(){return""===e?parseFloat(d[c]||0):Math.min(parseFloat(e),parseFloat(d[c]||0))},max:function(){return""===e?parseFloat(d[c]||0):Math.max(parseFloat(e),parseFloat(d[c]||
0))},count:function(){""===e&&(e=0);return d.hasOwnProperty(c)?e+1:0},avg:function(){return b.sum()}};if(!b[a])throw"jqGrid Grouping No such method: "+a;a=b[a]();null!=f&&("fixed"===g?a=a.toFixed(f):(f=Math.pow(10,f),a=Math.round(a*f)/f));return a}},setGroupHeaders:function(b){b=a.extend({useColSpanStyle:!1,groupHeaders:[]},b||{});return this.each(function(){var e,c,f=0,g,d,h,k,l,m,q=this.p.colModel,t=q.length,n=this.grid.headers,u=a("table.ui-jqgrid-htable",this.grid.hDiv),r=u.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");
g=u.children("thead");var z=u.find(".jqg-first-row-header"),p=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].base;this.p.groupHeader||(this.p.groupHeader=[]);this.p.groupHeader.push(b);void 0===z[0]?z=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):z.empty();var w,B=function(a,b){var c=b.length,d;for(d=0;d<c;d++)if(b[d].startColumnName===a)return d;return-1};a(this).prepend(g);g=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header");
for(e=0;e<t;e++)if(h=n[e].el,k=a(h),c=q[e],d={height:"0px",width:n[e].width+"px",display:c.hidden?"none":""},a("<th>",{role:"gridcell"}).css(d).addClass("ui-first-th-"+this.p.direction).appendTo(z),h.style.width="",d=B(c.name,b.groupHeaders),0<=d){d=b.groupHeaders[d];f=d.numberOfColumns;c=d.titleText;m=d.className||"";for(d=l=0;d<f&&e+d<t;d++)q[e+d].hidden||l++;d=a("<th>").attr({role:"columnheader"}).addClass(p.headerBox+" ui-th-column-header ui-th-"+this.p.direction+" "+m).html(c);0<l&&d.attr("colspan",
String(l));this.p.headertitles&&d.attr("title",d.text());0===l&&d.hide();k.before(d);g.append(h);--f}else 0===f?b.useColSpanStyle?(h=k.parent().siblings("tr").length,h=0==h?2:h+1,k.attr("rowspan",h)):(a("<th>",{role:"columnheader"}).addClass(p.headerBox+" ui-th-column-header ui-th-"+this.p.direction).css({display:c.hidden?"none":""}).insertBefore(k),g.append(h)):(g.append(h),f--);q=a(this).children("thead");q.prepend(z);g.insertAfter(r);u.append(q);b.useColSpanStyle&&(u.find("span.ui-jqgrid-resize").each(function(){var b=
a(this).parent();b.is(":visible")&&(this.style.cssText="height: "+b.height()+"px !important; cursor: col-resize;")}),u.find("div.ui-jqgrid-sortable").each(function(){var b=a(this),c=b.parent();c.is(":visible")&&c.is(":has(span.ui-jqgrid-resize)")&&b.css("top",(c.height()-b.outerHeight())/2-4+"px")}));w=q.find("tr.jqg-first-row-header");a(this).on("jqGridResizeStop.setGroupHeaders",function(a,b,c){w.find("th").eq(c)[0].style.width=b+"px"})})},destroyGroupHeader:function(b){void 0===b&&(b=!0);return this.each(function(){var e,
c,f,g,d,h;c=this.grid;var k=a("table.ui-jqgrid-htable thead",c.hDiv),l=this.p.colModel;if(c){a(this).off(".setGroupHeaders");e=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels");g=c.headers;c=0;for(f=g.length;c<f;c++){d=l[c].hidden?"none":"";d=a(g[c].el).width(g[c].width).css("display",d);try{d.removeAttr("rowSpan")}catch(m){d.attr("rowSpan",1)}e.append(d);h=d.children("span.ui-jqgrid-resize");0<h.length&&(h[0].style.height="");d.children("div")[0].style.top=""}a(k).children("tr.ui-jqgrid-labels").remove();
a(k).prepend(e);!0===b&&a(this).jqGrid("setGridParam",{groupHeader:null})}})}});a.jgrid=a.jgrid||{};a.extend(a.jgrid,{saveState:function(b,e){e=a.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16",debug:!1},e||{});if(b){var c="",f="",g;b=a("#"+b)[0];if(b.grid){(c=a(b).data("inlineNav"))&&b.p.inlineNav&&a(b).jqGrid("setGridParam",{_iN:c});(c=a(b).data("filterToolbar"))&&b.p.filterToolbar&&a(b).jqGrid("setGridParam",
{_fT:c});var c=a(b).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:""}),f=a(b.grid.bDiv).find(".ui-jqgrid-btable tbody:first").html(),d=f.indexOf("</tr>"),f=f.slice(d+5);a.isFunction(e.beforeSetItem)&&(g=e.beforeSetItem.call(b,c),null!=g&&(c=g));if(e.debug){a("#gbox_tree").prepend('<a id="link_save" target="_blank" download="jqGrid_dump.txt">Click to save Dump Data</a>');var d=[],h,k={};d.push("Grid Options\n");d.push(c);d.push("\n");d.push("GridData\n");d.push(f);k.type="plain/text;charset=utf-8";
try{h=new File(d,"jqGrid_dump.txt",k)}catch(l){h=new Blob(d,k)}h=URL.createObjectURL(h);a("#link_save").attr("href",h).on("click",function(){a(this).remove()})}if(e.compression&&e.compressionModule)try{g=window[e.compressionModule][e.compressionMethod](c),null!=g&&(c=g,f=window[e.compressionModule][e.compressionMethod](f))}catch(l){}if(e.useStorage&&a.jgrid.isLocalStorage())try{window[e.storageType].setItem("jqGrid"+b.p.id,c),window[e.storageType].setItem("jqGrid"+b.p.id+"_data",f)}catch(l){22===
l.code&&alert("Local storage limit is over!")}return c}}},loadState:function(b,e,c){c=a.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,afterSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16"},c||{});if(b){var f,g=a("#"+b)[0],d,h,k;if(c.useStorage)try{e=window[c.storageType].getItem("jqGrid"+g.id),d=window[c.storageType].getItem("jqGrid"+g.id+"_data")}catch(n){}if(e){if(c.decompression&&c.decompressionModule)try{f=
window[c.decompressionModule][c.decompressionMethod](e),null!=f&&(e=f,d=window[c.decompressionModule][c.decompressionMethod](d))}catch(n){}if((f=jqGridUtils.parse(e))&&"object"===a.type(f)){g.grid&&a.jgrid.gridUnload(b);a.isFunction(c.beforeSetGrid)&&(e=c.beforeSetGrid(f))&&"object"===a.type(e)&&(f=e);e={reccount:f.reccount,records:f.records,lastpage:f.lastpage,shrinkToFit:f.shrinkToFit,data:f.data,datatype:f.datatype,grouping:f.grouping};f.shrinkToFit=!1;f.data=[];f.datatype="local";f.grouping=!1;
f.inlineNav&&(h=f._iN,f._iN=null,delete f._iN);f.filterToolbar&&(k=f._fT,f._fT=null,delete f._fT);var l=a("#"+b).jqGrid(f);l.append(d);l.jqGrid("setGridParam",e);if(f.storeNavOptions&&f.navGrid&&(l[0].p.navGrid=!1,l.jqGrid("navGrid",f.pager,f.navOptions,f.editOptions,f.addOptions,f.delOptions,f.searchOptions,f.viewOptions),f.navButtons&&f.navButtons.length))for(d=0;d<f.navButtons.length;d++)"sepclass"in f.navButtons[d][1]?l.jqGrid("navSeparatorAdd",f.navButtons[d][0],f.navButtons[d][1]):l.jqGrid("navButtonAdd",
f.navButtons[d][0],f.navButtons[d][1]);l[0].refreshIndex();f.subGrid&&l.jqGrid("addSubGrid",(1===f.multiselect?1:0)+(!0===f.rownumbers?1:0));if(f.treeGrid){d=1;e=l[0].rows.length;for(var m=f.expColInd,q=f.treeReader.leaf_field,t=f.treeReader.expanded_field;d<e;){a(l[0].rows[d].cells[m]).find("div.treeclick").on("click",function(b){b=a.jgrid.stripPref(f.idPrefix,a(b.target||b.srcElement,l[0].rows).closest("tr.jqgrow")[0].id);b=l[0].p._index[b];l[0].p.data[b][q]||(l[0].p.data[b][t]?(l.jqGrid("collapseRow",
l[0].p.data[b]),l.jqGrid("collapseNode",l[0].p.data[b])):(l.jqGrid("expandRow",l[0].p.data[b]),l.jqGrid("expandNode",l[0].p.data[b])));return!1});if(!0===f.ExpandColClick)a(l[0].rows[d].cells[m]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(b){b=a.jgrid.stripPref(f.idPrefix,a(b.target||b.srcElement,l[0].rows).closest("tr.jqgrow")[0].id);var c=l[0].p._index[b];l[0].p.data[c][q]||(l[0].p.data[c][t]?(l.jqGrid("collapseRow",l[0].p.data[c]),l.jqGrid("collapseNode",l[0].p.data[c])):
(l.jqGrid("expandRow",l[0].p.data[c]),l.jqGrid("expandNode",l[0].p.data[c])));l.jqGrid("setSelection",b);return!1});d++}}f.multiselect&&a.each(f.selarrrow,function(){a("#jqg_"+b+"_"+this)[f.useProp?"prop":"attr"]("checked","checked")});f.inlineNav&&h&&(l.jqGrid("setGridParam",{inlineNav:!1}),l.jqGrid("inlineNav",f.pager,h));f.filterToolbar&&k&&(l.jqGrid("setGridParam",{filterToolbar:!1}),k.restoreFromFilters=!0,l.jqGrid("filterToolbar",k));f.frozenColumns&&l.jqGrid("setFrozenColumns");l[0].updatepager(!0,
!0);a.isFunction(c.afterSetGrid)&&c.afterSetGrid(l);c.clearAfterLoad&&(window[c.storageType].removeItem("jqGrid"+g.id),window[c.storageType].removeItem("jqGrid"+g.id+"_data"))}else alert("can not convert to object")}}},isGridInStorage:function(b,e){var c={storageType:"localStorage"},c=a.extend(c,e||{}),f,g,d;try{g=window[c.storageType].getItem("jqGrid"+b),d=window[c.storageType].getItem("jqGrid"+b+"_data"),f=null!=g&&null!=d&&"string"===typeof g&&"string"===typeof d}catch(h){f=!1}return f},setRegional:function(b,
e){var c={storageType:"sessionStorage"},c=a.extend(c,e||{});if(c.regional){a.jgrid.saveState(b,c);c.beforeSetGrid=function(a){a.regional=c.regional;a.force_regional=!0;return a};a.jgrid.loadState(b,null,c);e=a("#"+b)[0];var f=a(e).jqGrid("getGridParam","colModel"),g=-1,d=a.jgrid.getRegional(e,"nav");a.each(f,function(a){if(this.formatter&&"actions"===this.formatter)return g=a,!1});-1!==g&&d&&a("#"+b+" tbody tr").each(function(){var b=this.cells[g];a(b).find(".ui-inline-edit").attr("title",d.edittitle);
a(b).find(".ui-inline-del").attr("title",d.deltitle);a(b).find(".ui-inline-save").attr("title",d.savetitle);a(b).find(".ui-inline-cancel").attr("title",d.canceltitle)});try{window[c.storageType].removeItem("jqGrid"+e.id),window[c.storageType].removeItem("jqGrid"+e.id+"_data")}catch(h){}}},jqGridImport:function(b,e){e=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},e||{});var c=
(0===b.indexOf("#")?"":"#")+a.jgrid.jqID(b),f=function(b,e){var d=a(e.xmlGrid.config,b)[0];e=a(e.xmlGrid.data,b)[0];var f,h;if(jqGridUtils.xmlToJSON){d=jqGridUtils.xmlToJSON(d);for(h in d)d.hasOwnProperty(h)&&(f=d[h]);e?(h=d.grid.datatype,d.grid.datatype="xmlstring",d.grid.datastr=b,a(c).jqGrid(f).jqGrid("setGridParam",{datatype:h})):setTimeout(function(){a(c).jqGrid(f)},0)}else alert("xml2json or parse are not present")},g=function(b,e){if(b&&"string"===typeof b){var d=jqGridUtils.parse(b);b=d[e.jsonGrid.config];
(e=d[e.jsonGrid.data])?(d=b.datatype,b.datatype="jsonstring",b.datastr=e,a(c).jqGrid(b).jqGrid("setGridParam",{datatype:d})):a(c).jqGrid(b)}};switch(e.imptype){case "xml":a.ajax(a.extend({url:e.impurl,type:e.mtype,data:e.impData,dataType:"xml",complete:function(b,h){"success"===h&&(f(b.responseXML,e),a(c).triggerHandler("jqGridImportComplete",[b,e]),a.isFunction(e.importComplete)&&e.importComplete(b))}},e.ajaxOptions));break;case "xmlstring":e.impstring&&"string"===typeof e.impstring&&(b=a.parseXML(e.impstring))&&
(f(b,e),a(c).triggerHandler("jqGridImportComplete",[b,e]),a.isFunction(e.importComplete)&&e.importComplete(b));break;case "json":a.ajax(a.extend({url:e.impurl,type:e.mtype,data:e.impData,dataType:"json",complete:function(b){try{g(b.responseText,e),a(c).triggerHandler("jqGridImportComplete",[b,e]),a.isFunction(e.importComplete)&&e.importComplete(b)}catch(h){}}},e.ajaxOptions));break;case "jsonstring":e.impstring&&"string"===typeof e.impstring&&(g(e.impstring,e),a(c).triggerHandler("jqGridImportComplete",
[e.impstring,e]),a.isFunction(e.importComplete)&&e.importComplete(e.impstring))}}});a.jgrid.extend({jqGridExport:function(b){b=a.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{}},b||{});var e=null;this.each(function(){if(this.grid){var c=a.extend(!0,{},a(this).jqGrid("getGridParam"),b.addOptions);c.rownumbers&&(c.colNames.splice(0,1),c.colModel.splice(0,1));c.multiselect&&(c.colNames.splice(0,1),c.colModel.splice(0,1));c.subGrid&&(c.colNames.splice(0,1),c.colModel.splice(0,1));c.knv=
null;switch(b.exptype){case "xmlstring":e="<"+b.root+">"+jqGridUtils.jsonToXML(c,{xmlDecl:""})+"</"+b.root+">";break;case "jsonstring":e=jqGridUtils.stringify(c),b.root&&(e="{"+b.root+":"+e+"}")}}});return e},excelExport:function(b){b=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",beforeExport:null,exporthidden:!1,exportgrouping:!1,exportOptions:{}},b||{});return this.each(function(){if(this.grid){var e;if("remote"===b.exptype){e=a.extend({},this.p.postData);var c;e[b.oper]=b.tag;a.isFunction(b.beforeExport)&&
(c=b.beforeExport.call(this,e),a.isPlainObject(c)&&(e=c));if(b.exporthidden){c=this.p.colModel;var f,g=c.length,d=[];for(f=0;f<g;f++)void 0===c[f].hidden&&(c[f].hidden=!1),d.push({name:c[f].name,hidden:c[f].hidden});c=JSON.stringify(d);"string"===typeof c&&(e.colModel=c)}b.exportgrouping&&(c=JSON.stringify(this.p.groupingView),"string"===typeof c&&(e.groupingView=c));e=jQuery.param(e);e=-1!==b.url.indexOf("?")?b.url+"&"+e:b.url+"?"+e;window.location=e}}})}});a.jgrid.inlineEdit=a.jgrid.inlineEdit||
{};a.jgrid.extend({editRow:function(b,e,c,f,g,d,h,k,l){var m={},q=a.makeArray(arguments).slice(1);"object"===a.type(q[0])?m=q[0]:(void 0!==e&&(m.keys=e),a.isFunction(c)&&(m.oneditfunc=c),a.isFunction(f)&&(m.successfunc=f),void 0!==g&&(m.url=g),void 0!==d&&(m.extraparam=d),a.isFunction(h)&&(m.aftersavefunc=h),a.isFunction(k)&&(m.errorfunc=k),a.isFunction(l)&&(m.afterrestorefunc=l));m=a.extend(!0,{keys:!1,keyevent:"keydown",oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,
errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0},a.jgrid.inlineEdit,m);return this.each(function(){var c=this,d,e,f=0,h=null,g={},k,l,q,r=a(this).jqGrid("getStyleUI",c.p.styleUI+".inlinedit","inputClass",!0);if(c.grid&&(k=a(c).jqGrid("getInd",b,!0),!1!==k))if(c.p.beforeAction=!0,q=a.isFunction(m.beforeEditRow)?m.beforeEditRow.call(c,m,b):void 0,void 0===q&&(q=!0),!q)c.p.beforeAction=!1;else if("0"===(a(k).attr("editable")||"0")&&!a(k).hasClass("not-editable-row")&&
(l=c.p.colModel,a('td[role="gridcell"]',k).each(function(k){d=l[k].name;var m=!0===c.p.treeGrid&&d===c.p.ExpandColumn;if(m)e=a("span:first",this).html();else try{e=a.unformat.call(c,this,{rowId:b,colModel:l[k]},k)}catch(D){e=l[k].edittype&&"textarea"===l[k].edittype?a(this).text():a(this).html()}if("cb"!==d&&"subgrid"!==d&&"rn"!==d&&"btn"!==d&&(c.p.autoencode&&(e=a.jgrid.htmlDecode(e)),g[d]=e,!0===l[k].editable)){null===h&&(h=k);m?a("span:first",this).html(""):a(this).html("");var n=a.extend({},l[k].editoptions||
{},{id:b+"_"+d,name:d,rowId:b,oper:"edit"});l[k].edittype||(l[k].edittype="text");if("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))e="";var q=a.jgrid.createEl.call(c,l[k].edittype,n,e,!0,a.extend({},a.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{}));a(q).addClass("editable inline-edit-cell");-1<a.inArray(l[k].edittype,["text","textarea","password","select"])&&a(q).addClass(r);m?a("span:first",this).append(q):a(this).addClass("nopadding").append(q);a.jgrid.bindEv.call(c,q,n);"select"===
l[k].edittype&&void 0!==l[k].editoptions&&!0===l[k].editoptions.multiple&&void 0===l[k].editoptions.dataUrl&&a.jgrid.msie()&&a(q).width(a(q).width());f++}}),0<f)){g.id=b;c.p.savedRow.push(g);a(k).attr("editable","1");m.focusField&&("number"===typeof m.focusField&&parseInt(m.focusField,10)<=l.length&&(h=m.focusField),setTimeout(function(){var b=a("td:eq("+h+") :input:visible",k).not(":disabled");0<b.length&&b.focus()},0));if(!0===m.keys)a(k).on(m.keyevent,function(d){if(27===d.keyCode){a(c).jqGrid("restoreRow",
b,m.afterrestorefunc);if(c.p.inlineNav)try{a(c).jqGrid("showAddEditButtons")}catch(v){}return!1}if(13===d.keyCode){if("TEXTAREA"===d.target.tagName)return!0;if(a(c).jqGrid("saveRow",b,m)&&c.p.inlineNav)try{a(c).jqGrid("showAddEditButtons")}catch(v){}return!1}});a(c).triggerHandler("jqGridInlineEditRow",[b,m]);a.isFunction(m.oneditfunc)&&m.oneditfunc.call(c,b)}})},saveRow:function(b,e,c,f,g,d,h){var k=a.makeArray(arguments).slice(1),l={},m=this[0];"object"===a.type(k[0])?l=k[0]:(a.isFunction(e)&&(l.successfunc=
e),void 0!==c&&(l.url=c),void 0!==f&&(l.extraparam=f),a.isFunction(g)&&(l.aftersavefunc=g),a.isFunction(d)&&(l.errorfunc=d),a.isFunction(h)&&(l.afterrestorefunc=h));var l=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:a.jgrid.getRegional(m,"defaults.savetext")},a.jgrid.inlineEdit,l),q=!1,t,n={},r={},x={},z,p,w,B=!1,C=[],E=a.trim(a(m).jqGrid("getStyleUI",m.p.styleUI+".common","error",
!0));if(!m.grid)return q;w=a(m).jqGrid("getInd",b,!0);if(!1===w)return q;var A=a.jgrid.getRegional(m,"errors"),v=a.jgrid.getRegional(m,"edit"),k=a.isFunction(l.beforeSaveRow)?l.beforeSaveRow.call(m,l,b):void 0;void 0===k&&(k=!0);if(k){k=a(w).attr("editable");l.url=l.url||m.p.editurl;if("1"===k){var F,H,D;a('td[role="gridcell"]',w).each(function(b){F=m.p.colModel[b];t=F.name;D="";if("cb"!==t&&"subgrid"!==t&&!0===F.editable&&"rn"!==t&&"btn"!==t&&!a(this).hasClass("not-editable-cell")){switch(F.edittype){case "checkbox":var c=
["Yes","No"];F.editoptions&&(c=F.editoptions.value.split(":"));n[t]=a("input",this).is(":checked")?c[0]:c[1];D=a("input",this);break;case "text":case "password":case "textarea":case "button":n[t]=a("input, textarea",this).val();D=a("input, textarea",this);break;case "select":if(F.editoptions.multiple){var c=a("select",this),d=[];n[t]=a(c).val();n[t]=n[t]?n[t].join(","):"";a("select option:selected",this).each(function(b,c){d[b]=a(c).text()});r[t]=d.join(",")}else n[t]=a("select option:selected",this).val(),
r[t]=a("select option:selected",this).text();F.formatter&&"select"===F.formatter&&(r={});D=a("select",this);break;case "custom":try{if(F.editoptions&&a.isFunction(F.editoptions.custom_value)){if(n[t]=F.editoptions.custom_value.call(m,a(".customelement",this),"get"),void 0===n[t])throw"e2";}else throw"e1";}catch(P){"e1"===P?a.jgrid.info_dialog(A.errcap,"function 'custom_value' "+v.msg.nodefined,v.bClose,{styleUI:m.p.styleUI}):a.jgrid.info_dialog(A.errcap,P.message,v.bClose,{styleUI:m.p.styleUI})}}D.removeClass("has-error");
p=a.jgrid.checkValues.call(m,n[t],b);!1===p[0]&&(C.push({index:b,elem:D,msg:p[1]}),D.addClass("has-error"));m.p.autoencode&&(n[t]=a.jgrid.htmlEncode(n[t]));"clientArray"!==l.url&&F.editoptions&&!0===F.editoptions.NullIfEmpty&&""===n[t]&&(x[t]="null",B=!0)}});if(0<C.length){H=C[0].index;var y="";a.each(C,function(a,b){y+=b.msg+"\uff1b"});try{if(a.isFunction(l.errorfunc))l.errorfunc.call(m,b,w.rowIndex,y);else{var I=a(m).jqGrid("getGridRowById",b),G=a.jgrid.findPos(I);a.jgrid.info_dialog(A.errcap,"\u7b2c"+
w.rowIndex+"\u884c\u6821\u9a8c\u4e0d\u901a\u8fc7\uff1a"+y,v.bClose,{left:G[0],top:G[1]+a(I).outerHeight(),styleUI:m.p.styleUI,onClose:function(){0<=H&&C[0].elem.focus()}})}}catch(J){alert(y)}return q}a(w).find(".nopadding").removeClass("nopadding");k=m.p.prmNames;I=b;G=!1===m.p.keyName?k.id:m.p.keyName;n&&(n[k.oper]=k.editoper,void 0===n[G]||""===n[G]?n[G]=b:w.id!==m.p.idPrefix+n[G]&&(k=a.jgrid.stripPref(m.p.idPrefix,b),void 0!==m.p._index[k]&&(m.p._index[n[G]]=m.p._index[k],delete m.p._index[k]),
b=m.p.idPrefix+n[G],a(w).attr("id",b),m.p.selrow===I&&(m.p.selrow=b),a.isArray(m.p.selarrrow)&&(k=a.inArray(I,m.p.selarrrow),0<=k&&(m.p.selarrrow[k]=b)),m.p.multiselect&&(k="jqg_"+m.p.id+"_"+b,a("input.cbox",w).attr("id",k).attr("name",k))),void 0===m.p.inlineData&&(m.p.inlineData={}),n=a.extend({},n,m.p.inlineData,l.extraparam));if("clientArray"===l.url){n=a.extend({},n,r);m.p.autoencode&&a.each(n,function(b,c){n[b]=a.jgrid.htmlDecode(c)});k=a(m).jqGrid("setRowData",b,n);a(w).attr("editable","0");
for(G=0;G<m.p.savedRow.length;G++)if(String(m.p.savedRow[G].id)===String(I)){z=G;break}0<=z&&m.p.savedRow.splice(z,1);a(m).triggerHandler("jqGridInlineAfterSaveRow",[b,k,n,l]);a.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(m,b,k,n,l);q=!0;a(w).removeClass("jqgrid-new-row").off("keydown")}else a(m).jqGrid("progressBar",{method:"show",loadtype:l.saveui,htmlcontent:l.savetext}),x=a.extend({},n,x),x[G]=a.jgrid.stripPref(m.p.idPrefix,x[G]),a.ajax(a.extend({url:l.url,data:a.isFunction(m.p.serializeRowData)?
m.p.serializeRowData.call(m,x):x,type:l.mtype,async:!1,complete:function(c,d){a(m).jqGrid("progressBar",{method:"hide",loadtype:l.saveui,htmlcontent:l.savetext});if("success"===d){var e=!0,f;f=a(m).triggerHandler("jqGridInlineSuccessSaveRow",[c,b,l]);a.isArray(f)||(f=[!0,x]);f[0]&&a.isFunction(l.successfunc)&&(f=l.successfunc.call(m,c));a.isArray(f)?(e=f[0],n=f[1]||n):e=f;if(!0===e){m.p.autoencode&&a.each(n,function(b,c){n[b]=a.jgrid.htmlDecode(c)});B&&a.each(n,function(a){"null"===n[a]&&(n[a]="")});
n=a.extend({},n,r);a(m).jqGrid("setRowData",b,n);a(w).attr("editable","0");for(d=0;d<m.p.savedRow.length;d++)if(String(m.p.savedRow[d].id)===String(b)){z=d;break}0<=z&&m.p.savedRow.splice(z,1);a(m).triggerHandler("jqGridInlineAfterSaveRow",[b,c,n,l]);a.isFunction(l.aftersavefunc)&&l.aftersavefunc.call(m,b,c,n,l);q=!0;a(w).removeClass("jqgrid-new-row").off("keydown")}else a(m).triggerHandler("jqGridInlineErrorSaveRow",[b,c,d,null,l]),a.isFunction(l.errorfunc)&&l.errorfunc.call(m,b,c,d,null),!0===l.restoreAfterError&&
a(m).jqGrid("restoreRow",b,l.afterrestorefunc)}},error:function(c,d,e){a("#lui_"+a.jgrid.jqID(m.p.id)).hide();a(m).triggerHandler("jqGridInlineErrorSaveRow",[b,c,d,e,l]);if(a.isFunction(l.errorfunc))l.errorfunc.call(m,b,c,d,e);else{c=c.responseText||c.statusText;try{a.jgrid.info_dialog(A.errcap,'<div class="'+E+'">'+c+"</div>",v.bClose,{buttonalign:"right",styleUI:m.p.styleUI})}catch(P){alert(c)}}!0===l.restoreAfterError&&a(m).jqGrid("restoreRow",b,l.afterrestorefunc)}},a.jgrid.ajaxOptions,m.p.ajaxRowOptions||
{}))}return q}},restoreRow:function(b,e){var c=a.makeArray(arguments).slice(1),f={};"object"===a.type(c[0])?f=c[0]:a.isFunction(e)&&(f.afterrestorefunc=e);f=a.extend(!0,{},a.jgrid.inlineEdit,f);return this.each(function(){var c=this,d=-1,e,k={},l;if(c.grid&&(e=a(c).jqGrid("getInd",b,!0),!1!==e&&(l=a.isFunction(f.beforeCancelRow)?f.beforeCancelRow.call(c,f,b):void 0,void 0===l&&(l=!0),l))){for(l=0;l<c.p.savedRow.length;l++)if(String(c.p.savedRow[l].id)===String(b)){d=l;break}if(0<=d){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker",
"#"+a.jgrid.jqID(e.id)).datepicker("hide")}catch(m){}a.each(c.p.colModel,function(){!0===this.editable&&c.p.savedRow[d].hasOwnProperty(this.name)&&(k[this.name]=c.p.savedRow[d][this.name])});a(c).jqGrid("setRowData",b,k);a(e).attr("editable","0").off("keydown");c.p.savedRow.splice(d,1);a("#"+a.jgrid.jqID(b),"#"+a.jgrid.jqID(c.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){a(c).jqGrid("delRowData",b);a(c).jqGrid("showAddEditButtons")},0)}a(c).triggerHandler("jqGridInlineAfterRestoreRow",
[b]);a.isFunction(f.afterrestorefunc)&&f.afterrestorefunc.call(c,b)}})},addRow:function(b){b=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},b||{});return this.each(function(){if(this.grid){var e=this;e.p.beforeAction=!0;var c=a.isFunction(b.beforeAddRow)?b.beforeAddRow.call(e,b.addRowParams):void 0;void 0===c&&(c=!0);c?(b.rowID=a.isFunction(b.rowID)?b.rowID.call(e,b):null!=b.rowID?b.rowID:a.jgrid.randId(),!0===b.useDefValues&&a(e.p.colModel).each(function(){if(this.editoptions&&
this.editoptions.defaultValue){var c=this.editoptions.defaultValue,c=a.isFunction(c)?c.call(e):c;b.initdata[this.name]=c}}),a(e).jqGrid("addRowData",b.rowID,b.initdata,b.position),b.rowID=e.p.idPrefix+b.rowID,a("#"+a.jgrid.jqID(b.rowID),"#"+a.jgrid.jqID(e.p.id)).addClass("jqgrid-new-row"),b.useFormatter?a("#"+a.jgrid.jqID(b.rowID)+" .ui-inline-edit","#"+a.jgrid.jqID(e.p.id)).click():(c=e.p.prmNames,b.addRowParams.extraparam[c.oper]=c.addoper,a(e).jqGrid("editRow",b.rowID,b.addRowParams),a(e).jqGrid("setSelection",
b.rowID))):e.p.beforeAction=!1}})},inlineNav:function(b,e){var c=this[0],f=a.jgrid.getRegional(c,"nav"),g=a.jgrid.styleUI[c.p.styleUI].inlinedit;e=a.extend(!0,{edit:!0,editicon:g.icon_edit_nav,add:!0,addicon:g.icon_add_nav,save:!0,saveicon:g.icon_save_nav,cancel:!0,cancelicon:g.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0,saveAfterSelect:!1},f,e||{});return this.each(function(){if(this.grid&&!this.p.inlineNav){var d=a.jgrid.jqID(c.p.id),h=a.trim(a(c).jqGrid("getStyleUI",
c.p.styleUI+".common","disabled",!0));c.p.navGrid||a(c).jqGrid("navGrid",b,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1});a(c).data("inlineNav")||a(c).data("inlineNav",e);c.p.force_regional&&(e=a.extend(e,f));c.p.inlineNav=!0;if(!0===e.addParams.useFormatter){var g=c.p.colModel,l;for(l=0;l<g.length;l++)if(g[l].formatter&&"actions"===g[l].formatter){g[l].formatoptions&&(g=a.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},g[l].formatoptions),
e.addParams.addRowParams={keys:g.keys,oneditfunc:g.onEdit,successfunc:g.onSuccess,url:g.url,extraparam:g.extraparam,aftersavefunc:g.afterSave,errorfunc:g.onError,afterrestorefunc:g.afterRestore});break}}e.add&&a(c).jqGrid("navButtonAdd",b,{caption:e.addtext,title:e.addtitle,buttonicon:e.addicon,id:c.p.id+"_iladd",internal:!0,onClickButton:function(){void 0===c.p.beforeAction&&(c.p.beforeAction=!0);a(c).jqGrid("addRow",e.addParams);!e.addParams.useFormatter&&c.p.beforeAction&&(a("#"+d+"_ilsave").removeClass(h),
a("#"+d+"_ilcancel").removeClass(h),a("#"+d+"_iladd").addClass(h),a("#"+d+"_iledit").addClass(h))}});e.edit&&a(c).jqGrid("navButtonAdd",b,{caption:e.edittext,title:e.edittitle,buttonicon:e.editicon,id:c.p.id+"_iledit",internal:!0,onClickButton:function(){var b=a(c).jqGrid("getGridParam","selrow");b?(void 0===c.p.beforeAction&&(c.p.beforeAction=!0),a(c).jqGrid("editRow",b,e.editParams),c.p.beforeAction&&(a("#"+d+"_ilsave").removeClass(h),a("#"+d+"_ilcancel").removeClass(h),a("#"+d+"_iladd").addClass(h),
a("#"+d+"_iledit").addClass(h))):(a.jgrid.viewModal("#alertmod_"+d,{gbox:"#gbox_"+d,jqm:!0}),a("#jqg_alrt").focus())}});e.save&&(a(c).jqGrid("navButtonAdd",b,{caption:e.savetext||"",title:e.savetitle||"Save row",buttonicon:e.saveicon,id:c.p.id+"_ilsave",internal:!0,onClickButton:function(){var b=c.p.savedRow[0].id;if(b){var f=c.p.prmNames,g=f.oper,h=e.editParams;a("#"+a.jgrid.jqID(b),"#"+d).hasClass("jqgrid-new-row")?(e.addParams.addRowParams.extraparam[g]=f.addoper,h=e.addParams.addRowParams):(e.editParams.extraparam||
(e.editParams.extraparam={}),e.editParams.extraparam[g]=f.editoper);a(c).jqGrid("saveRow",b,h)&&a(c).jqGrid("showAddEditButtons")}else a.jgrid.viewModal("#alertmod_"+d,{gbox:"#gbox_"+d,jqm:!0}),a("#jqg_alrt").focus()}}),a("#"+d+"_ilsave").addClass(h));e.cancel&&(a(c).jqGrid("navButtonAdd",b,{caption:e.canceltext||"",title:e.canceltitle||"Cancel row editing",buttonicon:e.cancelicon,id:c.p.id+"_ilcancel",internal:!0,onClickButton:function(){var b=c.p.savedRow[0].id,f=e.editParams;b?(a("#"+a.jgrid.jqID(b),
"#"+d).hasClass("jqgrid-new-row")&&(f=e.addParams.addRowParams),a(c).jqGrid("restoreRow",b,f),a(c).jqGrid("showAddEditButtons")):(a.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+d,jqm:!0}),a("#jqg_alrt").focus())}}),a("#"+d+"_ilcancel").addClass(h));if(!0===e.restoreAfterSelect||!0===e.saveAfterSelect)a(c).on("jqGridBeforeSelectRow.inlineNav",function(b,d){0<c.p.savedRow.length&&!0===c.p.inlineNav&&d!==c.p.selrow&&null!==c.p.selrow&&(c.p.selrow===e.addParams.rowID?a(c).jqGrid("delRowData",c.p.selrow):
!0===e.restoreAfterSelect?a(c).jqGrid("restoreRow",c.p.selrow,e.editParams):a(c).jqGrid("saveRow",c.p.selrow,e.editParams),a(c).jqGrid("showAddEditButtons"))})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var b=a.jgrid.jqID(this.p.id),e=a.trim(a(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));a("#"+b+"_ilsave").addClass(e);a("#"+b+"_ilcancel").addClass(e);a("#"+b+"_iladd").removeClass(e);a("#"+b+"_iledit").removeClass(e)}})}});a.jgrid.msie()&&8===
a.jgrid.msiever()&&(a.expr[":"].hidden=function(a){return 0===a.offsetWidth||0===a.offsetHeight||"none"===a.style.display});a.jgrid._multiselect=!1;if(a.ui&&a.ui.multiselect){if(a.ui.multiselect.prototype._setSelected){var Ra=a.ui.multiselect.prototype._setSelected;a.ui.multiselect.prototype._setSelected=function(b,e){b=Ra.call(this,b,e);if(e&&this.selectedList){var c=this.element;this.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(c)})}return b}}a.ui.multiselect.prototype.destroy&&
(a.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();void 0===a.Widget?a.widget.prototype.destroy.apply(this,arguments):a.Widget.prototype.destroy.apply(this,arguments)});a.jgrid._multiselect=!0}a.jgrid.extend({sortableColumns:function(b){return this.each(function(){function e(){c.p.disableClick=!0}var c=this,f=a.jgrid.jqID(c.p.id),f={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+f+"_cb,#jqgh_"+f+"_rn,#jqgh_"+f+"_subgrid),:hidden)",
placeholder:{element:function(b){return a(document.createElement(b[0].nodeName)).addClass(b[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(a,b){b.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10));b.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}},update:function(b,
e){b=a(e.item).parent();b=a(">th",b);var d={},f=c.p.id+"_";a.each(c.p.colModel,function(a){d[this.name]=a});var g=[];b.each(function(){var b=a(">div",this).get(0).id.replace(/^jqgh_/,"").replace(f,"");d.hasOwnProperty(b)&&g.push(d[b])});a(c).jqGrid("remapColumns",g,!0,!0);a.isFunction(c.p.sortable.update)&&c.p.sortable.update(g);setTimeout(function(){c.p.disableClick=!1},50)}};c.p.sortable.options?a.extend(f,c.p.sortable.options):a.isFunction(c.p.sortable)&&(c.p.sortable={update:c.p.sortable});if(f.start){var g=
f.start;f.start=function(a,b){e();g.call(this,a,b)}}else f.start=e;c.p.sortable.exclude&&(f.items+=":not("+c.p.sortable.exclude+")");f=b.sortable(f);f=f.data("sortable")||f.data("uiSortable");null!=f&&(f.data("sortable").floating=!0)})},columnChooser:function(b){function e(b,c){b&&("string"===typeof b?a.fn[b]&&a.fn[b].apply(c,a.makeArray(arguments).slice(2)):a.isFunction(b)&&b.apply(c,a.makeArray(arguments).slice(2)))}var c=this,f,g,d={},h=[],k,l,m=c.jqGrid("getGridParam","colModel"),q=c.jqGrid("getGridParam",
"colNames"),t=function(b){return a.ui.multiselect.prototype&&b.data(a.ui.multiselect.prototype.widgetFullName||a.ui.multiselect.prototype.widgetName)||b.data("ui-multiselect")||b.data("multiselect")};k=a.jgrid.getRegional(this[0],"col");if(!a("#colchooser_"+a.jgrid.jqID(c[0].p.id)).length){f=a('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>');g=a("select",f);b=a.extend({width:400,height:240,classname:null,done:function(a){a&&
c.jqGrid("remapColumns",a,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(b){var c={};c[b.bSubmit]=function(){b.apply_perm();b.cleanup(!1)};c[b.bCancel]=function(){b.cleanup(!0)};return a.extend(!0,{buttons:c,close:function(){b.cleanup(!0)},modal:b.modal||!1,resizable:b.resizable||!0,width:b.width+70,resize:function(){var a=t(g),b=a.container.closest(".ui-dialog-content");0<b.length&&"object"===typeof b[0].style?b[0].style.width="":b.css("width",
"");a.selectedList.height(Math.max(a.selectedContainer.height()-a.selectedActions.outerHeight()-1,1));a.availableList.height(Math.max(a.availableContainer.height()-a.availableActions.outerHeight()-1,1))}},b.dialog_opts||{})},apply_perm:function(){var e=[];a("option",g).each(function(){a(this).is(":selected")?c.jqGrid("showCol",m[this.value].name):c.jqGrid("hideCol",m[this.value].name)});a("option[selected]",g).each(function(){e.push(parseInt(this.value,10))});a.each(e,function(){delete d[m[parseInt(this,
10)].name]});a.each(d,function(){var a=parseInt(this,10);var b=e,c=a,d,f;0<=c?(d=b.slice(),f=d.splice(c,Math.max(b.length-c,c)),c>b.length&&(c=b.length),d[c]=a,e=d.concat(f)):e=b});b.done&&b.done.call(c,e);c.jqGrid("setGridWidth",c[0].p.width,c[0].p.shrinkToFit)},cleanup:function(a){e(b.dlog,f,"destroy");e(b.msel,g,"destroy");f.remove();a&&b.done&&b.done.call(c)},msel_opts:{}},k,b||{});if(a.ui&&a.ui.multiselect&&a.ui.multiselect.defaults){if(!a.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");
return}b.msel_opts=a.extend(a.ui.multiselect.defaults,b.msel_opts)}b.caption&&f.attr("title",b.caption);b.classname&&(f.addClass(b.classname),g.addClass(b.classname));b.width&&(a(">div",f).css({width:b.width,margin:"0 auto"}),g.css("width",b.width));b.height&&(a(">div",f).css("height",b.height),g.css("height",b.height-10));g.empty();a.each(m,function(b){d[this.name]=b;this.hidedlg?this.hidden||h.push(b):g.append("<option value='"+b+"' "+(this.hidden?"":"selected='selected'")+">"+a.jgrid.stripHtml(q[b])+
"</option>")});k=a.isFunction(b.dlog_opts)?b.dlog_opts.call(c,b):b.dlog_opts;e(b.dlog,f,k);k=a.isFunction(b.msel_opts)?b.msel_opts.call(c,b):b.msel_opts;e(b.msel,g,k);k=a("#colchooser_"+a.jgrid.jqID(c[0].p.id));k.css({margin:"auto"});k.find(">div").css({width:"100%",height:"100%",margin:"auto"});k=t(g);k.container.css({width:"100%",height:"100%",margin:"auto"});k.selectedContainer.css({width:100*k.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"});k.availableContainer.css({width:100-
100*k.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"});k.selectedList.css("height","auto");k.availableList.css("height","auto");l=Math.max(k.selectedList.height(),k.availableList.height());l=Math.min(l,a(window).height());k.selectedList.css("height",l);k.availableList.css("height",l)}},sortableRows:function(b){return this.each(function(){var e=this;e.grid&&!e.p.treeGrid&&a.fn.sortable&&(b=a.extend({cursor:"move",axis:"y",items:" > .jqgrow"},b||{}),b.start&&a.isFunction(b.start)?
(b._start_=b.start,delete b.start):b._start_=!1,b.update&&a.isFunction(b.update)?(b._update_=b.update,delete b.update):b._update_=!1,b.start=function(c,f){a(f.item).css("border-width","0");a("td",f.item).each(function(a){this.style.width=e.grid.cols[a].style.width});if(e.p.subGrid){var g=a(f.item).attr("id");try{a(e).jqGrid("collapseSubGridRow",g)}catch(d){}}b._start_&&b._start_.apply(this,[c,f])},b.update=function(c,f){a(f.item).css("border-width","");!0===e.p.rownumbers&&a("td.jqgrid-rownum",e.rows).each(function(b){a(this).html(b+
1+(parseInt(e.p.page,10)-1)*parseInt(e.p.rowNum,10))});b._update_&&b._update_.apply(this,[c,f])},a("tbody:first",e).sortable(b),a("tbody:first > .jqgrow",e).disableSelection())})},gridDnD:function(b){return this.each(function(){function e(){var b=a.data(c,"dnd");a("tr.jqgrow:not(.ui-draggable)",c).draggable(a.isFunction(b.drag)?b.drag.call(a(c),b):b.drag)}var c=this,f,g;if(c.grid&&!c.p.treeGrid&&a.fn.draggable&&a.fn.droppable)if(void 0===a("#jqgrid_dnd")[0]&&a("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),
"string"===typeof b&&"updateDnD"===b&&!0===c.p.jqgdnd)e();else{var d;b=a.extend({drag:function(b){return a.extend({start:function(d,e){var f;if(c.p.subGrid){f=a(e.helper).attr("id");try{a(c).jqGrid("collapseSubGridRow",f)}catch(q){}}for(f=0;f<a.data(c,"dnd").connectWith.length;f++)0===a(a.data(c,"dnd").connectWith[f]).jqGrid("getGridParam","reccount")&&a(a.data(c,"dnd").connectWith[f]).jqGrid("addRowData","jqg_empty_row",{});e.helper.addClass("ui-state-highlight");a("td",e.helper).each(function(a){this.style.width=
c.grid.headers[a].width+"px"});b.onstart&&a.isFunction(b.onstart)&&b.onstart.call(a(c),d,e)},stop:function(d,e){var f;e.helper.dropped&&!b.dragcopy&&(f=a(e.helper).attr("id"),void 0===f&&(f=a(this).attr("id")),a(c).jqGrid("delRowData",f));for(f=0;f<a.data(c,"dnd").connectWith.length;f++)a(a.data(c,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row");b.onstop&&a.isFunction(b.onstop)&&b.onstop.call(a(c),d,e)}},b.drag_opts||{})},drop:function(b){return a.extend({accept:function(b){if(!a(b).hasClass("jqgrow"))return b;
d=a(b).closest("table.ui-jqgrid-btable");return 0<d.length&&void 0!==a.data(d[0],"dnd")?(b=a.data(d[0],"dnd").connectWith,-1!==a.inArray("#"+a.jgrid.jqID(this.id),b)?!0:!1):!1},drop:function(c,e){if(a(e.draggable).hasClass("jqgrow")){var f=a(e.draggable).attr("id"),f=e.draggable.parent().parent().jqGrid("getRowData",f);if(!b.dropbyname){var g=0,h={},k,l,r=a("#"+a.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(l in f)f.hasOwnProperty(l)&&(k=r[g].name,"cb"!==k&&"rn"!==k&&"subgrid"!==
k&&f.hasOwnProperty(l)&&r[g]&&(h[k]=f[l]),g++);f=h}catch(p){}}e.helper.dropped=!0;a.data(d[0],"dnd").beforedrop&&a.isFunction(a.data(d[0],"dnd").beforedrop)&&(k=a.data(d[0],"dnd").beforedrop.call(this,c,e,f,a(d[0]),a(this)),void 0!==k&&null!==k&&"object"===typeof k&&(f=k));if(e.helper.dropped){var z;b.autoid&&(a.isFunction(b.autoid)?z=b.autoid.call(this,f):(z=Math.ceil(1E3*Math.random()),z=b.autoidprefix+z));a("#"+a.jgrid.jqID(this.id)).jqGrid("addRowData",z,f,b.droppos)}b.ondrop&&a.isFunction(b.ondrop)&&
b.ondrop.call(this,c,e,f)}}},b.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5E3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},b||{});if(b.connectWith)for(b.connectWith=b.connectWith.split(","),b.connectWith=a.map(b.connectWith,function(b){return a.trim(b)}),a.data(c,"dnd",b),0===c.p.reccount||
c.p.jqgdnd||e(),c.p.jqgdnd=!0,f=0;f<b.connectWith.length;f++)g=b.connectWith[f],a(g).droppable(a.isFunction(b.drop)?b.drop.call(a(c),b):b.drop)}})},gridResize:function(b){return this.each(function(){var e=this,c=a.jgrid.jqID(e.p.id),f;e.grid&&a.fn.resizable&&(b=a.extend({},b||{}),b.alsoResize?(b._alsoResize_=b.alsoResize,delete b.alsoResize):b._alsoResize_=!1,b.stop&&a.isFunction(b.stop)?(b._stop_=b.stop,delete b.stop):b._stop_=!1,b.stop=function(g,d){a(e).jqGrid("setGridParam",{height:a("#gview_"+
c+" .ui-jqgrid-bdiv").height()});a(e).jqGrid("setGridWidth",d.size.width,b.shrinkToFit);b._stop_&&b._stop_.call(e,g,d);e.p.caption&&a("#gbox_"+c).css({height:"auto"});e.p.frozenColumns&&(f&&clearTimeout(f),f=setTimeout(function(){f&&clearTimeout(f);a("#"+c).jqGrid("destroyFrozenColumns");a("#"+c).jqGrid("setFrozenColumns")}))},b.alsoResize=b._alsoResize_?eval("("+("{'#gview_"+c+" .ui-jqgrid-bdiv':true,'"+b._alsoResize_+"':true}")+")"):a(".ui-jqgrid-bdiv","#gview_"+c),delete b._alsoResize_,a("#gbox_"+
c).resizable(b))})}});a.assocArraySize=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};a.jgrid.extend({pivotSetup:function(b,e){var c=[],f=[],g=[],d=[],h=[],k={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},l=[],m=a.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},e||{});this.each(function(){function e(a,b,c){a=Ma.call(a,b,c);return 0<a.length?a[0]:null}function t(a,b){var c=0,d=
!0,e;for(e in a)if(a.hasOwnProperty(e)){if(a[e]!=this[c]){d=!1;break}c++;if(c>=this.length)break}d&&(p=b);return d}function n(b,c,d,e,f){var g;if(a.isFunction(b))g=b.call(this,c,d,e);else switch(b){case "sum":g=parseFloat(c||0)+parseFloat(e[d]||0);break;case "count":if(""===c||null==c)c=0;g=e.hasOwnProperty(d)?c+1:0;break;case "min":g=""===c||null==c?parseFloat(e[d]||0):Math.min(parseFloat(c),parseFloat(e[d]||0));break;case "max":g=""===c||null==c?parseFloat(e[d]||0):Math.max(parseFloat(c),parseFloat(e[d]||
0));break;case "avg":g=(parseFloat(c||0)*(f-1)+parseFloat(e[d]||0))/f}return g}function r(b,c,e,g){var k=c.length,l,m,q,t,r="",u=[],v,w=1;a.isArray(e)?(t=e.length,u=e):(t=1,u[0]=e);d=[];h=[];for(q=d.root=0;q<t;q++){var x=[],z;for(l=0;l<k;l++){v="string"===typeof c[l].aggregator?c[l].aggregator:"cust";if(null==e)m=a.trim(c[l].member)+"_"+v,u[0]=c[l].label||v+" "+a.trim(c[l].member);else{z=e[q].replace(/\s+/g,"");try{m=1===k?r+z:r+z+"_"+v+"_"+String(l)}catch(qa){}u[q]=e[q]}m=isNaN(parseInt(m,10))?m:
m+" ";"avg"===c[l].aggregator&&(v=-1===p?f.length+"_"+m:p+"_"+m,y[v]?y[v]++:y[v]=1,w=y[v]);g[m]=x[m]=n(c[l].aggregator,g[m],c[l].member,b,w)}r+=e&&null!=e[q]?e[q].replace(/\s+/g,""):"";d[m]=x;h[m]=u[q]}return g}function x(a){var b,d,e,f,g;for(e in a)if(a.hasOwnProperty(e)){if("object"!==typeof a[e]){if("level"===e){void 0===Q[a.level]&&(Q[a.level]="",0<a.level&&-1===a.text.indexOf("_r_Totals")&&(l[a.level-1]={useColSpanStyle:!1,groupHeaders:[]}));if(Q[a.level]!==a.text&&a.children.length&&-1===a.text.indexOf("_r_Totals")&&
0<a.level){l[a.level-1].groupHeaders.push({titleText:a.label,numberOfColumns:0});d=l[a.level-1].groupHeaders.length-1;g=0===d?O:P;if(a.level-1===(m.rowTotals?1:0)&&0<d){for(var h=0,k=0;k<d;k++)h+=l[a.level-1].groupHeaders[k].numberOfColumns;h&&(g=h+C)}c[g]&&(l[a.level-1].groupHeaders[d].startColumnName=c[g].name,l[a.level-1].groupHeaders[d].numberOfColumns=c.length-g);P=c.length}Q[a.level]=a.text}if(a.level===E&&"level"===e&&0<E)if(1<A){d=1;for(b in a.fields)a.fields.hasOwnProperty(b)&&(1===d&&l[E-
1].groupHeaders.push({startColumnName:b,numberOfColumns:1,titleText:a.label||a.text}),d++);l[E-1].groupHeaders[l[E-1].groupHeaders.length-1].numberOfColumns=d-1}else l.splice(E-1,1)}null!=a[e]&&"object"===typeof a[e]&&x(a[e]);if("level"===e&&0<a.level&&(a.level===(0===E?a.level:E)||-1!==Q[a.level].indexOf("_r_Totals")))for(b in d=0,a.fields)if(a.fields.hasOwnProperty(b)){g={};for(f in m.aggregates[d])if(m.aggregates[d].hasOwnProperty(f))switch(f){case "member":case "label":case "aggregator":break;
default:g[f]=m.aggregates[d][f]}1<A?(g.name=b,g.label=m.aggregates[d].label||a.label):(g.name=a.text,g.label="_r_Totals"===a.text?m.rowTotalsText:a.label);c.push(g);d++}}}var z,p,w,B=b.length,C,E,A,v,F=0;m.rowTotals&&0<m.yDimension.length&&(m.yDimension.splice(0,0,{dataName:m.yDimension[0].dataName}),m.yDimension[0].converter=function(){return"_r_Totals"});C=a.isArray(m.xDimension)?m.xDimension.length:0;E=m.yDimension.length;A=a.isArray(m.aggregates)?m.aggregates.length:0;if(0===C||0===A)throw"xDimension or aggregates optiona are not set!";
var H;for(w=0;w<C;w++)H={name:m.xDimension[w].dataName,frozen:m.frozenStaticCols},null==m.xDimension[w].isGroupField&&(m.xDimension[w].isGroupField=!0),H=a.extend(!0,H,m.xDimension[w]),c.push(H);H=C-1;for(var D={},y=[];F<B;){z=b[F];var I=[],G=[];v={};w=0;do I[w]=a.trim(z[m.xDimension[w].dataName]),v[m.xDimension[w].dataName]=I[w],w++;while(w<C);var J=0;p=-1;w=e(f,t,I);if(!w){J=0;if(1<=E){for(J=0;J<E;J++)G[J]=a.trim(z[m.yDimension[J].dataName]),m.yDimension[J].converter&&a.isFunction(m.yDimension[J].converter)&&
(G[J]=m.yDimension[J].converter.call(this,G[J],I,G));v=r(z,m.aggregates,G,v)}else 0===E&&(v=r(z,m.aggregates,null,v));f.push(v)}else if(0<=p){J=0;if(1<=E){for(J=0;J<E;J++)G[J]=a.trim(z[m.yDimension[J].dataName]),m.yDimension[J].converter&&a.isFunction(m.yDimension[J].converter)&&(G[J]=m.yDimension[J].converter.call(this,G[J],I,G));w=r(z,m.aggregates,G,w)}else 0===E&&(w=r(z,m.aggregates,null,w));f[p]=w}z=0;var I=v=null,M;for(M in d)if(d.hasOwnProperty(M)){if(0===z)D.children&&void 0!==D.children||
(D={text:M,level:0,children:[],label:M}),v=D.children;else{I=null;for(w=0;w<v.length;w++)if(v[w].text===M){I=v[w];break}I?v=I.children:(v.push({children:[],text:M,level:z,fields:d[M],label:h[M]}),v=v[v.length-1].children)}z++}F++}var y=null,Q=[],P=c.length,O=P;0<E&&(l[E-1]={useColSpanStyle:!1,groupHeaders:[]});x(D);if(m.colTotals)for(F=f.length;F--;)for(w=C;w<c.length;w++)B=c[w].name,g[B]=g[B]?g[B]+parseFloat(f[F][B]||0):parseFloat(f[F][B]||0);if(0<H)for(w=0;w<H;w++)c[w].isGroupField&&(k.groupingView.groupField.push(c[w].name),
k.groupingView.groupSummary.push(m.groupSummary),k.groupingView.groupSummaryPos.push(m.groupSummaryPos));else k.grouping=!1;k.sortname=c[H].name;k.groupingView.hideFirstGroupCol=!0});return{colModel:c,rows:f,groupOptions:k,groupHeaders:l,summary:g}},jqPivot:function(b,e,c,f){return this.each(function(){function g(b){if(!a.isArray(b))throw"data provides is not an array";var f=jQuery(d).jqGrid("pivotSetup",b,e),g=0<a.assocArraySize(f.summary)?!0:!1,h=a.jgrid.from.call(d,f.rows),q,t,n;e.ignoreCase&&
(h=h.ignoreCase());for(b=0;b<f.groupOptions.groupingView.groupField.length;b++)q=e.xDimension[b].sortorder?e.xDimension[b].sortorder:"asc",t=e.xDimension[b].sorttype?e.xDimension[b].sorttype:"text",h.orderBy(f.groupOptions.groupingView.groupField[b],q,t,"",t);n=e.xDimension.length;if(c.sortname){q=c.sortorder?c.sortorder:"asc";t="text";for(b=0;b<n;b++)if(e.xDimension[b].dataName===c.sortname){t=e.xDimension[b].sorttype?e.xDimension[b].sorttype:"text";break}h.orderBy(c.sortname,q,t,"",t)}else f.groupOptions.sortname&&
n&&(q=e.xDimension[n-1].sortorder?e.xDimension[n-1].sortorder:"asc",t=e.xDimension[n-1].sorttype?e.xDimension[n-1].sorttype:"text",h.orderBy(f.groupOptions.sortname,q,t,"",t));jQuery(d).jqGrid(a.extend(!0,{datastr:a.extend(h.select(),g?{userdata:f.summary}:{}),datatype:"jsonstring",footerrow:g,userDataOnFooter:g,colModel:f.colModel,viewrecords:!0,sortname:e.xDimension[0].dataName},f.groupOptions,c||{}));f=f.groupHeaders;if(f.length)for(b=0;b<f.length;b++)f[b]&&f[b].groupHeaders.length&&jQuery(d).jqGrid("setGroupHeaders",
f[b]);e.frozenStaticCols&&jQuery(d).jqGrid("setFrozenColumns")}var d=this;"string"===typeof b?a.ajax(a.extend({url:b,dataType:"json",success:function(b){g(a.jgrid.getAccessor(b,f&&f.reader?f.reader:"rows"))}},f||{})):g(b)})}});a.jgrid.extend({setSubGrid:function(){return this.each(function(){var b,e;b=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].subgrid;this.p.subGridOptions=a.extend({plusicon:b.icon_plus,minusicon:b.icon_minus,openicon:b.icon_open,expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,
selectOnCollapse:!1,reloadOnExpand:!0},this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:a.jgrid.cell_width?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0});b=this.p.subGridModel;if(b[0])for(b[0].align=a.extend([],b[0].align||[]),e=0;e<b[0].name.length;e++)b[0].align[e]=b[0].align[e]||"left"})},addSubGridCell:function(b,e){var c="",f,g,d;this.each(function(){c=this.formatCol(b,e);g=
this.p.id;f=this.p.subGridOptions.plusicon;d=a.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common});return'<td role="gridcell" aria-describedby="'+g+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+c+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+d.icon_base+" "+f+"'></span></a></td>"},addSubGrid:function(b,e){return this.each(function(){var c=this;if(c.grid){var f=a.jgrid.styleUI[c.p.styleUI||"jQueryUI"].base,g=a.jgrid.styleUI[c.p.styleUI||"jQueryUI"].common,d=function(b,d,e){d=a("<td align='"+
c.p.subGridModel[0].align[e]+"'></td>").html(d);a(b).append(d)},h=function(b,e){var h,k,l,m=a("<table class='"+f.rowTable+" ui-common-table'><tbody></tbody></table>"),n=a("<tr></tr>");for(k=0;k<c.p.subGridModel[0].name.length;k++)h=a("<th class='"+f.headerBox+" ui-th-subgrid ui-th-column ui-th-"+c.p.direction+"'></th>"),a(h).html(c.p.subGridModel[0].name[k]),a(h).width(c.p.subGridModel[0].width[k]),a(n).append(h);a(m).append(n);b&&(l=c.p.xmlReader.subgrid,a(l.root+" "+l.row,b).each(function(){n=a("<tr class='"+
g.content+" ui-subtblcell'></tr>");if(!0===l.repeatitems)a(l.cell,this).each(function(b){d(n,a(this).text()||"&#160;",b)});else{var b=c.p.subGridModel[0].mapping||c.p.subGridModel[0].name;if(b)for(k=0;k<b.length;k++)d(n,a(b[k],this).text()||"&#160;",k)}a(m).append(n)}));b=a("table:first",c.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(b+e)).append(m);c.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(c.p.id)).hide();return!1},k=function(b,e){var h,k,l,m,n=a("<table class='"+f.rowTable+" ui-common-table'><tbody></tbody></table>"),
q=a("<tr></tr>");for(k=0;k<c.p.subGridModel[0].name.length;k++)h=a("<th class='"+f.headerBox+" ui-th-subgrid ui-th-column ui-th-"+c.p.direction+"'></th>"),a(h).html(c.p.subGridModel[0].name[k]),a(h).width(c.p.subGridModel[0].width[k]),a(q).append(h);a(n).append(q);if(b&&(h=c.p.jsonReader.subgrid,b=a.jgrid.getAccessor(b,h.root),void 0!==b))for(k=0;k<b.length;k++){l=b[k];q=a("<tr class='"+g.content+" ui-subtblcell'></tr>");if(!0===h.repeatitems)for(h.cell&&(l=l[h.cell]),m=0;m<l.length;m++)d(q,l[m]||
"&#160;",m);else{var p=c.p.subGridModel[0].mapping||c.p.subGridModel[0].name;if(p.length)for(m=0;m<p.length;m++)d(q,l[p[m]]||"&#160;",m)}a(n).append(q)}k=a("table:first",c.grid.bDiv).attr("id")+"_";a("#"+a.jgrid.jqID(k+e)).append(n);c.grid.hDiv.loading=!1;a("#load_"+a.jgrid.jqID(c.p.id)).hide();return!1},l=function(b){var d,e,f,g;d=a(b).attr("id");e={nd_:(new Date).getTime()};e[c.p.prmNames.subgridid]=d;if(!c.p.subGridModel[0])return!1;if(c.p.subGridModel[0].params)for(g=0;g<c.p.subGridModel[0].params.length;g++)for(f=
0;f<c.p.colModel.length;f++)c.p.colModel[f].name===c.p.subGridModel[0].params[g]&&(e[c.p.colModel[f].name]=a("td:eq("+f+")",b).text().replace(/\&#160\;/ig,""));if(!c.grid.hDiv.loading)switch(c.grid.hDiv.loading=!0,a("#load_"+a.jgrid.jqID(c.p.id)).show(),c.p.subgridtype||(c.p.subgridtype=c.p.datatype),a.isFunction(c.p.subgridtype)?c.p.subgridtype.call(c,e):c.p.subgridtype=c.p.subgridtype.toLowerCase(),c.p.subgridtype){case "xml":case "json":a.ajax(a.extend({type:c.p.mtype,url:a.isFunction(c.p.subGridUrl)?
c.p.subGridUrl.call(c,e):c.p.subGridUrl,dataType:c.p.subgridtype,data:a.isFunction(c.p.serializeSubGridData)?c.p.serializeSubGridData.call(c,e):e,complete:function(b){"xml"===c.p.subgridtype?h(b.responseXML,d):k(a.jgrid.parse(b.responseText),d)}},a.jgrid.ajaxOptions,c.p.ajaxSubgridOptions||{}))}return!1},m,q,t,n=0,r,x;a.each(c.p.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||n++});var z=c.rows.length,p=1,w,B=a.isFunction(c.p.isHasSubGrid);void 0!==e&&0<e&&(p=e,z=e+1);for(;p<
z;){if(a(c.rows[p]).hasClass("jqgrow"))if(c.p.scroll&&a(c.rows[p].cells[b]).off("click"),w=null,B&&(w=c.p.isHasSubGrid.call(c,c.rows[p].id)),!1===w)c.rows[p].cells[b].innerHTML="";else a(c.rows[p].cells[b]).on("click",function(){var d=a(this).parent("tr")[0];q=c.p.id;m=d.id;x=a("#"+q+"_"+m+"_expandedContent");if(a(this).hasClass("sgcollapsed")){r=a(c).triggerHandler("jqGridSubGridBeforeExpand",[q+"_"+m,m]);(r=!1===r||"stop"===r?!1:!0)&&a.isFunction(c.p.subGridBeforeExpand)&&(r=c.p.subGridBeforeExpand.call(c,
q+"_"+m,m));if(!1===r)return!1;!0===c.p.subGridOptions.reloadOnExpand||!1===c.p.subGridOptions.reloadOnExpand&&!x.hasClass("ui-subgrid")?(t=1<=b?"<td colspan='"+b+"'>&#160;</td>":"",a(d).after("<tr role='row' id='"+q+"_"+m+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+t+"<td class='"+g.content+" subgrid-cell'><span class='"+g.icon_base+" "+c.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(c.p.colNames.length-1-n,10)+"' class='"+g.content+" subgrid-data'><div id="+q+"_"+m+
" class='tablediv'></div></td></tr>"),a(c).triggerHandler("jqGridSubGridRowExpanded",[q+"_"+m,m]),a.isFunction(c.p.subGridRowExpanded)?c.p.subGridRowExpanded.call(c,q+"_"+m,m):l(d)):x.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded");a(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+g.icon_base+" "+c.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");c.p.subGridOptions.selectOnExpand&&a(c).jqGrid("setSelection",m)}else if(a(this).hasClass("sgexpanded")){r=
a(c).triggerHandler("jqGridSubGridRowColapsed",[q+"_"+m,m]);(r=!1===r||"stop"===r?!1:!0)&&a.isFunction(c.p.subGridRowColapsed)&&(r=c.p.subGridRowColapsed.call(c,q+"_"+m,m));if(!1===r)return!1;!0===c.p.subGridOptions.reloadOnExpand?x.remove(".ui-subgrid"):x.hasClass("ui-subgrid")&&x.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded");a(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+g.icon_base+" "+c.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");
c.p.subGridOptions.selectOnCollapse&&a(c).jqGrid("setSelection",m)}return!1});p++}!0===c.p.subGridOptions.expandOnLoad&&a(c.rows).filter(".jqgrow").each(function(b,c){a(c.cells[0]).click()});c.subGridXml=function(a,b){h(a,b)};c.subGridJson=function(a,b){k(a,b)}}})},expandSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var e=a(this).jqGrid("getInd",b,!0);e&&(e=a("td.sgcollapsed",e)[0])&&a(e).trigger("click")}})},collapseSubGridRow:function(b){return this.each(function(){if((this.grid||
b)&&!0===this.p.subGrid){var e=a(this).jqGrid("getInd",b,!0);e&&(e=a("td.sgexpanded",e)[0])&&a(e).trigger("click")}})},toggleSubGridRow:function(b){return this.each(function(){if((this.grid||b)&&!0===this.p.subGrid){var e=a(this).jqGrid("getInd",b,!0);if(e){var c=a("td.sgcollapsed",e)[0];c?a(c).trigger("click"):(c=a("td.sgexpanded",e)[0])&&a(c).trigger("click")}}})}});a.jgrid.extend({setTreeNode:function(b,e){return this.each(function(){var c=this;if(c.grid&&c.p.treeGrid){var f=c.p.expColInd,g=c.p.treeReader.expanded_field,
d=c.p.treeReader.leaf_field,h=c.p.treeReader.level_field,k=c.p.treeReader.icon_field,l=c.p.treeReader.loaded,m,q,t,n,r=a.jgrid.styleUI[c.p.styleUI||"jQueryUI"].common,x=b;a(c).triggerHandler("jqGridBeforeSetTreeNode",[x,e]);for(a.isFunction(c.p.beforeSetTreeNode)&&c.p.beforeSetTreeNode.call(c,x,e);b<e;){n=a.jgrid.stripPref(c.p.idPrefix,c.rows[b].id);n=c.p.data[c.p._index[n]];"nested"!==c.p.treeGridModel||n[d]||(m=parseInt(n[c.p.treeReader.left_field],10),q=parseInt(n[c.p.treeReader.right_field],10),
n[d]=q===m+1?"true":"false",c.rows[b].cells[c.p._treeleafpos].innerHTML=n[d]);m=parseInt(n[h],10);0===c.p.tree_root_level?(t=m+1,q=m):(t=m,q=m-1);t="<div class='tree-wrap tree-wrap-"+c.p.direction+"' style='width:"+18*t+"px;'>";t+="<div style='"+("rtl"===c.p.direction?"right:":"left:")+18*q+"px;' class='"+r.icon_base+" ";void 0!==n[l]&&(n[l]="true"===n[l]||!0===n[l]?!0:!1);"true"===n[d]||!0===n[d]||"1"===n[d]||1===n[d]?(t+=(void 0!==n[k]&&""!==n[k]?n[k]:c.p.treeIcons.leaf)+" tree-leaf treeclick",
n[d]=!0,q="leaf"):(n[d]=!1,q="");n[g]=("true"===n[g]||!0===n[g]||"1"===n[g]||1===n[g]?!0:!1)&&(n[l]||void 0===n[l]);t=!1===n[g]?t+(!0===n[d]?"'":c.p.treeIcons.plus+" tree-plus treeclick'"):t+(!0===n[d]?"'":c.p.treeIcons.minus+" tree-minus treeclick'");t+="></div></div>";a(c.rows[b].cells[f]).wrapInner("<span class='cell-wrapper"+q+"'></span>").prepend(t);m!==parseInt(c.p.tree_root_level,10)&&((n=a(c).jqGrid("isVisibleNode",n))||a(c.rows[b]).css("display","none"));a(c.rows[b].cells[f]).find("div.treeclick").on("click",
function(b){b=a.jgrid.stripPref(c.p.idPrefix,a(b.target||b.srcElement,c.rows).closest("tr.jqgrow")[0].id);b=c.p._index[b];c.p.data[b][d]||(c.p.data[b][g]?(a(c).jqGrid("collapseRow",c.p.data[b]),a(c).jqGrid("collapseNode",c.p.data[b])):(a(c).jqGrid("expandRow",c.p.data[b]),a(c).jqGrid("expandNode",c.p.data[b])));return!1});if(!0===c.p.ExpandColClick)a(c.rows[b].cells[f]).find("span.cell-wrapper").css("cursor","pointer").on("click",function(b){b=a.jgrid.stripPref(c.p.idPrefix,a(b.target||b.srcElement,
c.rows).closest("tr.jqgrow")[0].id);var e=c.p._index[b];c.p.data[e][d]||(c.p.data[e][g]?(a(c).jqGrid("collapseRow",c.p.data[e]),a(c).jqGrid("collapseNode",c.p.data[e])):(a(c).jqGrid("expandRow",c.p.data[e]),a(c).jqGrid("expandNode",c.p.data[e])));a(c).jqGrid("setSelection",b);return!1});b++}a(c).triggerHandler("jqGridAfterSetTreeNode",[x,e]);a.isFunction(c.p.afterSetTreeNode)&&c.p.afterSetTreeNode.call(c,x,e)}})},setTreeGrid:function(){return this.each(function(){var b=this,e=0,c,f=!1,g,d,h=[],k=
a.jgrid.styleUI[b.p.styleUI||"jQueryUI"].treegrid;if(b.p.treeGrid){b.p.treedatatype||a.extend(b.p,{treedatatype:b.p.datatype});b.p.loadonce&&(b.p.treedatatype="local");b.p.subGrid=!1;b.p.altRows=!1;b.p.pgbuttons=!1;b.p.pginput=!1;b.p.gridview=!0;null===b.p.rowTotal&&(b.p.rowNum=1E4);b.p.multiselect=!1;b.p.rowList=[];b.p.expColInd=0;c=k.icon_plus;"jQueryUI"===b.p.styleUI&&(c+="rtl"===b.p.direction?"w":"e");b.p.treeIcons=a.extend({plus:c,minus:k.icon_minus,leaf:k.icon_leaf},b.p.treeIcons||{});"nested"===
b.p.treeGridModel?b.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},b.p.treeReader):"adjacency"===b.p.treeGridModel&&(b.p.treeReader=a.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},b.p.treeReader));for(g in b.p.colModel)if(b.p.colModel.hasOwnProperty(g))for(d in c=b.p.colModel[g].name,c!==b.p.ExpandColumn||
f||(f=!0,b.p.expColInd=e),e++,b.p.treeReader)b.p.treeReader.hasOwnProperty(d)&&b.p.treeReader[d]===c&&h.push(c);a.each(b.p.treeReader,function(c,d){d&&-1===a.inArray(d,h)&&("leaf_field"===c&&(b.p._treeleafpos=e),e++,b.p.colNames.push(d),b.p.colModel.push({name:d,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(b){this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var c=a(e).jqGrid("getNodeChildren",b),f=e.p.treeReader.expanded_field,g=b[e.p.localReader.id];
!1!==(a.isFunction(e.p.beforeExpandTreeGridRow)?e.p.beforeExpandTreeGridRow.call(e,g,b,c):!0)&&(a(c).each(function(){var b=e.p.idPrefix+a.jgrid.getAccessor(this,e.p.localReader.id);a(a(e).jqGrid("getGridRowById",b)).css("display","");this[f]&&a(e).jqGrid("expandRow",this)}),a.isFunction(e.p.afterExpandTreeGridRow)&&e.p.afterExpandTreeGridRow.call(e,g,b,c))}})},collapseRow:function(b){this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var c=a(e).jqGrid("getNodeChildren",b),f=e.p.treeReader.expanded_field,
g=b[e.p.localReader.id];!1!==(a.isFunction(e.p.beforeCollapseTreeGridRow)?e.p.beforeCollapseTreeGridRow.call(e,g,b,c):!0)&&(a(c).each(function(){var b=e.p.idPrefix+a.jgrid.getAccessor(this,e.p.localReader.id);a(a(e).jqGrid("getGridRowById",b)).css("display","none");this[f]&&a(e).jqGrid("collapseRow",this)}),a.isFunction(e.p.afterCollapseTreeGridRow)&&e.p.afterCollapseTreeGridRow.call(e,g,b,c))}})},getRootNodes:function(b){var e=[];this.each(function(){var c=this,f,g,d;if(c.grid&&c.p.treeGrid)switch("boolean"!==
typeof b&&(b=!1),d=b?a(c).jqGrid("getRowData",null,!0):c.p.data,c.p.treeGridModel){case "nested":f=c.p.treeReader.level_field;a(d).each(function(){parseInt(this[f],10)===parseInt(c.p.tree_root_level,10)&&(b?e.push(c.p.data[c.p._index[this[c.p.keyName]]]):e.push(this))});break;case "adjacency":g=c.p.treeReader.parent_id_field,a(d).each(function(){if(null===this[g]||"null"===String(this[g]).toLowerCase())b?e.push(c.p.data[c.p._index[this[c.p.keyName]]]):e.push(this)})}});return e},getNodeDepth:function(b){var e=
null;this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":e=parseInt(b[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case "adjacency":e=a(this).jqGrid("getNodeAncestors",b).length}});return e},getNodeParent:function(b){var e=null;this.each(function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case "nested":var c=this.p.treeReader.left_field,f=this.p.treeReader.right_field,g=this.p.treeReader.level_field,d=parseInt(b[c],
10),h=parseInt(b[f],10),k=parseInt(b[g],10);a(this.p.data).each(function(){if(parseInt(this[g],10)===k-1&&parseInt(this[c],10)<d&&parseInt(this[f],10)>h)return e=this,!1});break;case "adjacency":for(var l=this.p.treeReader.parent_id_field,m=this.p.localReader.id,q=this.p._index[b[m]];q--;)if(this.p.data[q][m]===a.jgrid.stripPref(this.p.idPrefix,b[l])){e=this.p.data[q];break}}});return e},getNodeChildren:function(b,e){var c=[];this.each(function(){if(this.grid&&this.p.treeGrid){var f,g=e?this.rows.length:
this.p.data.length,d;switch(this.p.treeGridModel){case "nested":var h=this.p.treeReader.left_field,k=this.p.treeReader.right_field,l=this.p.treeReader.level_field,m=parseInt(b[h],10),q=parseInt(b[k],10),t=parseInt(b[l],10);for(f=0;f<g;f++)(d=e?this.p.data[this.p._index[this.rows[f].id]]:this.p.data[f])&&parseInt(d[l],10)===t+1&&parseInt(d[h],10)>m&&parseInt(d[k],10)<q&&c.push(d);break;case "adjacency":for(h=this.p.treeReader.parent_id_field,k=this.p.localReader.id,f=0;f<g;f++)(d=e?this.p.data[this.p._index[this.rows[f].id]]:
this.p.data[f])&&String(d[h])===a.jgrid.stripPref(this.p.idPrefix,b[k])&&c.push(d)}}});return c},getFullTreeNode:function(b,e){var c=[];this.each(function(){var f=this,g,d=f.p.treeReader.expanded_field;if(f.grid&&f.p.treeGrid){if(null==e||"boolean"!==typeof e)e=!1;switch(f.p.treeGridModel){case "nested":var h=f.p.treeReader.left_field,k=f.p.treeReader.right_field,l=f.p.treeReader.level_field,m=parseInt(b[h],10),q=parseInt(b[k],10),t=parseInt(b[l],10);a(this.p.data).each(function(){parseInt(this[l],
10)>=t&&parseInt(this[h],10)>=m&&parseInt(this[h],10)<=q&&(e&&(this[d]=!0),c.push(this))});break;case "adjacency":if(b){c.push(b);var n=f.p.treeReader.parent_id_field,r=f.p.localReader.id;a(this.p.data).each(function(b){g=c.length;for(b=0;b<g;b++)if(a.jgrid.stripPref(f.p.idPrefix,c[b][r])===this[n]){e&&(this[d]=!0);c.push(this);break}})}}}});return c},getNodeAncestors:function(b,e,c){var f=[];void 0===e&&(e=!1);this.each(function(){if(this.grid&&this.p.treeGrid){c=void 0===c?!1:this.p.treeReader.expanded_field;
for(var g=a(this).jqGrid("getNodeParent",b);g;){if(c)try{g[c]=!0}catch(d){}e?f.unshift(g):f.push(g);g=a(this).jqGrid("getNodeParent",g)}}});return f},isVisibleNode:function(b){var e=!0;this.each(function(){if(this.grid&&this.p.treeGrid){var c=a(this).jqGrid("getNodeAncestors",b),f=this.p.treeReader.expanded_field;a(c).each(function(){e=e&&this[f];if(!e)return!1})}});return e},isNodeLoaded:function(b){var e;this.each(function(){if(this.grid&&this.p.treeGrid){var c=this.p.treeReader.leaf_field,f=this.p.treeReader.loaded;
e=void 0!==b?void 0!==b[f]?b[f]:b[c]||0<a(this).jqGrid("getNodeChildren",b).length?!0:!1:!1}});return e},setLeaf:function(b,e,c){return this.each(function(){var f=a.jgrid.getAccessor(b,this.p.localReader.id),g=a("#"+f,this.grid.bDiv)[0],d=this.p.treeReader.leaf_field;try{var h=this.p._index[f];null!=h&&(this.p.data[h][d]=e)}catch(k){}!0===e?a("div.treeclick",g).removeClass(this.p.treeIcons.minus+" tree-minus "+this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.leaf+" tree-leaf"):!1===e&&
(f=this.p.treeIcons.minus+" tree-minus",c&&(f=this.p.treeIcons.plus+" tree-plus"),a("div.treeclick",g).removeClass(this.p.treeIcons.leaf+" tree-leaf").addClass(f))})},reloadNode:function(b,e){return this.each(function(){if(this.grid&&this.p.treeGrid){var c=this.p.localReader.id,f=this.p.selrow;a(this).jqGrid("delChildren",b[c]);void 0===e&&(e=!1);if(!e&&!jQuery._data(this,"events").jqGridAfterSetTreeNode)a(this).on("jqGridAfterSetTreeNode.reloadNode",function(){var b=this.p.treeReader.leaf_field;
if(this.p.reloadnode){var c=this.p.reloadnode,d=a(this).jqGrid("getNodeChildren",c);c[b]&&d.length?a(this).jqGrid("setLeaf",c,!1):c[b]||0!==d.length||a(this).jqGrid("setLeaf",c,!0)}this.p.reloadnode=!1});var c=this.p.treeReader.expanded_field,g=this.p.treeReader.parent_id_field,d=this.p.treeReader.loaded,h=this.p.treeReader.level_field,k=this.p.treeReader.leaf_field,l=this.p.treeReader.left_field,m=this.p.treeReader.right_field,q=a.jgrid.getAccessor(b,this.p.localReader.id),t=a("#"+q,this.grid.bDiv)[0];
b[c]=!0;b[k]||a("div.treeclick",t).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=t.rowIndex;this.p.datatype=this.p.treedatatype;this.p.reloadnode=b;e&&(this.p.treeANode=0<t.rowIndex?t.rowIndex-1:1,a(this).jqGrid("delRowData",q));"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:q,n_left:b[l],n_right:b[m],n_level:b[h]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:q,parentid:b[g],n_level:b[h]}});a(this).trigger("reloadGrid");
b[d]=!0;"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{selrow:f,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{selrow:f,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function(b){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this.p.treeReader.expanded_field,c=this.p.treeReader.parent_id_field,f=this.p.treeReader.loaded,g=this.p.treeReader.level_field,d=this.p.treeReader.left_field,h=this.p.treeReader.right_field;
if(!b[e]){var k=a.jgrid.getAccessor(b,this.p.localReader.id),l=a("#"+this.p.idPrefix+a.jgrid.jqID(k),this.grid.bDiv)[0],m=this.p._index[k];!1!==(a.isFunction(this.p.beforeExpandTreeGridNode)?this.p.beforeExpandTreeGridNode.call(this,k,b):!0)&&(a(this).jqGrid("isNodeLoaded",this.p.data[m])?(b[e]=!0,a("div.treeclick",l).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(b[e]=!0,a("div.treeclick",l).removeClass(this.p.treeIcons.plus+
" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=l.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:k,n_left:b[d],n_right:b[h],n_level:b[g]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:k,parentid:b[c],n_level:b[g]}}),a(this).trigger("reloadGrid"),b[f]=!0,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",
{postData:{nodeid:"",parentid:"",n_level:""}})),a.isFunction(this.p.afterExpandTreeGridNode)&&this.p.afterExpandTreeGridNode.call(this,k,b))}}})},collapseNode:function(b){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this.p.treeReader.expanded_field;if(b[e]){var c=a.jgrid.getAccessor(b,this.p.localReader.id),f=a.isFunction(this.p.beforeCollapseTreeGridNode)?this.p.beforeCollapseTreeGridNode.call(this,c,b):!0,g=a("#"+this.p.idPrefix+a.jgrid.jqID(c),this.grid.bDiv)[0];b[e]=!1;!1!==
f&&(a("div.treeclick",g).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"),a.isFunction(this.p.afterCollapseTreeGridNode)&&this.p.afterCollapseTreeGridNode.call(this,c,b))}}})},SortTree:function(b,e,c,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var g,d,h,k=[],l=this,m;g=a(this).jqGrid("getRootNodes",l.p.search);g=a.jgrid.from.call(this,g);g.orderBy(b,e,c,f);m=g.select();g=0;for(d=m.length;g<d;g++)h=m[g],k.push(h),a(this).jqGrid("collectChildrenSortTree",
k,h,b,e,c,f);a.each(k,function(b){var c=a.jgrid.getAccessor(this,l.p.localReader.id);a("#"+a.jgrid.jqID(l.p.id)+" tbody tr:eq("+b+")").after(a("tr#"+a.jgrid.jqID(c),l.grid.bDiv))});k=m=g=null}})},searchTree:function(b){var e=b.length||0,c=[],f,g=[],d=[],h,k,l,m,q;this.each(function(){if(this.grid&&this.p.treeGrid&&e)for(f=this.p.localReader.id;e--;)if(c=a(this).jqGrid("getNodeAncestors",b[e],!0,!0),c.push(b[e]),h=c[0][f],-1!==a.inArray(h,g))for(m=0,k=c.length;m<k;m++){var t=!1;q=0;for(l=d.length;q<
l;q++)if(c[m][f]===d[q][f]){t=!0;break}t||d.push(c[m])}else g.push(h),d=d.concat(c)});return d},collectChildrenSortTree:function(b,e,c,f,g,d){return this.each(function(){if(this.grid&&this.p.treeGrid){var h,k,l,m;h=a(this).jqGrid("getNodeChildren",e,this.p.search);h=a.jgrid.from.call(this,h);h.orderBy(c,f,g,d);m=h.select();h=0;for(k=m.length;h<k;h++)l=m[h],b.push(l),a(this).jqGrid("collectChildrenSortTree",b,l,c,f,g,d)}})},setTreeRow:function(b,e){var c=!1;this.each(function(){this.grid&&this.p.treeGrid&&
(c=a(this).jqGrid("setRowData",b,e))});return c},delTreeNode:function(b){return this.each(function(){var e=this.p.localReader.id,c,f=this.p.treeReader.left_field,g=this.p.treeReader.right_field,d,h,k;if(this.grid&&this.p.treeGrid&&(c=this.p._index[b],void 0!==c)){d=parseInt(this.p.data[c][g],10);h=d-parseInt(this.p.data[c][f],10)+1;var l=a(this).jqGrid("getFullTreeNode",this.p.data[c]);if(0<l.length)for(c=0;c<l.length;c++)a(this).jqGrid("delRowData",l[c][e]);if("nested"===this.p.treeGridModel){e=
a.jgrid.from.call(this,this.p.data).greater(f,d,{stype:"integer"}).select();if(e.length)for(k in e)e.hasOwnProperty(k)&&(e[k][f]=parseInt(e[k][f],10)-h);e=a.jgrid.from.call(this,this.p.data).greater(g,d,{stype:"integer"}).select();if(e.length)for(k in e)e.hasOwnProperty(k)&&(e[k][g]=parseInt(e[k][g],10)-h)}}})},delChildren:function(b){return this.each(function(){var e=this.p.localReader.id,c=this.p.treeReader.left_field,f=this.p.treeReader.right_field,g,d,h;if(this.grid&&this.p.treeGrid){var k=this.p._index[b];
if(void 0!==k){g=parseInt(this.p.data[k][f],10);d=g-parseInt(this.p.data[k][c],10)+1;k=a(this).jqGrid("getFullTreeNode",this.p.data[k]);if(0<k.length)for(var l=0;l<k.length;l++)k[l][e]!==b&&a(this).jqGrid("delRowData",k[l][e]);if("nested"===this.p.treeGridModel){e=a.jgrid.from(this.p.data).greater(c,g,{stype:"integer"}).select();if(e.length)for(h in e)e.hasOwnProperty(h)&&(e[h][c]=parseInt(e[h][c],10)-d);e=a.jgrid.from(this.p.data).greater(f,g,{stype:"integer"}).select();if(e.length)for(h in e)e.hasOwnProperty(h)&&
(e[h][f]=parseInt(e[h][f],10)-d)}}}})},addChildNode:function(b,e,c,f){var g=this[0];if(c){var d=g.p.treeReader.expanded_field,h=g.p.treeReader.leaf_field,k=g.p.treeReader.level_field,l=g.p.treeReader.parent_id_field,m=g.p.treeReader.left_field,q=g.p.treeReader.right_field,t=g.p.treeReader.loaded,n,r,x,z,p;n=0;var w=e,B;void 0===f&&(f=!1);if(null==b){p=g.p.data.length-1;if(0<=p)for(;0<=p;)n=Math.max(n,parseInt(g.p.data[p][g.p.localReader.id],10)),p--;b=n+1}var C=a(g).jqGrid("getInd",e);B=!1;void 0===
e||null===e||""===e?(w=e=null,n="last",z=g.p.tree_root_level,p=g.p.data.length+1):(n="after",r=g.p._index[e],x=g.p.data[r],e=x[g.p.localReader.id],z=parseInt(x[k],10)+1,p=a(g).jqGrid("getFullTreeNode",x),p.length?(w=p=p[p.length-1][g.p.localReader.id],p=a(g).jqGrid("getInd",w)+1):p=a(g).jqGrid("getInd",e)+1,x[h]&&(B=!0,x[d]=!0,a(g.rows[C]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(g.p.treeIcons.leaf+" tree-leaf").addClass(g.p.treeIcons.minus+
" tree-minus"),g.p.data[r][h]=!1,x[t]=!0));r=p+1;void 0===c[d]&&(c[d]=!1);void 0===c[t]&&(c[t]=!1);c[k]=z;void 0===c[h]&&(c[h]=!0);"adjacency"===g.p.treeGridModel&&(c[l]=e);if("nested"===g.p.treeGridModel){var E;if(null!==e){h=parseInt(x[q],10);k=a.jgrid.from.call(g,g.p.data);k=k.greaterOrEquals(q,h,{stype:"integer"});k=k.select();if(k.length)for(E in k)k.hasOwnProperty(E)&&(k[E][m]=k[E][m]>h?parseInt(k[E][m],10)+2:k[E][m],k[E][q]=k[E][q]>=h?parseInt(k[E][q],10)+2:k[E][q]);c[m]=h;c[q]=h+1}else{h=
parseInt(a(g).jqGrid("getCol",q,!1,"max"),10);k=a.jgrid.from.call(g,g.p.data).greater(m,h,{stype:"integer"}).select();if(k.length)for(E in k)k.hasOwnProperty(E)&&(k[E][m]=parseInt(k[E][m],10)+2);k=a.jgrid.from.call(g,g.p.data).greater(q,h,{stype:"integer"}).select();if(k.length)for(E in k)k.hasOwnProperty(E)&&(k[E][q]=parseInt(k[E][q],10)+2);c[m]=h+1;c[q]=h+2}}if(null===e||a(g).jqGrid("isNodeLoaded",x)||B)a(g).jqGrid("addRowData",b,c,n,w),a(g).jqGrid("setTreeNode",p,r);x&&!x[d]&&f&&a(g.rows[C]).find("div.treeclick").click()}}});
a.fn.jqDrag=function(a){return Ia(this,a,"d")};a.fn.jqResize=function(a,e){return Ia(this,a,"r",e)};a.jqDnR={dnr:{},e:0,drag:function(a){"d"==ca.k?da.css({left:ca.X+a.pageX-ca.pX,top:ca.Y+a.pageY-ca.pY}):(da.css({width:Math.max(a.pageX-ca.pX+ca.W,0),height:Math.max(a.pageY-ca.pY+ca.H,0)}),ua&&za.css({width:Math.max(a.pageX-ua.pX+ua.W,0),height:Math.max(a.pageY-ua.pY+ua.H,0)}));return!1},stop:function(){a(document).off("mousemove",Da.drag).off("mouseup",Da.stop)}};var Da=a.jqDnR,ca=Da.dnr,da=Da.e,
za,ua,Ia=function(b,e,c,f){return b.each(function(){e=e?a(e,b):b;e.on("mousedown",{e:b,k:c},function(b){var c=b.data,e={};da=c.e;za=f?a(f):!1;if("relative"!=da.css("position"))try{da.position(e)}catch(k){}ca={X:e.left||ja("left")||0,Y:e.top||ja("top")||0,W:ja("width")||da[0].scrollWidth||0,H:ja("height")||da[0].scrollHeight||0,pX:b.pageX,pY:b.pageY,k:c.k};ua=za&&"d"!=c.k?{X:e.left||Ea("left")||0,Y:e.top||Ea("top")||0,W:za[0].offsetWidth||Ea("width")||0,H:za[0].offsetHeight||Ea("height")||0,pX:b.pageX,
pY:b.pageY,k:c.k}:!1;if(a("input.hasDatepicker",da[0])[0])try{a("input.hasDatepicker",da[0]).datepicker("hide")}catch(k){}a(document).mousemove(a.jqDnR.drag).mouseup(a.jqDnR.stop);return!1})})},ja=function(a){return parseInt(da.css(a),10)||!1},Ea=function(a){return parseInt(za.css(a),10)||!1};a.fn.tinyDraggable=function(b){var e=a.extend({handle:0,exclude:0},b);return this.each(function(){var b,f,g=a(this);(e.handle?a(e.handle,g):g).on({mousedown:function(c){if(!e.exclude||!~a.inArray(c.target,a(e.exclude,
g))){c.preventDefault();var d=g.offset();b=c.pageX-d.left;f=c.pageY-d.top;a(document).on("mousemove.drag",function(a){g.offset({top:a.pageY-f,left:a.pageX-b})})}},mouseup:function(b){a(document).off("mousemove.drag")}})})};a.fn.jqm=function(b){var e={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:U,ajaxText:"",target:U,modal:U,toTop:U,onShow:U,onHide:U,onLoad:U};return this.each(function(){if(this._jqm)return ga[this._jqm].c=a.extend({},ga[this._jqm].c,
b);Aa++;this._jqm=Aa;ga[Aa]={c:a.extend(e,a.jqm.params,b),a:U,w:a(this).addClass("jqmID"+Aa),s:Aa};e.trigger&&a(this).jqmAddTrigger(e.trigger)})};a.fn.jqmAddClose=function(a){return Ja(this,a,"jqmHide")};a.fn.jqmAddTrigger=function(a){return Ja(this,a,"jqmShow")};a.fn.jqmShow=function(b){return this.each(function(){a.jqm.open(this._jqm,b)})};a.fn.jqmHide=function(b){return this.each(function(){a.jqm.close(this._jqm,b)})};a.jqm={hash:{},open:function(b,e){var c=ga[b],f=c.c,g="."+f.closeClass,d=parseInt(c.w.css("z-index")),
d=0<d?d:3E3,h=a("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":d-1,opacity:f.overlay/100});if(c.a)return U;c.t=e;c.a=!0;c.w.css("z-index",d);f.modal?(oa[0]||setTimeout(function(){new Ka("bind")},1),oa.push(b)):0<f.overlay?f.closeoverlay&&c.w.jqmAddClose(h):h=U;c.o=h?h.addClass(f.overlayClass).prependTo("body"):U;f.ajax?(b=f.target||c.w,d=f.ajax,b="string"===typeof b?a(b,c.w):a(b),d="@"===d.substr(0,1)?a(e).attr(d.substring(1)):d,b.html(f.ajaxText).load(d,function(){f.onLoad&&
f.onLoad.call(this,c);g&&c.w.jqmAddClose(a(g,c.w));La(c)})):g&&c.w.jqmAddClose(a(g,c.w));f.toTop&&c.o&&c.w.before('<span id="jqmP'+c.w[0]._jqm+'"></span>').insertAfter(c.o);f.onShow?f.onShow(c):c.w.show();La(c);return U},close:function(b){b=ga[b];if(!b.a)return U;b.a=U;oa[0]&&(oa.pop(),oa[0]||new Ka("unbind"));b.c.toTop&&b.o&&a("#jqmP"+b.w[0]._jqm).after(b.w).remove();if(b.c.onHide)b.c.onHide(b);else b.w.hide(),b.o&&b.o.remove();return U},params:{}};var Aa=0,ga=a.jqm.hash,oa=[],U=!1,La=function(a){void 0===
a.c.focusField&&(a.c.focusField=0);0<=a.c.focusField&&ja(a)},ja=function(b){try{a(":input:visible",b.w)[parseInt(b.c.focusField,10)].focus()}catch(e){}},Ka=function(b){a(document)[b]("keypress",Ha)[b]("keydown",Ha)[b]("mousedown",Ha)},Ha=function(b){var e=ga[oa[oa.length-1]],c=!a(b.target).parents(".jqmID"+e.s)[0];c&&(a(".jqmID"+e.s).each(function(){var e=a(this),g=e.offset();if(g.top<=b.pageY&&b.pageY<=g.top+e.height()&&g.left<=b.pageX&&b.pageX<=g.left+e.width())return c=!1}),ja(e));return!c},Ja=
function(b,e,c){return b.each(function(){var b=this._jqm;a(e).each(function(){this[c]||(this[c]=[],a(this).click(function(){for(var a in{jqmShow:1,jqmHide:1})for(var b in this[a])if(ga[this[a][b]])ga[this[a][b]].w[a](this);return U}));this[c].push(b)})})};a.fmatter={};a.extend(a.fmatter,{isBoolean:function(a){return"boolean"===typeof a},isObject:function(b){return b&&("object"===typeof b||a.isFunction(b))||!1},isString:function(a){return"string"===typeof a},isNumber:function(a){return"number"===typeof a&&
isFinite(a)},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(b){if(!this.isString(b)&&this.isValue(b))return!1;if(!this.isValue(b))return!0;b=a.trim(b).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return""===b}});a.fn.fmatter=function(b,e,c,f,g){var d=e;c=a.extend({},a.jgrid.getRegional(this,"formatter"),c);try{d=a.fn.fmatter[b].call(this,e,c,f,g)}catch(h){}return d};a.fmatter.util={NumberFormat:function(b,e){a.fmatter.isNumber(b)||
(b*=1);if(a.fmatter.isNumber(b)){var c=0>b,f=String(b),g=e.decimalSeparator||".";if(a.fmatter.isNumber(e.decimalPlaces)){var d=e.decimalPlaces,f=Math.pow(10,d),f=String(Math.round(b*f)/f);b=f.lastIndexOf(".");if(0<d)for(0>b?(f+=g,b=f.length-1):"."!==g&&(f=f.replace(".",g));f.length-1-b<d;)f+="0"}if(e.thousandsSeparator){d=e.thousandsSeparator;b=f.lastIndexOf(g);b=-1<b?b:f.length;var g=f.substring(b),h=-1,k;for(k=b;0<k;k--)h++,0===h%3&&k!==b&&(!c||1<k)&&(g=d+g),g=f.charAt(k-1)+g;f=g}f=e.prefix?e.prefix+
f:f;return f=e.suffix?f+e.suffix:f}return b}};a.fn.fmatter.defaultFormat=function(b,e){return a.fmatter.isValue(b)&&""!==b?b:e.defaultValue||"&#160;"};a.fn.fmatter.email=function(b,e){return a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,e):'<a href="mailto:'+b+'">'+b+"</a>"};a.fn.fmatter.checkbox=function(b,e){var c=a.extend({},e.checkbox);void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(c=a.extend({},c,e.colModel.formatoptions));e=!0===c.disabled?'disabled="disabled"':"";if(a.fmatter.isEmpty(b)||
void 0===b)b=a.fn.fmatter.defaultFormat(b,c);b=String(b);b=(b+"").toLowerCase();return'<input type="checkbox" '+(0>b.search(/(false|f|0|no|n|off|undefined)/i)?" checked='checked' ":"")+' value="'+b+'" offval="no" '+e+"/>"};a.fn.fmatter.link=function(b,e){var c={target:e.target},f="";void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(c=a.extend({},c,e.colModel.formatoptions));c.target&&(f="target="+c.target);return a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,e):"<a "+f+' href="'+b+'">'+
b+"</a>"};a.fn.fmatter.showlink=function(b,e){var c={baseLinkUrl:e.baseLinkUrl,showAction:e.showAction,addParam:e.addParam||"",target:e.target,idName:e.idName},f="";void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(c=a.extend({},c,e.colModel.formatoptions));c.target&&(f="target="+c.target);c=c.baseLinkUrl+c.showAction+"?"+c.idName+"="+e.rowId+c.addParam;return a.fmatter.isString(b)||a.fmatter.isNumber(b)?"<a "+f+' href="'+c+'">'+b+"</a>":a.fn.fmatter.defaultFormat(b,e)};a.fn.fmatter.integer=
function(b,e){var c=a.extend({},e.integer);void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(c=a.extend({},c,e.colModel.formatoptions));return a.fmatter.isEmpty(b)?c.defaultValue:a.fmatter.util.NumberFormat(b,c)};a.fn.fmatter.number=function(b,e){var c=a.extend({},e.number);void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(c=a.extend({},c,e.colModel.formatoptions));return a.fmatter.isEmpty(b)?c.defaultValue:a.fmatter.util.NumberFormat(b,c)};a.fn.fmatter.currency=function(b,e){var c=
a.extend({},e.currency);void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(c=a.extend({},c,e.colModel.formatoptions));return a.fmatter.isEmpty(b)?c.defaultValue:a.fmatter.util.NumberFormat(b,c)};a.fn.fmatter.date=function(b,e,c,f){c=a.extend({},e.date);void 0!==e.colModel&&void 0!==e.colModel.formatoptions&&(c=a.extend({},c,e.colModel.formatoptions));return c.reformatAfterEdit||"edit"!==f?a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,e):a.jgrid.parseDate.call(this,c.srcformat,b,c.newformat,
c):a.fn.fmatter.defaultFormat(b,e)};a.fn.fmatter.select=function(b,e){b=String(b);var c=!1,f=[],g,d;void 0!==e.colModel.formatoptions?(c=e.colModel.formatoptions.value,g=void 0===e.colModel.formatoptions.separator?":":e.colModel.formatoptions.separator,d=void 0===e.colModel.formatoptions.delimiter?";":e.colModel.formatoptions.delimiter):void 0!==e.colModel.editoptions&&(c=e.colModel.editoptions.value,g=void 0===e.colModel.editoptions.separator?":":e.colModel.editoptions.separator,d=void 0===e.colModel.editoptions.delimiter?
";":e.colModel.editoptions.delimiter);if(c){var h=!0===(null!=e.colModel.editoptions&&!0===e.colModel.editoptions.multiple)?!0:!1,k=[];h&&(k=b.split(","),k=a.map(k,function(b){return a.trim(b)}));if(a.fmatter.isString(c)){var l=c.split(d),m=0,q;for(q=0;q<l.length;q++)if(d=l[q].split(g),2<d.length&&(d[1]=a.map(d,function(a,b){if(0<b)return a}).join(g)),h)-1<a.inArray(d[0],k)&&(f[m]=d[1],m++);else if(a.trim(d[0])===a.trim(b)){f[0]=d[1];break}}else a.fmatter.isObject(c)&&(h?f=a.map(k,function(a){return c[a]}):
f[0]=c[b]||"")}b=f.join(", ");return""===b?a.fn.fmatter.defaultFormat(b,e):b};a.fn.fmatter.rowactions=function(b){var e=a(this).closest("tr.jqgrow"),c=e.attr("id"),f=a(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),f=a("#"+f),g=f[0],d=g.p,h=d.colModel[a.jgrid.getCellIndex(this)],k=h.frozen?a("tr#"+c+" td:eq("+a.jgrid.getCellIndex(this)+") > div",f):a(this).parent(),l={extraparam:{}},m=function(b){a.isFunction(l.afterRestore)&&l.afterRestore.call(g,b);k.find("div.ui-inline-edit,div.ui-inline-del").show();
k.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==h.formatoptions&&(l=a.extend(l,h.formatoptions));void 0!==d.editOptions&&(l.editOptions=d.editOptions);void 0!==d.delOptions&&(l.delOptions=d.delOptions);e.hasClass("jqgrid-new-row")&&(l.extraparam[d.prmNames.oper]=d.prmNames.addoper);e={keys:l.keys,oneditfunc:l.onEdit,successfunc:l.onSuccess,url:l.url,extraparam:l.extraparam,aftersavefunc:function(b,c){a.isFunction(l.afterSave)&&l.afterSave.call(g,b,c);k.find("div.ui-inline-edit,div.ui-inline-del").show();
k.find("div.ui-inline-save,div.ui-inline-cancel").hide()},errorfunc:l.onError,afterrestorefunc:m,restoreAfterError:l.restoreAfterError,mtype:l.mtype};switch(b){case "edit":f.jqGrid("editRow",c,e);k.find("div.ui-inline-edit,div.ui-inline-del").hide();k.find("div.ui-inline-save,div.ui-inline-cancel").show();f.triggerHandler("jqGridAfterGridComplete");break;case "save":f.jqGrid("saveRow",c,e)&&(k.find("div.ui-inline-edit,div.ui-inline-del").show(),k.find("div.ui-inline-save,div.ui-inline-cancel").hide(),
f.triggerHandler("jqGridAfterGridComplete"));break;case "cancel":f.jqGrid("restoreRow",c,m);k.find("div.ui-inline-edit,div.ui-inline-del").show();k.find("div.ui-inline-save,div.ui-inline-cancel").hide();f.triggerHandler("jqGridAfterGridComplete");break;case "del":f.jqGrid("delGridRow",c,l.delOptions);break;case "formedit":f.jqGrid("setSelection",c),f.jqGrid("editGridRow",c,l.editOptions)}};a.fn.fmatter.actions=function(b,e){b={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1};var c=e.rowId,f=
"",g=a.jgrid.getRegional(this,"nav"),d=a.jgrid.styleUI[e.styleUI||"jQueryUI"].fmatter,h=a.jgrid.styleUI[e.styleUI||"jQueryUI"].common;void 0!==e.colModel.formatoptions&&(b=a.extend(b,e.colModel.formatoptions));if(void 0===c||a.fmatter.isEmpty(c))return"";e="onmouseover=jQuery(this).addClass('"+h.hover+"'); onmouseout=jQuery(this).removeClass('"+h.hover+"');  ";b.editformbutton?f+="<div title='"+g.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+
c+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+e)+"><span class='"+h.icon_base+" "+d.icon_edit+"'></span></div>":b.editbutton&&(f+="<div title='"+g.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+c+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+e)+"><span class='"+h.icon_base+" "+d.icon_edit+"'></span></div>");b.delbutton&&(f+="<div title='"+g.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+
("id='jDeleteButton_"+c+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+e)+"><span class='"+h.icon_base+" "+d.icon_del+"'></span></div>");f+="<div title='"+g.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+("id='jSaveButton_"+c+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+e)+"><span class='"+h.icon_base+" "+d.icon_save+"'></span></div>";f+="<div title='"+g.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+
("id='jCancelButton_"+c+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+e)+"><span class='"+h.icon_base+" "+d.icon_cancel+"'></span></div>";return"<div style='margin-left:8px;'>"+f+"</div>"};a.unformat=function(b,e,c,f){var g,d=e.colModel.formatter,h=e.colModel.formatoptions||{},k=/([\.\*\_\'\(\)\{\}\+\?\\])/g,l=e.colModel.unformat||a.fn.fmatter[d]&&a.fn.fmatter[d].unformat;if(void 0!==l&&a.isFunction(l))g=l.call(this,a(b).text(),e,b);else if(void 0!==d&&a.fmatter.isString(d))switch(g=
a.jgrid.getRegional(this,"formatter")||{},d){case "integer":h=a.extend({},g.integer,h);e=h.thousandsSeparator.replace(k,"\\$1");e=new RegExp(e,"g");g=a(b).text().replace(e,"");break;case "number":h=a.extend({},g.number,h);e=h.thousandsSeparator.replace(k,"\\$1");e=new RegExp(e,"g");g=a(b).text().replace(e,"").replace(h.decimalSeparator,".");break;case "currency":h=a.extend({},g.currency,h);e=h.thousandsSeparator.replace(k,"\\$1");e=new RegExp(e,"g");g=a(b).text();h.prefix&&h.prefix.length&&(g=g.substr(h.prefix.length));
h.suffix&&h.suffix.length&&(g=g.substr(0,g.length-h.suffix.length));g=g.replace(e,"").replace(h.decimalSeparator,".");break;case "checkbox":h=e.colModel.editoptions?e.colModel.editoptions.value.split(":"):["Yes","No"];g=a("input",b).is(":checked")?h[0]:h[1];break;case "select":g=a.unformat.select(b,e,c,f);break;case "actions":return"";default:g=a(b).text()}return void 0!==g?g:!0===f?a(b).text():a.jgrid.htmlDecode(a(b).html())};a.unformat.select=function(b,e,c,f){c=[];b=a(b).text();if(!0===f)return b;
f=a.extend({},void 0!==e.colModel.formatoptions?e.colModel.formatoptions:e.colModel.editoptions);e=void 0===f.separator?":":f.separator;var g=void 0===f.delimiter?";":f.delimiter;if(f.value){var d=f.value;f=!0===f.multiple?!0:!1;var h=[];f&&(h=b.split(","),h=a.map(h,function(b){return a.trim(b)}));if(a.fmatter.isString(d)){var k=d.split(g),l=0,m;for(m=0;m<k.length;m++)if(g=k[m].split(e),2<g.length&&(g[1]=a.map(g,function(a,b){if(0<b)return a}).join(e)),f)-1<a.inArray(a.trim(g[1]),h)&&(c[l]=g[0],l++);
else if(a.trim(g[1])===a.trim(b)){c[0]=g[0];break}}else if(a.fmatter.isObject(d)||a.isArray(d))f||(h[0]=b),c=a.map(h,function(b){var c;a.each(d,function(a,d){if(d===b)return c=a,!1});if(void 0!==c)return c});return c.join(", ")}return b||""};a.unformat.date=function(b,e){var c=a.jgrid.getRegional(this,"formatter.date")||{};void 0!==e.formatoptions&&(c=a.extend({},c,e.formatoptions));return a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,e):a.jgrid.parseDate.call(this,c.newformat,b,c.srcformat,c)};
var V,ka=a();a.fn.html5sortable=function(b){var e=String(b);b=a.extend({connectWith:!1},b);return this.each(function(){if(/^enable|disable|destroy$/.test(e)){var c=a(this).children(a(this).data("items")).attr("draggable","enable"===e);"destroy"===e&&c.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}else{var f,g,c=a(this).children(b.items),d=a("<"+(/^ul|ol$/i.test(this.tagName)?"li":/^tbody$/i.test(this.tagName)?"tr":"div")+
' class="sortable-placeholder '+b.placeholderClass+'">').html("&nbsp;");c.find(b.handle).mousedown(function(){f=!0}).mouseup(function(){f=!1});a(this).data("items",b.items);ka=ka.add(d);b.connectWith&&a(b.connectWith).add(this).data("connectWith",b.connectWith);c.attr("draggable","true").on("dragstart.h5s",function(c){if(b.handle&&!f)return!1;f=!1;c=c.originalEvent.dataTransfer;c.effectAllowed="move";c.setData("Text","dummy");g=(V=a(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",
function(){V&&(V.removeClass("sortable-dragging").show(),ka.detach(),g!==V.index()&&V.parent().trigger("sortupdate",{item:V,startindex:g,endindex:V.index()}),V=null)}).not("a[href], img").on("selectstart.h5s",function(){this.dragDrop&&this.dragDrop();return!1}).end().add([this,d]).on("dragover.h5s dragenter.h5s drop.h5s",function(e){if(!c.is(V)&&b.connectWith!==a(V).parent().data("connectWith"))return!0;if("drop"===e.type)return e.stopPropagation(),ka.filter(":visible").after(V),V.trigger("dragend.h5s"),
!1;e.preventDefault();e.originalEvent.dataTransfer.dropEffect="move";c.is(this)?(b.forcePlaceholderSize&&d.height(V.outerHeight()),V.hide(),a(this)[d.index()<a(this).index()?"after":"before"](d),ka.not(d).detach()):ka.is(this)||a(this).children(b.items).length||(ka.detach(),a(this).append(d));return!1})}})};window.jqGridUtils={stringify:function(a){return JSON.stringify(a,function(a,b){return"function"===typeof b?b.toString():b})},parse:function(a){return JSON.parse(a,function(a,b){return"string"===
typeof b&&-1!==b.indexOf("function")&&"function"===b.split(" ")[0].trim()&&"}"===b.trim().slice(-1)?eval("("+b+")"):b})},encode:function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(b,e){var c=a.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},e||{}),f=this,g=function(a,b){return"#text"===a?c.encode?f.encode(b):b:"function"===typeof b?"<"+a+"><![CDATA["+b+"]]\x3e</"+a+">\n":""===
b?"<"+a+">__EMPTY_STRING_</"+a+">\n":"<"+a+">"+(c.encode?f.encode(b):b)+"</"+a+">\n"},d=function(a,b){for(var c=[],e=0;e<b.length;e++){var f=b[e];c[c.length]="undefined"===typeof f||null==f?"<"+a+" />":"object"===typeof f&&f.constructor==Array?d(a,f):"object"===typeof f?h(a,f):g(a,f)}c.length||(c[0]="<"+a+">__EMPTY_ARRAY_</"+a+">\n");return c.join("")},h=function(a,b){var e=[],k=[],l;for(l in b)if(b.hasOwnProperty(l)){var n=b[l];l.charAt(0)!==c.attr_prefix?e[e.length]=null==n?"<"+l+" />":"object"===
typeof n&&n.constructor===Array?d(l,n):"object"===typeof n?h(l,n):g(l,n):k[k.length]=" "+l.substring(1)+'="'+(c.encode?f.encode(n):n)+'"'}b=k.join("");k=e.join("");null!=a&&(k=0<e.length?k.match(/\n/)?"<"+a+b+">\n"+k+"</"+a+">\n":"<"+a+b+">"+k+"</"+a+">\n":"<"+a+b+" />\n");return k};b=h(null,b);return c.xmlDecl+b},xmlToJSON:function(b,e){var c=a.extend({force_array:[],attr_prefix:"-"},e||{});if(b){var f={};if(c.force_array)for(e=0;e<c.force_array.length;e++)f[c.force_array[e]]=1;"string"===typeof b&&
(b=a.parseXML(b));b.documentElement&&(b=b.documentElement);var g=function(a,b,c,d){if("string"===typeof d)if(-1!==d.indexOf("function"))d=eval("("+d+")");else switch(d){case "__EMPTY_ARRAY_":d=[];break;case "__EMPTY_STRING_":d="";break;case "false":d=!1;break;case "true":d=!0}f[b]?(1===c&&(a[b]=[]),a[b][a[b].length]=d):1===c?a[b]=d:2===c?a[b]=[a[b],d]:a[b][a[b].length]=d},d=function(a){if(7!==a.nodeType){if(3===a.nodeType||4===a.nodeType)return null==a.nodeValue.match(/[^\x00-\x20]/)?void 0:a.nodeValue;
var b,e={},f,h,k;if(a.attributes&&a.attributes.length)for(b={},f=0;f<a.attributes.length;f++)if(h=a.attributes[f].nodeName,"string"===typeof h&&(k=a.attributes[f].nodeValue))h=c.attr_prefix+h,"undefined"===typeof e[h]&&(e[h]=0),e[h]++,g(b,h,e[h],k);if(a.childNodes&&a.childNodes.length){h=!0;b&&(h=!1);for(f=0;f<a.childNodes.length&&h;f++)k=a.childNodes[f].nodeType,3!==k&&4!==k&&(h=!1);if(h)for(b||(b=""),f=0;f<a.childNodes.length;f++)b+=a.childNodes[f].nodeValue;else for(b||(b={}),f=0;f<a.childNodes.length;f++)if(h=
a.childNodes[f].nodeName,"string"===typeof h&&(k=d(a.childNodes[f])))"undefined"===typeof e[h]&&(e[h]=0),e[h]++,g(b,h,e[h],k)}return b}};e=d(b);f[b.nodeName]&&(e=[e]);if(11!==b.nodeType){var h={};h[b.nodeName]=e;e=h}return e}}}});