$(function(){iboxFullHeight();$(window).resize(function(){iboxFullHeight()});iboxCollapseLeft();$("[data-toggle=popover]").popover({container:"body"});$("[data-toggle=tooltip]").tooltip({container:"body"})});
function iboxFullHeight(){$(".ibox.full-height").each(function(a,b){a=$(this).height();b=a-54-$(this).children(".ibox-content").find(".ibox-form").height();var c=0,d=$(this).children(".ibox-content").find(".ibox-grid-tools");1==d.length&&(c=d.height()+10,d=$(this).children(".ibox-content").find(".ibox-form .header").length,c+=5*d);$(this).children(".ibox-content").height(a-54);$(this).children(".ibox-content").find(".ibox-grid").height(b-c-64);$(this).children(".ibox-content").find(".ibox-div").height(b)});
$(".tabs-container.full-height-with-tab").each(function(a,b){a=$(this).closest(".full-height").height();b=$(this).prev(".ibox.full-height-with-tab").height();a=a-b-68;b=$(this).find(".tab-pane.active>.panel-body").width();$(this).find(".tab-pane>.panel-body").height(a);$(this).find(".ibox-grid").height(a-64);$(this).find(".ibox-grid").width(b)})}
function iboxCollapseLeft(){$(".ibox-center .ibox-tools-collapse a[leftcol]").click(function(){var a=Number($(this).attr("leftcol")||0),b=12-a,c="col-sm-"+a,a="col-md-"+a,d="col-sm-"+b,b="col-md-"+b;$(".ibox-left").is(":visible")?($(".ibox-left").removeClass(c).removeClass(a).hide(),$(".ibox-center").removeClass(d).removeClass(b).addClass("col-sm-12").addClass("col-md-12"),$(this).find(".fa").removeClass("fa-chevron-left").addClass("fa-chevron-right")):($(".ibox-left").addClass(c).addClass(a).show(),
$(".ibox-center").removeClass("col-sm-12").removeClass("col-md-12").addClass(d).addClass(b),$(this).find(".fa").removeClass("fa-chevron-right").addClass("fa-chevron-left"));$(window).resize()})}layer.config({extend:"moon/style.css",skin:"layer-ext-moon",zIndex:1E3});
$.validator.setDefaults({onfocusout:!1,onkeyup:!1,onclick:!1,focusInvalid:!1,focusCleanup:!1,ignore:"input[type=hidden]",showErrors:function(a,b){$(".input-group").removeClass("has-error");if(0!=b.length){var c="";$.each(b,function(a,b){""!=c&&(c+="<br>");c+=b.message;$(b.element).closest(".input-group").addClass("has-error")});""!=c&&layer.alert("\u8bf7\u68c0\u67e5\u7ea2\u8272\u5b57\u6bb5\uff01",{shadeClose:!0,title:"\u6821\u9a8c\u4e0d\u901a\u8fc7",icon:2})}}});
$.ajaxSetup({error:function(a,b,c){"401"==a.status?layer.alert("\u4f1a\u8bdd\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01",{shadeClose:!0,title:"\u51fa\u9519",icon:2}):"200"==a.status&&-1!=a.responseText.substring(0,14).indexOf("success:false")&&(a=a.responseText.substring(24,a.responseText.length-2),layer.alert(a,{shadeClose:!0,title:"\u63d0\u793a",icon:2}))}});
Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)(new RegExp("("+c+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};